System.register("chunks:///_virtual/UIEvenEnum.ts",["cc"],(function(_){"use strict";var E;return{setters:[function(_){E=_.cclegacy}],execute:function(){var U;_("UIEvenEnum",void 0),E._RF.push({},"059d8sJE4hPZYh2x+k1CuA6","UIEvenEnum",void 0),function(_){_.UI_TOUCH_START="UI_TOUCH_START",_.UI_TOUCH_MOVE="UI_TOUCH_MOVE",_.UI_TOUCH_END="UI_TOUCH_END",_.UPDATE_BOSS_BLOOD="UPDATE_BOSS_BLOOD",_.UPDATE_PLAYER_BLOOD="UPDATE_PLAYER_BLOOD",_.UPDATE_PLAYER_BALL="UPDATE_PLAYER_BALL"}(U||(U=_("UIEvenEnum",{}))),E._RF.pop()}}}));

System.register("chunks:///_virtual/LevelToolPlayer.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,o,t,l,i,n,a,c,u,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){i=e.cclegacy,n=e._decorator,a=e.CCInteger,c=e.Color,u=e.color,p=e.Component}],execute:function(){var s,y,f,v,b,d,g;i._RF.push({},"0ed82OXEedEBo/PZgiXYkFT","LevelToolPlayer",void 0);var C=n.ccclass,h=n.property;e("LevelToolPlayer",(s=C("LevelToolPlayer"),y=h({type:a,displayName:"数字"}),f=h({type:c,displayName:"初始球颜色"}),s((d=r((b=function(e){function r(){for(var r,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return r=e.call.apply(e,[this].concat(i))||this,t(l(r),"playerCount",d,l(r)),t(l(r),"ballColor",g,l(r)),r}return o(r,e),r}(p)).prototype,"playerCount",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),g=r(b.prototype,"ballColor",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u(12,34,197,255)}}),v=b))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Vec3Util.ts","./PoolManager.ts","./EffectManager.ts","./Behavior3D.ts","./FLGloable.ts","./GameEvenEnum.ts","./GameState.ts","./EAniDefine.ts","./EEffectName.ts"],(function(t){"use strict";var i,e,n,s,o,r,a,c,h,u,l,d,p,f,A,S,m,D,y,E,g;return{setters:[function(t){i=t.inheritsLoose,e=t.defineProperty,n=t.assertThisInitialized,s=t.createClass},function(t){o=t.cclegacy,r=t._decorator,a=t.SkeletalAnimation,c=t.game,h=t.Vec3,u=t.v3,l=t.Quat,d=t.MeshRenderer},function(t){p=t.Vec3Util},function(t){f=t.PoolManager},function(t){A=t.EffectManager},function(t){S=t.Behavior3D},function(t){m=t.FLGloable},function(t){D=t.GameEvenEnum},function(t){y=t.EBossState},function(t){E=t.EAniDefine},function(t){g=t.EEffectName}],execute:function(){var w;o._RF.push({},"2412ew5jq9DPa4GGIVsm+lh","MonsterBase",void 0);var v=r.ccclass;r.property,t("MonsterBase",v("MonsterBase")(w=function(t){function o(){for(var i,s=arguments.length,o=new Array(s),r=0;r<s;r++)o[r]=arguments[r];return i=t.call.apply(t,[this].concat(o))||this,e(n(i),"isInit",!1),e(n(i),"rw",null),e(n(i),"rwAni",null),e(n(i),"bossID",1001),e(n(i),"curHp",1),e(n(i),"curAtk",1),e(n(i),"curAttackCD",0),e(n(i),"moveSpeed",.06),e(n(i),"initSpeed",.07),e(n(i),"isDied",!1),e(n(i),"minR",.5),e(n(i),"_curState",-1),e(n(i),"curAniName",""),i}i(o,t);var r=o.prototype;return r.booState=function(t){return t==this.curState},r.onLoad=function(){this.rw=this.node.getChildByName("rw"),this.rwAni=this.rw.getComponent(a)},r.onEnabled=function(){this.registerEvent(D.GAME_ENDED,this.onGameEnd,this),this.node.on(D.E_MonsterHit,this.onHit,this),this.node.on(D.E_MonsterAttack,this.startAttack,this)},r.onGameEnd=function(t){t||this.playAni(E.IDLE)},r.init=function(t,i){this.bossID=t,this.curHp=i,this.curState=y.IDLE,this.playAni(E.BOSS_IDLE),this.moveSpeed=this.initSpeed+.08*(this.node.scale.x-1),1003==this.bossID||1004==this.bossID?this.minR=.35*this.node.scale.x:this.minR=1*this.node.scale.x,this.isInit=!0},r.startAttack=function(){this.curState=y.ATTACK},r.onHit=function(t){void 0===t&&(t=1),this.isDied||this.booState(y.IDLE)||(this.curHp-=t,this.curHp<=0&&this.onDied())},r.update=function(t){this.isInit&&m.curGameState==D.GAME_STARTED&&this.updateState()},r.updateState=function(){switch(this.curState){case y.IDLE:break;case y.ATTACK:this.updateAttack()}},r.updateAttack=function(){if(m.playerScript.node&&m.playerScript.node.parent&&!m.playerScript.isDied){if(this.curAttackCD>0&&(this.curAttackCD-=c.deltaTime),h.distance(m.playerScript.node.worldPosition,this.node.worldPosition)>m.playerScript.minR+this.minR)return this.playAni(E.BOSS_RUN),void this.moveTarget(m.playerScript.node.worldPosition.clone());this.onSetLockTarget(m.playerScript.node.worldPosition,!1),this.curAttackCD<=0&&(this.curAttackCD=1,this.curAtk=m.playerScript.curHp>this.curHp?this.curHp:m.playerScript.curHp,m.playerScript.onHit(this.curAtk),this.curHp-=this.curAtk,this.curHp<=0&&this.onDied())}else this.curState=y.IDLE},r.moveTarget=function(t){var i=h.subtract(u(),t,this.node.worldPosition).normalize().multiplyScalar(this.moveSpeed);this.node.translate(i,1),this.onSetLockTarget(t,!0)},r.onSetLockTarget=function(t,i){void 0===i&&(i=!1),this.node.rotation=i?l.slerp(this.node.rotation,this.node.rotation,p.lockPos(this.node.worldPosition,t),.1):p.lockPos(this.node.worldPosition,t)},r.onDied=function(){var t=this;if(!this.isDied){this.isInit=!1,this.isDied=!0,this.curState=y.DIED;var i=m.curMonsters.indexOf(this.node);if(-1!=i&&m.curMonsters.splice(i,1),1003==this.bossID||1004==this.bossID)this.node.getComponentsInChildren(d).map((function(t){t.material=m.grayMaterial}));A.instance.playParticleByNode(g.JIANSHE,m.effectRoot,!0,this.node.worldPosition.clone()),this.playAni(E.BOSS_DIED),this.scheduleOnce((function(){t.node.destroy()}),2)}},r.changeMonster=function(t){var i=f.getInstance().getPrefabNodeByPool("boss_"+t,null),e=i.getChildByName("rw");this.node.removeAllChildren(),this.node.addChild(e),this.rw=this.node.getChildByName("rw"),this.rwAni=this.rw.getComponent(a),this.rwAni.play("idle");var n=i.getComponent(o);n||(n=i.addComponent(o)),n.init(t,this.curHp)},r.playAni=function(t,i,e){void 0===i&&(i=1),void 0===e&&(e=!1),e&&(this.curAniName=""),this.curAniName!==t&&(this.rwAni&&this.rwAni.play(t),this.rwAni&&this.rwAni.getState(t)&&(this.rwAni.getState(t).speed=i),this.curAniName=t)},r.getAniPro=function(t){return this.rwAni.getState(t).isPlaying?this.rwAni.getState(t).ratio:-1},r.onDisabled=function(){this.unscheduleAllCallbacks(),this.node.off(D.E_MonsterHit,this.onHit,this),this.node.off(D.E_MonsterAttack,this.startAttack,this)},s(o,[{key:"curState",get:function(){return this._curState},set:function(t){this._curState=t}}]),o}(S))||w);o._RF.pop()}}}));

System.register("chunks:///_virtual/MapPrefabEnum.ts",["cc"],(function(e){"use strict";var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){var a;e("MapPrefabEnum",void 0),r._RF.push({},"332e11z0WNIiqb7O0kLptB7","MapPrefabEnum",void 0),function(e){e.map_ground="map_ground",e.map_number_wall="map_number_wall",e.map_boss="map_boss",e.map_player="map_player",e.line_circle="line_circle",e.line_point="line_point",e.door_number="dj4_number",e.map_door_red="map_door_red",e.map_door_green="map_door_green",e.BULLET="bullet"}(a||(a=e("MapPrefabEnum",{}))),r._RF.pop()}}}));

System.register("chunks:///_virtual/MainPlayer.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Vec3Util.ts","./RotateUtil.ts","./ArrayUtil.ts","./PoolManager.ts","./FlMath.ts","./UIEvenEnum.ts","./Behavior3D.ts","./FLGloable.ts","./GameEvenEnum.ts","./GameState.ts","./EAniDefine.ts","./MapPrefabEnum.ts","./Bullet.ts"],(function(t){"use strict";var i,e,s,n,o,r,a,h,l,c,u,d,p,A,f,g,C,m,v,y,E,w,b,_,M,D,S,P,N,B,H;return{setters:[function(t){i=t.inheritsLoose,e=t.defineProperty,s=t.assertThisInitialized,n=t.createClass},function(t){o=t.cclegacy,r=t._decorator,a=t.SkeletalAnimation,h=t.CapsuleCollider,l=t.SystemEvent,c=t.v3,u=t.game,d=t.Quat,p=t.Vec3,A=t.math,f=t.systemEvent,g=t.KeyCode},function(t){C=t.Vec3Util},function(t){m=t.RotateUtil},function(t){v=t.default},function(t){y=t.PoolManager},function(t){E=t.default},function(t){w=t.UIEvenEnum},function(t){b=t.Behavior3D},function(t){_=t.FLGloable},function(t){M=t.GameEvenEnum},function(t){D=t.EColliderGroup,S=t.EState,P=t.EBuffType},function(t){N=t.EAniDefine},function(t){B=t.MapPrefabEnum},function(t){H=t.Bullet}],execute:function(){var I;o._RF.push({},"3573bqMr2dNCJ/8MowiUd+H","MainPlayer",void 0);var k=r.ccclass;r.property,t("MainPlayer",k("MainPlayer")(I=function(t){function o(){for(var i,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return i=t.call.apply(t,[this].concat(o))||this,e(s(i),"isInit",!1),e(s(i),"rw",null),e(s(i),"rwAni",null),e(s(i),"bulletNd",null),e(s(i),"hpRoot",null),e(s(i),"capArr",[]),e(s(i),"clothesArr",[]),e(s(i),"bodyArr",[]),e(s(i),"weaponArr",[]),e(s(i),"speed",.11),e(s(i),"curAttackCD",0),e(s(i),"isMove",!1),e(s(i),"maxScale",2),e(s(i),"_curHp",1),e(s(i),"isDied",!1),e(s(i),"rigidBody",null),e(s(i),"capsuleCollider",null),e(s(i),"_curState",-1),e(s(i),"bulletAng",10),e(s(i),"curAniName",""),i}i(o,t);var r=o.prototype;return r.booState=function(t){return t==this.curState},r.onLoad=function(){this.rw=this.node.getChildByName("rw"),this.rwAni=this.rw.getComponent(a),this.bulletNd=this.node.getChildByName("bulletNd"),this.hpRoot=this.node.getChildByName("hpRoot"),this.capsuleCollider=this.getComponent(h),this.initAllClothes()},r.onEnabled=function(){this.registerEvent(l.EventType.KEY_DOWN,this.onKeyDown,this),this.registerEvent(M.CHANGE_CAP,this.onChangeCap,this),this.registerEvent(M.CHANGE_BODY,this.onChangeClothes,this),this.registerEvent(M.CHANGE_WEAPON,this.onChangeWeapon,this),this.registerEvent(M.CHANGE_PLAYER_HP,this.onChangeHp,this),this.registerEvent(M.GAME_RESET,this.debugResetState,this),this.node.on(M.E_DoorBack,this.onDoorBack,this)},r.updateBody=function(){var t=1+.02*(this.curHp-1);t=E.getMinMax(t,1,this.maxScale),t=E.lerp(this.node.scale.x,t,.3),this.node.scale=c(t,t,t)},r.onChangeHp=function(t){this.curHp=t;var i=1+.02*(this.curHp-1);i=E.getMinMax(i,1,this.maxScale),this.node.scale=c(i,i,i)},r.init=function(){var t=this;this.curHp=_.initPlayerHp,this.isMove=!1,this.node.worldPosition=c(),this.node.eulerAngles=c(),this.node.scale=c(1,1,1),this.scheduleOnce((function(){t.playAni(N.IDLE,1,!0),t.capsuleCollider.setGroup(D.player),t.capsuleCollider.setMask(D.number_wall),t.capsuleCollider.on("onCollisionStay",t.onCollision,t)}),.001),this.curState=S.DAIJI,this.isInit=!0},r.onCollision=function(t){if(this.isInit&&_.curGameState==M.GAME_STARTED){var i=c();t.contacts[0].getWorldPointOnB(i),t.otherCollider.node.emit(M.E_DoorAction,this.node,i),this.activeWave();var e=_.monstersWave[t.otherCollider.node.uuid];_.curMonsters=v.combineArrays(_.curMonsters,e),e.map((function(t){t.emit(M.E_MonsterAttack)}))}},r.activeWave=function(){},r.onDoorBack=function(t,i){switch(t){case P.ADD:this.curHp+=i;break;case P.CUT:this.curHp-=i;break;case P.MULTIPLY:this.curHp*=i;break;case P.EXCEPT:this.curHp=Math.floor(this.curHp/i)}this.curHp=this.curHp<1?1:this.curHp},r.update=function(){this.isInit&&_.curGameState==M.GAME_STARTED&&(this.curAttackCD>0&&(this.curAttackCD-=u.deltaTime),this.updateState(),this.updateMove(),this.updateBody())},r.updateState=function(){switch(this.curState){case S.DAIJI:this.getMinDisTarget()&&(this.curState=S.ATTACK);break;case S.ATTACK:var t=this.getMinDisTarget();if(!t)return void(this.curState=S.DAIJI);this.curAttackCD<=0&&(this.actionEmitBullet(),this.curAttackCD=.2),this.onSetLockTarget(t.worldPosition.clone(),!0)}},r.updateMove=function(){if(!this.booState(S.DIED))if(null!==_.angle){this.isMove||(this.isMove=!0,this.playAni(N.RUN));var t=(_.angle-90)%360;this.booState(S.DAIJI)&&(this.node.eulerAngles=c(0,t,0));var i=this.speed+(this.node.scale.x-1)/(this.maxScale-1)*.15,e=c();e.x=-i*Math.sin(Math.PI/180*t),e.z=-i*Math.cos(Math.PI/180*t),this.node.translate(e,1);var s=E.getMinMax(this.node.worldPosition.x,-5.6,5.6),n=this.node.worldPosition.z>5?5:this.node.worldPosition.z;this.node.worldPosition=c(s,this.node.worldPosition.y,n)}else this.isMove&&(this.isMove=!1,this.playAni(N.IDLE))},r.onHit=function(t){void 0===t&&(t=1),this.curHp-=t,this.curHp<=0&&this.onGameOver(!1)},r.onSetLockTarget=function(t,i){void 0===i&&(i=!1),this.node.rotation=i?d.slerp(this.node.rotation,this.node.rotation,C.lockPos(this.node.worldPosition,t,!1),.6):C.lockPos(this.node.worldPosition,t,!1)},r.getMinDisTarget=function(){for(var t=1e8,i=null,e=0;e<_.curMonsters.length;e++){var s=_.curMonsters[e],n=p.distance(this.node.worldPosition,s.worldPosition);n<t&&(t=n,i=s)}return i},r.actionEmitBullet=function(t){if(void 0===t&&(t=!1),t||this.booState(S.ATTACK)){this.playAni(this.isMove?N.ATTACK2:N.ATTACK1);for(var i=this.bulletNd.worldPosition.clone(),e=this.getBulletCount(),s=-Math.floor(e/2)*this.bulletAng,n=0;n<e;n++){var o=s;s+=this.bulletAng,this.bulletNd.eulerAngles=c(),m.rotateAround(this.bulletNd,c(0,1,0),A.toRadian(o));var r=this.bulletNd.forward.clone(),a=y.getInstance().getPrefabNodeByPool(B.BULLET,_.effectRoot);a.worldPosition=i;var h=a.getComponent(H);h||(h=a.addComponent(H)),h.init(r)}}},r.getBulletCount=function(){return this.curHp<=10?1:this.curHp<=25?2:this.curHp<=40?3:this.curHp<=60?4:this.curHp<=90?5:6},r.onGameOver=function(t){this.isInit=!1,this.curState=S.DIED,_.curGameState=M.GAME_ENDED,f.emit(M.GAME_ENDED,t),this.unscheduleAllCallbacks(),y.getInstance().putNodeChildren(_.effectRoot),t?this.playAni(N.SUCC):this.playAni(N.DIED)},r.debugResetState=function(){this.playAni(N.IDLE),this.curState=S.DAIJI,this.node.worldPosition=c(),this.node.eulerAngles=c(),this.node.scale=c(1,1,1),this.curHp=_.initPlayerHp,this.isMove=!1,_.curGameState=M.GAME_READY,this.isInit=!0},r.initAllClothes=function(){for(var t=1;t<=6;t++)this.rw.getChildByName("Zomball_zj"+t+"_head")?this.capArr.push(this.rw.getChildByName("Zomball_zj"+t+"_head")):this.rw.getChildByName("Zomball_zj"+t+"_head")||this.capArr.push(null),this.rw.getChildByName("Zomball_zj"+t+"_clothes")?this.clothesArr.push(this.rw.getChildByName("Zomball_zj"+t+"_clothes")):this.rw.getChildByName("Zomball_zj"+t+"_clothes")||this.clothesArr.push(null),this.rw.getChildByName("Zomball_zj"+t+"_body")?this.bodyArr.push(this.rw.getChildByName("Zomball_zj"+t+"_body")):this.rw.getChildByName("Zomball_zj"+t+"_body")||this.bodyArr.push(null),this.rw.getChildByName("wq Socket").getChildByName("Zomball_wp"+t)?this.weaponArr.push(this.rw.getChildByName("wq Socket").getChildByName("Zomball_wp"+t)):this.rw.getChildByName("wq Socket").getChildByName("Zomball_wp"+t)||this.weaponArr.push(null);console.log(this.capArr,this.weaponArr)},r.onChangeCap=function(t){if(t>0&&t<7)for(var i=0;i<this.capArr.length;i++)i===t-1&&this.capArr[i]?this.capArr[i].active=!0:this.capArr[i]&&(this.capArr[i].active=!1)},r.onChangeClothes=function(t){if(t>0&&t<7)for(var i=0;i<this.clothesArr.length;i++)i===t-1&&this.clothesArr[i]?this.clothesArr[i].active=!0:this.clothesArr[i]&&(this.clothesArr[i].active=!1),i===t-1&&this.bodyArr[i]?this.bodyArr[i].active=!0:i!==t-1||this.bodyArr[i]?this.bodyArr[i]&&(this.bodyArr[i].active=!1):this.bodyArr[0].active=!0},r.onChangeWeapon=function(t){if(t>0&&t<6)for(var i=0;i<this.weaponArr.length;i++)i===t-1&&this.weaponArr[i]?this.weaponArr[i].active=!0:this.weaponArr[i]&&(this.weaponArr[i].active=!1)},r.playAni=function(t,i,e){void 0===i&&(i=1),void 0===e&&(e=!1),e&&(this.curAniName=""),this.curAniName!==t&&(this.rwAni&&this.rwAni.play(t),this.rwAni&&this.rwAni.getState(t)&&(this.rwAni.getState(t).speed=i),this.curAniName=t)},r.getAniPro=function(t){return this.rwAni.getState(t).isPlaying?this.rwAni.getState(t).ratio:-1},r.onDisabled=function(){},r.onKeyDown=function(t){switch(t.keyCode){case g.KEY_O:this.curHp+=5;break;case g.KEY_P:this.curHp-=5;break;case g.KEY_A:}},n(o,[{key:"curHp",get:function(){return this._curHp},set:function(t){this._curHp=t,f.emit(w.UPDATE_PLAYER_BLOOD,this._curHp)}},{key:"minR",get:function(){return.5*this.node.scale.x}},{key:"curState",get:function(){return this._curState},set:function(t){switch(this._curState=t,t){case S.DAIJI:this.isMove?this.playAni(N.RUN):this.playAni(N.IDLE)}}}]),o}(b))||I);o._RF.pop()}}}));

System.register("chunks:///_virtual/MapLoader.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./LevelToolPlayer.ts","./MapPrefabEnum.ts","./LevelToolBoss.ts","./LevelToolNumWall.ts"],(function(e){"use strict";var t,o,i,a,r,n,s,l,p,c,u,m,d,h,g,y,f,b,v,N,_,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized,r=e.defineProperty,n=e.createClass},function(e){s=e.cclegacy,l=e._decorator,p=e.CCInteger,c=e.systemEvent,u=e.SystemEvent,m=e.KeyCode,d=e.Vec3,h=e.color,g=e.instantiate,y=e.v3,f=e.director,b=e.Component},function(e){v=e.LevelToolPlayer},function(e){N=e.MapPrefabEnum},function(e){_=e.LevelToolBoss},function(e){w=e.LevelToolNumWall}],execute:function(){var C,D,S,T,L,M,P,k,F,B,O,z,R,V,j,x,E,I,W,A,K;s._RF.push({},"38bbdzZyqVAXo6lB18DB+W7","MapLoader",void 0);var U=l.ccclass,q=l.property,Y="assets/bundles/ball-magic/res/config/";e("MapLoader",(C=U("MapLoader"),D=q({displayName:" "}),S=q({type:p,min:1,step:1,displayName:"导出关卡数"}),T=q({displayName:"保存关卡数据"}),L=q({displayName:" "}),M=q({type:p,min:1,step:1,displayName:"加载关卡数"}),P=q({displayName:"加载关卡数据"}),k=q({displayName:" "}),F=q({displayName:" "}),B=q({displayName:"添加地板"}),O=q({displayName:"添加主角"}),z=q({displayName:"添加boss"}),R=q({displayName:"添加数字墙"}),C((x=t((j=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return t=e.call.apply(e,[this].concat(n))||this,i(a(t),"test1",x,a(t)),i(a(t),"mapNameSave",E,a(t)),r(a(t),"_isFinish1",!1),i(a(t),"test2",I,a(t)),i(a(t),"mapNameLoad",W,a(t)),r(a(t),"_isFinish2",!1),i(a(t),"test3",A,a(t)),i(a(t),"test4",K,a(t)),r(a(t),"_t1",!1),r(a(t),"_t4",!1),r(a(t),"_t5",!1),r(a(t),"_t2",!1),t}o(t,e);var s=t.prototype;return s.onLoad=function(){c.on(u.EventType.KEY_DOWN,this.keyDown,this)},s.keyDown=function(e){switch(e.keyCode){case m.KEY_E:this.saveMap();break;case m.KEY_R:this.readMap()}},s.saveMap=function(){var e=this,t="id,预设,位置旋转缩放,其他\nnumber,string,string,string\nid,name,pos,other\n";t+=this.writeMapInfo(this.node);var o=window.cce.project;o.replace("\\"," / ");var i=o+"/"+Y,a=require("fs"),r=function(){a.writeFile(i+"map"+e.mapNameSave+".csv",t,(function(t){t?(console.warn("失败 关卡解锁: "+e.mapNameSave),console.error("error",t)):console.warn("成功 关卡解锁: "+e.mapNameSave),e._isFinish1=!0}))};a.exists(i,(function(e){e?r():a.mkdir(i,(function(e){e?console.log("创建目录 失败 "+e):(console.log("创建目录 成功 "+i),r())}))}))},s.writeMapInfo=function(e){for(var t="",o=0;o<e.children.length;o++){var i=e.children[o],a=i.name;a=a.split("-")[0];var r=this.getPosRotScal(i,!0),n="";switch(a){case N.map_boss:var s=i.getComponent(_);n=s.bossType+"|"+s.bloodNum;break;case N.map_number_wall:var l=i.getComponent(w);n=l.wallType+"|"+l.wallValueLeft+"|"+l.wallValueRight;break;case N.map_player:var p=i.getComponent(v);n=p.playerCount+"|"+this.colorToString(p.ballColor);break;case N.map_ground:}t+=o+1+',"'+a+'","'+r+'","'+n+'"\n'}return t},s.getPosRotScal=function(e,t,o){return void 0===t&&(t=!0),t?this.vec3ToString(e.getWorldPosition())+"|"+this.vec3ToString(e.eulerAngles)+"|"+this.vec3ToString(e.getWorldScale()):this.vec3ToString(e.getPosition())+"|"+this.vec3ToString(e.eulerAngles)+"|"+this.vec3ToString(e.getScale())},s.readMap=function(){var e=this;this.mapNameSave=this.mapNameLoad,this.node.destroyAllChildren();var t=window.cce.project;t.replace("\\"," / ");var o=t+"/"+Y+"map"+this.mapNameLoad+".csv";require("fs").readFile(o,"utf-8",(function(t,o){if(t)return console.error("失败 关卡-解锁："+e.mapNameLoad+" error:"+t);console.warn("成功 关卡-解锁："+e.mapNameLoad+" error:"+e.mapNameLoad),e.readMapData(o),e._isFinish2=!0}))},s.readMapData=function(e){var t=e.split("\n");t=this.deleteUselessData(t),console.log("场景元素数据dataList-1",t);for(var o=3;t[o];){var i=t[o].split("''")[0];console.log("场景元素数据dataList-2",i),i=i.split('"'),i=this.deleteUselessData2(i),console.log("场景元素数据dataList-3",i);var a=i[1],r=i[2],n=i[3],s=this.instantiateNd(a);switch(s.parent=this.node,this.setNdPosRotScaleByDate(s,r,!0),a){case N.map_boss:var l=s.getComponent(_);l.bossType=Number(n.split("|")[0]),l.bloodNum=Number(n.split("|")[1]),s.getComponent(_).addBoss();break;case N.map_number_wall:var p=s.getComponent(w);p.wallType=n.split("|")[0],p.wallValueLeft=n.split("|")[1],p.wallValueRight=n.split("|")[2],s.getComponent(w).addWall();break;case N.map_player:var c=s.getComponent(v);c.playerCount=Number(n.split("|")[0]),c.ballColor=this.stringToColor(n.split("|")[1]);break;case N.map_ground:if(n){var u=n.split("&");this.setNdPosRotScaleByDate(s.getChildByName("boss_wall"),u[0],!0),this.setNdPosRotScaleByDate(s.getChildByName("boss_wall2"),u[1],!0)}}o++}},s.deleteUselessData=function(e){for(var t=e.length-1;t>-1;t--)0!==e[t].length&&","!==e[t]||e.splice(t,1);return e},s.deleteUselessData2=function(e){for(var t=e.length-1;t>-1;t--)","!==e[t]&&(0!==e[t].length||t!=e.length-1&&0!=t)||e.splice(t,1);return e},s.stringToVec3=function(e){var t=e.split(",");return t.length<=2?new d(Number(t[0]),0,Number(t[1])):new d(Number(t[0]),Number(t[1]),Number(t[2]))},s.vec3ToString=function(e,t,o){return void 0===t&&(t=!1),void 0===o&&(o=3),t?Number(e.x.toFixed(o))+","+Number(e.z.toFixed(o)):Number(e.x.toFixed(o))+","+Number(e.y.toFixed(o))+","+Number(e.z.toFixed(o))},s.colorToString=function(e){return e.r+","+e.g+","+e.b+","+e.a},s.stringToColor=function(e){var t=e.split(",");return h(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3]))},s.setNdPosRotScaleByDate=function(e,t,o){void 0===o&&(o=!0);var i=t.split("|"),a=this.stringToVec3(i[0]),r=this.stringToVec3(i[1]),n=this.stringToVec3(i[2]);o?(e.worldPosition=a,e.eulerAngles=r,e.worldScale=n):(e.position=a,e.eulerAngles=r,e.scale=n)},s.instantiateNd=function(e,t){this.mapItem.getChildByName(e)||(console.warn("错误 在mapItem中找不到 "+e),console.error("error"));var o=g(this.mapItem.getChildByName(e));return o.parent=t||this.node,o},n(t,[{key:"getMapData",get:function(){return this._isFinish1},set:function(e){this._isFinish1!=e&&(this._isFinish1=e,console.log("开始计算"),this.saveMap())}},{key:"setMapData",get:function(){return this._isFinish2},set:function(e){this._isFinish2!=e&&(this._isFinish2=e,console.log("开始计算"),this.readMap())}},{key:"t1",get:function(){return this._t1},set:function(e){this._t1!=e&&(this._t1=e,this.node.getChildByName(N.map_ground)||(this.instantiateNd(N.map_ground).position=y()))}},{key:"t4",get:function(){return this._t4},set:function(e){this._t4!=e&&(this._t4=e,this.node.getChildByName(N.map_player)||(this.instantiateNd(N.map_player).position=y()))}},{key:"t5",get:function(){return this._t5},set:function(e){if(this._t5!=e){this._t5=e;var t=this.instantiateNd(N.map_boss);t.position=y(),t.getComponent(_).addBoss()}}},{key:"t2",get:function(){return this._t2},set:function(e){if(this._t2!=e){this._t2=e;var t=this.instantiateNd(N.map_number_wall);t.position=y(),t.getComponent(w).addWall()}}},{key:"mapItem",get:function(){var e;return null===(e=f.getScene())||void 0===e?void 0:e.getChildByName("mapItem")}}]),t}(b)).prototype,"test1",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"导出关卡——关卡分栏"}}),E=t(j.prototype,"mapNameSave",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),t(j.prototype,"getMapData",[T],Object.getOwnPropertyDescriptor(j.prototype,"getMapData"),j.prototype),I=t(j.prototype,"test2",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"加载关卡——关卡分栏"}}),W=t(j.prototype,"mapNameLoad",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),t(j.prototype,"setMapData",[P],Object.getOwnPropertyDescriptor(j.prototype,"setMapData"),j.prototype),A=t(j.prototype,"test3",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"创建节点——关卡分栏"}}),K=t(j.prototype,"test4",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"----------------------"}}),t(j.prototype,"t1",[B],Object.getOwnPropertyDescriptor(j.prototype,"t1"),j.prototype),t(j.prototype,"t4",[O],Object.getOwnPropertyDescriptor(j.prototype,"t4"),j.prototype),t(j.prototype,"t5",[z],Object.getOwnPropertyDescriptor(j.prototype,"t5"),j.prototype),t(j.prototype,"t2",[R],Object.getOwnPropertyDescriptor(j.prototype,"t2"),j.prototype),V=j))||V));s._RF.pop()}}}));

System.register("chunks:///_virtual/NumberWall.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GamePrefabs.ts","./FlMath.ts","./Behavior3D.ts","./GameEvenEnum.ts","./GameState.ts","./MapPrefabEnum.ts","./NumberTool.ts"],(function(t){"use strict";var e,o,i,n,l,a,s,r,u,h,f,c,g,b;return{setters:[function(t){e=t.defineProperty,o=t.inheritsLoose,i=t.assertThisInitialized},function(t){n=t.cclegacy,l=t._decorator,a=t.BoxCollider},function(t){s=t.GamePrefabs},function(t){r=t.default},function(t){u=t.Behavior3D},function(t){h=t.GameEvenEnum},function(t){f=t.EColliderGroup,c=t.EBuffType},function(t){g=t.MapPrefabEnum},function(t){b=t.NumberTool}],execute:function(){var d,m,p;n._RF.push({},"3e008JbyX5MPa6PPO/CafcW","NumberWall",void 0);var w=l.ccclass;l.property,t("NumberWall",w("NumberWall")((p=m=function(t){function n(){for(var o,n=arguments.length,l=new Array(n),a=0;a<n;a++)l[a]=arguments[a];return o=t.call.apply(t,[this].concat(l))||this,e(i(o),"isInit",!1),e(i(o),"leftRoot",null),e(i(o),"rightRoot",null),e(i(o),"wallInfos",{}),e(i(o),"boxCollider",null),e(i(o),"wallValueLeft",""),e(i(o),"wallValueRight",""),o}o(n,t);var l=n.prototype;return l.onLoad=function(){this.leftRoot=this.node.getChildByName("number_left"),this.rightRoot=this.node.getChildByName("number_right"),this.node.on(h.E_DoorAction,this.onEnterDoor,this),this.boxCollider=this.node.getComponent(a)},l.init=function(t,e,o){this.wallValueLeft=e,this.wallValueRight=o,this.wallInfos.left=this.geStringInfo(e,this.leftRoot),this.wallInfos.right=this.geStringInfo(o,this.rightRoot),this.boxCollider.enabled=!0,this.boxCollider.setGroup(f.number_wall),this.isInit=!0},l.geStringInfo=function(t,e){var o=r.deepClone_SlapKing_(t),i=o.substring(0,1),n=Number(o.slice(1)),l=c.ADD;switch(i){case"+":l=c.ADD;break;case"-":l=c.CUT;break;case"x":case"*":l=c.MULTIPLY;break;case"/":l=c.EXCEPT}var a=e.getComponent(b);return a||(a=e.addComponent(b)),a.setNumber(l,n,s.getInstance().res[g.door_number]),{type:l,value:n,script:a}},l.onEnterDoor=function(t,e){this.boxCollider.enabled=!1;var o=e.x>this.node.worldPosition.x?"right":"left",i=this.wallInfos[o].type,n=this.wallInfos[o].value;switch(i){case c.ADD:case c.CUT:case c.MULTIPLY:case c.EXCEPT:t.emit(h.E_DoorBack,i,n)}},l.update=function(){},l.getNumberWallDate=function(){return[this.wallValueLeft,this.wallValueRight]},l.resetNumberWall=function(t,e){this.wallValueLeft=t,this.wallValueRight=e,this.wallInfos.left=this.geStringInfo(this.wallValueLeft,this.leftRoot),this.wallInfos.right=this.geStringInfo(this.wallValueRight,this.rightRoot)},l.onDisabled=function(){this.node.off(h.E_DoorAction,this.onEnterDoor,this)},n}(u),e(m,"newBallMaterial",null),d=p))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/MapLevelVo.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"3e06cv8yAFAkp4dOOt8Cl6z","MapLevelVo",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Ball_10001.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./BallBase.ts"],(function(t){"use strict";var e,r,n,s;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator},function(t){s=t.BallBase}],execute:function(){var c;r._RF.push({},"42bb83fIQRDeJQzrSzFmuG3","Ball_10001",void 0);var l=n.ccclass;n.property,t("ball_10001",l(c=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r}(s))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/CameraScript.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Vec3Util.ts","./Behavior3D.ts","./FLGloable.ts","./GameEvenEnum.ts","./GameState.ts"],(function(t){"use strict";var i,e,n,o,s,a,r,c,l,h,d,u,p;return{setters:[function(t){i=t.inheritsLoose,e=t.defineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.Vec3,r=t.v3,c=t.Camera},function(t){l=t.Vec3Util},function(t){h=t.Behavior3D},function(t){d=t.FLGloable},function(t){u=t.GameEvenEnum},function(t){p=t.ECameraState}],execute:function(){var f;o._RF.push({},"558219OtYhEY6ILHsW4pQPT","CameraScript",void 0);var g=s.ccclass;s.property,t("CameraScript",g("CameraScript")(f=function(t){function o(){for(var i,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,e(n(i),"curState",1),e(n(i),"initPosition",void 0),e(n(i),"initAngle",void 0),e(n(i),"subCameraAndPlayer",void 0),e(n(i),"initFieldOfView",void 0),e(n(i),"lockTargetNd",void 0),e(n(i),"isInit",!1),i}i(o,t);var s=o.prototype;return s.onLoad=function(){},s.onEnabled=function(){this.registerEvent(u.CAMERA_CHANGE_STATE,this.onStateChange,this)},s.onStateChange=function(t,i){switch(this.curState=t,t){case p.DAIJI:this.isInit=!1;break;case p.FLOOW:this.isInit=!0,this.node.worldPosition=a.add(r(),d.player.worldPosition,this.subCameraAndPlayer);break;case p.UNLOCK:case p.STOP:this.isInit=!1}},s.resetCamera=function(){this.curState==p.DAIJI&&(this.node.worldPosition=a.add(r(),d.player.worldPosition,this.subCameraAndPlayer))},s.init=function(){this.initPosition||(this.lockTargetNd=d.player,this.initPosition=this.node.position.clone(),this.initAngle=this.node.eulerAngles.clone(),this.initFieldOfView=this.node.getComponent(c).fov,this.subCameraAndPlayer=a.subtract(r(),this.node.worldPosition,this.lockTargetNd.position)),this.node.position=this.initPosition,this.node.eulerAngles=this.initAngle,this.node.getComponent(c).fov=this.initFieldOfView,this.curState=p.FLOOW,this.isInit=!0},s.update=function(){if(this.isInit)switch(this.curState){case p.DAIJI:break;case p.FLOOW:if(!this.lockTargetNd||!this.lockTargetNd.parent)return;this.flowTarget(this.lockTargetNd,this.subCameraAndPlayer);break;case p.STOP:}},s.flowTarget=function(t,i,e){void 0===e&&(e=.8),this.node.position=l.lerpVec3(this.node.position,r(t.position.x+i.x,t.position.y+i.y,t.position.z+i.z),e)},s.onDisabled=function(){},o}(h))||f);o._RF.pop()}}}));

System.register("chunks:///_virtual/GameState.ts",["cc"],(function(E){"use strict";var e;return{setters:[function(E){e=E.cclegacy}],execute:function(){var t,o,I,n,T,a,L;E({EBloodType:void 0,EBossState:void 0,EBuffType:void 0,ECameraState:void 0,ECanColliderGroup:void 0,EColliderGroup:void 0,EState:void 0}),e._RF.push({},"55f98YfSWFJn6pd7scjZTN9","GameState",void 0),function(E){E[E.DAIJI=0]="DAIJI",E[E.ATTACK=1]="ATTACK",E[E.DIED=2]="DIED"}(t||(t=E("EState",{}))),function(E){E[E.IDLE=1]="IDLE",E[E.HIT=2]="HIT",E[E.ATTACK=3]="ATTACK",E[E.DIED=4]="DIED"}(o||(o=E("EBossState",{}))),function(E){E[E.DAIJI=0]="DAIJI",E[E.FLOOW=1]="FLOOW",E[E.UNLOCK=2]="UNLOCK",E[E.STOP=3]="STOP"}(I||(I=E("ECameraState",{}))),function(E){E[E.PLAYER=0]="PLAYER",E[E.GREEN=1]="GREEN",E[E.RED=2]="RED"}(n||(n=E("EBloodType",{}))),function(E){E[E.player=1]="player",E[E.plane=2]="plane",E[E.wall=4]="wall",E[E.number_wall=8]="number_wall",E[E.monster=16]="monster"}(T||(T=E("EColliderGroup",{}))),function(E){E[E.PLAYER=16]="PLAYER",E[E.PLAYER_SOLDIER=18]="PLAYER_SOLDIER",E[E.ENEMY_SOLDIER=28]="ENEMY_SOLDIER",E[E.ENEMY_LIMIT=8]="ENEMY_LIMIT",E[E.OUT_LIMIT=16]="OUT_LIMIT"}(a||(a=E("ECanColliderGroup",{}))),function(E){E[E.ADD=1]="ADD",E[E.CUT=2]="CUT",E[E.MULTIPLY=3]="MULTIPLY",E[E.MULTIPLY2=4]="MULTIPLY2",E[E.EXCEPT=5]="EXCEPT"}(L||(L=E("EBuffType",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/EBossSkill.ts",["cc"],(function(L){"use strict";var s;return{setters:[function(L){s=L.cclegacy}],execute:function(){var t;L("EBossSkill",void 0),s._RF.push({},"566f8LnV99DvKEt7oja0n+L","EBossSkill",void 0),function(L){L[L.SKILL_FIRE=1]="SKILL_FIRE",L[L.SKILL_LIGHTNING=2]="SKILL_LIGHTNING",L[L.SKILL_BALL=3]="SKILL_BALL"}(t||(t=L("EBossSkill",{}))),s._RF.pop()}}}));

System.register("chunks:///_virtual/LevelToolNumWall.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,l,a,o,r,i,n,p,s,u,c,y,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,l=e.inheritsLoose,a=e.defineProperty,o=e.assertThisInitialized,r=e.createClass},function(e){i=e.cclegacy,n=e._decorator,p=e.Enum,s=e.CCString,u=e.v3,c=e.instantiate,y=e.director,h=e.Component}],execute:function(){var d,w,m,f,g,_;i._RF.push({},"5ce42dkqQBEIb9GIvtTaz5J","LevelToolNumWall",void 0);var v=n.ccclass,T=n.property;e("LevelToolNumWall",(d=v("LevelToolNumWall"),w=T({type:p({"绿门":1,"红门":2}),displayName:"增加boss"}),m=T({type:s,displayName:"数字左侧"}),f=T({type:s,displayName:"数字右侧"}),d((t((_=function(e){function t(){for(var t,l=arguments.length,r=new Array(l),i=0;i<l;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,a(o(t),"_wallType",1),a(o(t),"_wallValueLeft","+100"),a(o(t),"_wallValueRight","+100"),t}l(t,e);var i=t.prototype;return i.addWall=function(){this.node.destroyAllChildren(),this.instantiateNd(1==this._wallType?"map_door_green":"map_door_red").position=u()},i.instantiateNd=function(e,t){this.mapItem.getChildByName(e)||(console.warn("错误 在mapItem中找不到 "+e),console.error("error"));var l=c(this.mapItem.getChildByName(e));return l.parent=t||this.node,l},r(t,[{key:"wallType",get:function(){return this._wallType},set:function(e){this._wallType!=e&&(this._wallType=e,this.addWall())}},{key:"wallValueLeft",get:function(){return this._wallValueLeft},set:function(e){this._wallValueLeft!=e&&(this._wallValueLeft=e)}},{key:"wallValueRight",get:function(){return this._wallValueRight},set:function(e){this._wallValueRight!=e&&(this._wallValueRight=e)}},{key:"mapItem",get:function(){var e;return null===(e=y.getScene())||void 0===e?void 0:e.getChildByName("mapItem")}}]),t}(h)).prototype,"wallType",[w],Object.getOwnPropertyDescriptor(_.prototype,"wallType"),_.prototype),t(_.prototype,"wallValueLeft",[m],Object.getOwnPropertyDescriptor(_.prototype,"wallValueLeft"),_.prototype),t(_.prototype,"wallValueRight",[f],Object.getOwnPropertyDescriptor(_.prototype,"wallValueRight"),_.prototype),g=_))||g));i._RF.pop()}}}));

System.register("chunks:///_virtual/FollowMovement.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,o,n,r,s,a,l,p,u,c,d,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.defineProperty,s=t.createClass},function(t){a=t.cclegacy,l=t._decorator,p=t.Node,u=t.CCFloat,c=t.v3,d=t.Vec3,h=t.Component}],execute:function(){var y,f,b,g,m,w,L,v,z,N,R,C,P,F,S,k,x;a._RF.push({},"62c6bYOT19FwoeFRC6pb+RK","FollowMovement",void 0);var M=l.ccclass,_=l.property;t("FollowMovement",(y=M("FollowMovement"),f=_({type:p,displayName:"跟随目标节点"}),b=_({type:u,displayName:"目标移动多远记录一次距离"}),g=_({type:u,displayName:"记录还剩多少时停止移动"}),m=_({type:u,displayName:"走速度"}),w=_({type:u,displayName:"跑速度"}),L=_({type:u,displayName:"速度变化的缓动率"}),v=_({type:u,displayName:"距离目标多远后开始跑（单位是List的Item数）"}),y((R=e((N=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,o(n(e),"targetNd",R,n(e)),o(n(e),"recordGap",C,n(e)),o(n(e),"stopCount",P,n(e)),o(n(e),"walkSpeed",F,n(e)),o(n(e),"runSpeed",S,n(e)),o(n(e),"speedLerpRant",k,n(e)),o(n(e),"startRunCount",x,n(e)),r(n(e),"posList",[]),r(n(e),"velocity",c()),e}i(e,t);var a=e.prototype;return a.onLoad=function(){},a.update=function(){if(this.targetNd){for(;this.posList.length>0&&d.distance(c(this.node.worldPosition.x,0,this.node.worldPosition.z),c(this.posList[0].x,0,this.posList[0].z))<this.recordGap;)this.posList.shift();this.posList.length>0?(d.distance(this.targetNd.worldPosition,this.posList[this.posList.length-1])>this.recordGap&&this.posList.push(this.targetNd.worldPosition.clone()),this.posList.length>this.stopCount?this.velocity=c(this.posList[0].x-this.node.worldPosition.x,0,this.posList[0].z-this.node.worldPosition.z).normalize().multiplyScalar(this.walkSpeed):this.velocity=d.lerp(c(),this.velocity,d.ZERO,this.speedLerpRant),this.node.translate(this.velocity,1)):this.posList.push(this.targetNd.worldPosition.clone())}},a.onDisable=function(){this.posList=[]},s(e,[{key:"isRunning",get:function(){return this.posList.length>this.startRunCount}}]),e}(h)).prototype,"targetNd",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(N.prototype,"recordGap",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),P=e(N.prototype,"stopCount",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),F=e(N.prototype,"walkSpeed",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),S=e(N.prototype,"runSpeed",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),k=e(N.prototype,"speedLerpRant",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),x=e(N.prototype,"startRunCount",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),z=N))||z));a._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterTool.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,r,i,n,a,s,l,p,c,d,h,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.defineProperty,i=e.assertThisInitialized,n=e.initializerDefineProperty,a=e.createClass},function(e){s=e.cclegacy,l=e._decorator,p=e.Vec3,c=e.v3,d=e.SkeletalAnimation,h=e.Node,y=e.Component}],execute:function(){var u,f,g,m,N,P,b,w,S,v,C,O,A,D,R,k,z;s._RF.push({},"64416bYTsRFKrQQtnfuHrwm","MonsterTool",void 0);var H=l.ccclass,I=l.property;e("MonsterTool",(u=H("MonsterTool"),f=I({type:p,displayName:"排布属性"}),g=I({displayName:"当前节点下宠物节点排布"}),m=I({tooltip:"播放动作名称,不填则播放默认动作"}),N=I({displayName:"当前节点下宠物动作"}),P=I({displayName:"创建宠物节点1-20"}),b=I({displayName:"更改子节点名字为rw"}),w=I({displayName:"增加血量节点"}),S=I({displayName:"宠物阶数"}),v=I({displayName:"宠物缩放倍数"}),C=I({displayName:"调整宠物大小"}),u((D=t((A=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,r(i(t),"isSort",!0),r(i(t),"isPlayAni",!0),r(i(t),"isCreatPet",!0),r(i(t),"isChangeName",!0),r(i(t),"isAddHpRoot",!0),r(i(t),"isPetScale",!0),n(i(t),"sortInfo",D,i(t)),n(i(t),"aniName",R,i(t)),n(i(t),"petOrder",k,i(t)),n(i(t),"petScale",z,i(t)),t}o(t,e);var s=t.prototype;return s.updateNodeSort=function(){for(var e=0;e<this.node.children.length;e++){this.node.children[e].position=c(e%this.sortInfo.z*this.sortInfo.x,0,Math.floor(e/this.sortInfo.z)*this.sortInfo.y)}},s.playNdAni=function(){for(var e=0;e<this.node.children.length;e++){var t=this.node.children[e].getComponentsInChildren(d);if(t&&t[0]){var o=this.aniName;""==o&&(o=t[0].defaultClip.name),console.log("播放成功",o),t[0].play(o)}}},s.start=function(){},a(t,[{key:"nodeSort",get:function(){return!this.isSort},set:function(e){this.isSort=!1,this.updateNodeSort()}},{key:"playAni",get:function(){return!this.isPlayAni},set:function(e){this.isPlayAni=!1,this.playNdAni(),console.log("当前节点下宠物动作")}},{key:"creatPet",get:function(){return!this.isCreatPet},set:function(e){this.isCreatPet=!1;for(var t=1;t<=20;t++)for(var o=1;o<=3;o++){var r=100*(1e3+t)+o;this.node.addChild(new h(r.toString()))}console.log("创建宠物节点1-20")}},{key:"changeName",get:function(){return!this.isChangeName},set:function(e){this.isChangeName=!1;for(var t=0;t<this.node.children.length;t++)this.node.children[t].children[0].name="rw",this.node.children[t].children[0].position=c();console.log("更改子节点名字为rw")}},{key:"addHpRoot",get:function(){return!this.isAddHpRoot},set:function(e){this.isAddHpRoot=!1;for(var t=0;t<this.node.children.length;t++)this.node.children[t].getChildByName("blood")||this.node.children[t].addChild(new h("blood"));console.log("增加血量节点")}},{key:"changePetScale",get:function(){return!this.isPetScale},set:function(e){this.isPetScale=!1;for(var t=0;t<this.node.children.length;t++)if(this.node.children[t].getChildByName("rw")&&Number(this.node.children[t].name.split("_")[1])%10==this.petOrder){var o=this.node.children[t].getChildByName("rw").scale.x*this.petScale;o=Math.floor(100*o)/100,this.node.children[t].getChildByName("rw").scale=c(o,o,o)}console.log("调整宠物大小")}}]),t}(y)).prototype,"sortInfo",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c(5,3,3)}}),t(A.prototype,"nodeSort",[g],Object.getOwnPropertyDescriptor(A.prototype,"nodeSort"),A.prototype),R=t(A.prototype,"aniName",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(A.prototype,"playAni",[N],Object.getOwnPropertyDescriptor(A.prototype,"playAni"),A.prototype),t(A.prototype,"creatPet",[P],Object.getOwnPropertyDescriptor(A.prototype,"creatPet"),A.prototype),t(A.prototype,"changeName",[b],Object.getOwnPropertyDescriptor(A.prototype,"changeName"),A.prototype),t(A.prototype,"addHpRoot",[w],Object.getOwnPropertyDescriptor(A.prototype,"addHpRoot"),A.prototype),k=t(A.prototype,"petOrder",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=t(A.prototype,"petScale",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),t(A.prototype,"changePetScale",[C],Object.getOwnPropertyDescriptor(A.prototype,"changePetScale"),A.prototype),O=A))||O));s._RF.pop()}}}));

System.register("chunks:///_virtual/EAniDefine.ts",["cc"],(function(e){"use strict";var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){var c;e("EAniDefine",void 0),i._RF.push({},"6be20XV8jxBOKmoEMGx3oja","EAniDefine",void 0),function(e){e.IDLE="idle",e.RUN="run",e.HIT="hit",e.ATTACK1="attackcycle4",e.ATTACK2="attackcycle5",e.DIED="died",e.SUCC="success",e.BOSS_IDLE="idle",e.BOSS_RUN="run",e.BOSS_DIED="died",e.BOSS_ATTACK="attack"}(c||(c=e("EAniDefine",{}))),i._RF.pop()}}}));

System.register("chunks:///_virtual/FreeFlightCamera.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./FLGloable.ts"],(function(e){"use strict";var t,o,i,n,r,a,s,c,h,l,p,u,y,d,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,r=e.defineProperty},function(e){a=e.cclegacy,s=e._decorator,c=e.math,h=e.KeyCode,l=e.CCFloat,p=e.systemEvent,u=e.SystemEvent,y=e.game,d=e.Component},function(e){v=e.FLGloable}],execute:function(){var f,_,S,m,E,T,C,g,w,z,F,b;a._RF.push({},"6c841mU+4JNvqwHy5tJsJh0","FreeFlightCamera",void 0);var k=s.ccclass,A=s.property,x=s.menu,L=c.Vec2,U=c.Vec3,D=c.Quat,K=new L,M=new L,O=new U,H=new D,P="W".charCodeAt(0),W="S".charCodeAt(0),N="A".charCodeAt(0),R="D".charCodeAt(0),Y="Q".charCodeAt(0),q="E".charCodeAt(0),Q=h.SHIFT_LEFT;e("FreeFlightCamera",(f=k("FreeFlightCamera"),_=x("game/camera/FreeFlightCamera"),S=A({type:l,tooltip:"移动速度"}),m=A({type:l,tooltip:"按Shift键后的速度"}),E=A({type:l,slide:!0,range:[.05,.5,.01],tooltip:"移动后惯性效果"}),T=A({type:l,tooltip:"旋转速度"}),f(C=_((w=t((g=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,i(n(t),"moveSpeed",w,n(t)),i(n(t),"moveSpeedShiftScale",z,n(t)),i(n(t),"damp",F,n(t)),i(n(t),"rotateSpeed",b,n(t)),r(n(t),"_euler",new U),r(n(t),"_velocity",new U),r(n(t),"_position",new U),r(n(t),"_speedScale",1),t}o(t,e);var a=t.prototype;return a.onLoad=function(){p.on(u.EventType.MOUSE_WHEEL,this.onMouseWheel,this),p.on(u.EventType.KEY_DOWN,this.onKeyDown,this),p.on(u.EventType.KEY_UP,this.onKeyUp,this),p.on(u.EventType.TOUCH_START,this.onTouchStart,this),p.on(u.EventType.TOUCH_MOVE,this.onTouchMove,this),p.on(u.EventType.TOUCH_END,this.onTouchEnd,this),U.copy(this._euler,this.node.eulerAngles),U.copy(this._position,this.node.position)},a.onDestroy=function(){p.off(u.EventType.MOUSE_WHEEL,this.onMouseWheel,this),p.off(u.EventType.KEY_DOWN,this.onKeyDown,this),p.off(u.EventType.KEY_UP,this.onKeyUp,this),p.off(u.EventType.TOUCH_START,this.onTouchStart,this),p.off(u.EventType.TOUCH_MOVE,this.onTouchMove,this),p.off(u.EventType.TOUCH_END,this.onTouchEnd,this)},a.update=function(e){v.cameraKeyCodeMove&&(U.transformQuat(O,this._velocity,c.quat(-45.587,0,0,0)),U.scaleAndAdd(this._position,this._position,O,this.moveSpeed*this._speedScale),U.lerp(O,this.node.position,this._position,1),this.node.setPosition(O),D.fromEuler(H,this._euler.x,this._euler.y,this._euler.z),D.slerp(H,this.node.rotation,H,1),this.node.setRotation(H))},a.onMouseWheel=function(e){var t=-e.getScrollY()*this.moveSpeed*.1;U.transformQuat(O,U.UNIT_Z,this.node.rotation),U.scaleAndAdd(this._position,this.node.position,O,t)},a.onKeyDown=function(e){var t=this._velocity;e.keyCode===Q?this._speedScale=this.moveSpeedShiftScale:e.keyCode===P?0===t.z&&(t.z=v.cameraSpeed):e.keyCode===W?0===t.z&&(t.z=-v.cameraSpeed):e.keyCode===h.SPACE&&(v.player.active?v.player.active=!1:v.player.active=!0)},a.onKeyUp=function(e){var t=this._velocity;e.keyCode===Q?this._speedScale=1:e.keyCode===P?t.z>0&&(t.z=0):e.keyCode===W?t.z<0&&(t.z=0):e.keyCode===N?t.x<0&&(t.x=0):e.keyCode===R?t.x>0&&(t.x=0):e.keyCode===Y?t.y<0&&(t.y=0):e.keyCode===q&&t.y>0&&(t.y=0)},a.onTouchStart=function(e){y.canvas.requestPointerLock&&y.canvas.requestPointerLock()},a.onTouchMove=function(e){e.getStartLocation(K),K.x>.4*y.canvas.width?(e.getDelta(M),this._euler.y-=M.x*this.rotateSpeed*.1,this._euler.x+=M.y*this.rotateSpeed*.1):(e.getLocation(M),L.subtract(M,M,K),this._velocity.x=.01*M.x,this._velocity.z=.01*-M.y)},a.onTouchEnd=function(e){document.exitPointerLock&&document.exitPointerLock(),e.getStartLocation(K),K.x<.4*y.canvas.width&&(this._velocity.x=0,this._velocity.z=0)},t}(d)).prototype,"moveSpeed",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=t(g.prototype,"moveSpeedShiftScale",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),F=t(g.prototype,"damp",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),b=t(g.prototype,"rotateSpeed",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),C=g))||C)||C));a._RF.pop()}}}));

System.register("chunks:///_virtual/GamePanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIManager.ts","./GamePageEnum.ts","./Behavior3D.ts"],(function(n){"use strict";var e,t,a,o,i,u;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,a=n._decorator},function(n){o=n.uiManager},function(n){i=n.GamePageEnum},function(n){u=n.Behavior3D}],execute:function(){var c;t._RF.push({},"6d84aKLi/BEKq6HRgciUmZZ","GamePanel",void 0);var s=a.ccclass;a.property,n("GamePanel",s("GamePanel")(c=function(n){function t(){return n.apply(this,arguments)||this}e(t,n);var a=t.prototype;return a.show=function(){},a.onEnabled=function(){},a.update=function(n){},a.showDebugPanel=function(){o.instance.showDialog(i.PAGE_DEBUG)},a.onDisabled=function(){this.unscheduleAllCallbacks()},t}(u))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/NumberTool.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameState.ts"],(function(e){"use strict";var t,r,i,n,o,s,a,l,u,p,f,h,c,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.defineProperty},function(e){s=e.cclegacy,a=e._decorator,l=e.Prefab,u=e.Enum,p=e.v4,f=e.instantiate,h=e.MeshRenderer,c=e.Component},function(e){m=e.EBuffType}],execute:function(){var b,y,g,P,v,N,d,T;s._RF.push({},"70a443B9aNPIp+p/uhlebsf","NumberTool",void 0);var w=a.ccclass,M=a.property;e("NumberTool",(b=M({displayName:"设置数字"}),y=M({type:l,displayName:"数字面片预制体"}),g=M({type:u(m),displayName:"数字运算类型"}),w((N=t((v=function(e){function t(){for(var t,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,i(n(t),"showNumber",N,n(t)),i(n(t),"numPerfab",d,n(t)),i(n(t),"styleType",T,n(t)),o(n(t),"seperate",.9),o(n(t),"numTilingOffset",[p(1,1,0,0),p(1,1,0,.25),p(1,1,0,.5),p(1,1,0,.75),p(1,1,.25,0),p(1,1,.25,.25),p(1,1,.25,.5),p(1,1,.25,.75),p(1,1,.5,0),p(1,1,.5,.25),p(1,1,.5,.5),p(1,1,.5,.75),p(1,1,.75,0),p(1,1,.75,.25)]),t}r(t,e);var s=t.prototype;return s.start=function(){},s.setNumber=function(e,t,r){this.node.destroyAllChildren(),this.showNumber=t,this.numPerfab=r;for(var i=0,n=[];this.showNumber>0&&Math.floor(this.showNumber/10)>=0;){var o=this.showNumber%10;this.showNumber=Math.floor(this.showNumber/10);var s=f(this.numPerfab);s.parent=this.node,n.push(s),s.getComponent(h).material.setProperty("tilingOffset",this.numTilingOffset[o]),i++}var a=10;switch(e){case m.ADD:a=11;break;case m.CUT:a=12;break;case m.MULTIPLY:case m.MULTIPLY2:a=10;break;case m.EXCEPT:a=13}var l=f(this.numPerfab);l.parent=this.node,l.getComponent(h).material.setProperty("tilingOffset",this.numTilingOffset[a]),i++,console.log("加上运算符，总位数为:",i);for(var u=Math.floor(i%2)?0:this.seperate/2,p=0;p<n.length;p++){var c=(Math.floor(i/2)-p)*this.seperate-u,b=n[p].getPosition();b.x=c,n[p].setPosition(b)}var y=n[n.length-1].getPosition();y.x=y.x-this.seperate,l.setPosition(y)},t}(c)).prototype,"showNumber",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),d=t(v.prototype,"numPerfab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(v.prototype,"styleType",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.ADD}}),P=v))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/FLGloable.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./FLStore.ts","./EBossSkill.ts"],(function(l){"use strict";var e,n,o,t,u,r;return{setters:[function(l){e=l.createClass,n=l.defineProperty},function(l){o=l.cclegacy,t=l.color},function(l){u=l.FLStore},function(l){r=l.EBossSkill}],execute:function(){o._RF.push({},"92e4cRBjqlJ76piC+JF5hQQ","FLGloable",void 0);var a=l("FLGloable",function(){function l(){}return e(l,null,[{key:"level",get:function(){return null===l._level&&(l._level=u.get("_newLevel",1)),l._level},set:function(e){e>100||(e=Math.round(e),l._level=e,u.set("_newLevel",e))}}]),l}());n(a,"curGameState",null),n(a,"isWin",!1),n(a,"scene3D",null),n(a,"cameraKeyCodeMove",!1),n(a,"camera3D",null),n(a,"cameraCom",null),n(a,"cameraSpeed",2e-4),n(a,"effectRoot",null),n(a,"curMonsters",[]),n(a,"monstersWave",{}),n(a,"curStageNumDoor",[]),n(a,"curMonsterInfos",[]),n(a,"curMonsterInfos_1",[]),n(a,"curMonsterInfos_2",[]),n(a,"grayMaterial",null),n(a,"curGround",null),n(a,"mapRoot",null),n(a,"groundRoot",null),n(a,"ballRoot",null),n(a,"lineRoot",null),n(a,"autoDestroyRoot",null),n(a,"uiParent",null),n(a,"bloodPrefab",[]),n(a,"player",null),n(a,"playerScript",null),n(a,"ballCount",20),n(a,"showBallCount",10),n(a,"ballInterval",.15),n(a,"initBallColor",t(12,34,197.255)),n(a,"initPlayerHp",1),n(a,"boss",null),n(a,"curBossSkill",r.SKILL_FIRE),n(a,"ballPrefab",null),n(a,"closeEffect",!0),n(a,"playerIsInit",!1),n(a,"radians",null),n(a,"angle",null),n(a,"speedGrade",1),n(a,"gameIsStop",!1),n(a,"hasAddFLnative",!1),n(a,"maxLevel",10),n(a,"_level",null),o._RF.pop()}}}));

System.register("chunks:///_virtual/LevelToolBoss.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,s,r,i,n,a,p,l,c,u,y,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,s=e.defineProperty,r=e.assertThisInitialized,i=e.initializerDefineProperty,n=e.createClass},function(e){a=e.cclegacy,p=e._decorator,l=e.Enum,c=e.CCInteger,u=e.v3,y=e.instantiate,d=e.director,h=e.Component}],execute:function(){var m,b,v,f,g,T;a._RF.push({},"95d4e59uMBN3KjIOCg8OQgv","LevelToolBoss",void 0);var B=p.ccclass,_=p.property;e("LevelToolBoss",(m=B("LevelToolBoss"),b=_({type:l({"黑法师":1001,"木乃伊":1002,"瘦子":1003,"胖子":1004,"蜘蛛":1005,"麒麟":1006,"章鱼":1007,"野猪":1008,"草":1009}),displayName:"增加boss"}),v=_({type:c,displayName:"血量"}),m((t((g=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,s(r(t),"_bossType",1001),i(r(t),"bloodNum",T,r(t)),t}o(t,e);var a=t.prototype;return a.addBoss=function(){this.node.destroyAllChildren(),this.instantiateNd("boss_"+this._bossType).position=u()},a.instantiateNd=function(e,t){this.mapItem.getChildByName(e)||(console.warn("错误 在mapItem中找不到 "+e),console.error("error"));var o=y(this.mapItem.getChildByName(e));return o.parent=t||this.node,o},n(t,[{key:"bossType",get:function(){return this._bossType},set:function(e){this._bossType!=e&&(this._bossType=e,this.addBoss())}},{key:"mapItem",get:function(){var e;return null===(e=d.getScene())||void 0===e?void 0:e.getChildByName("mapItem")}}]),t}(h)).prototype,"bossType",[b],Object.getOwnPropertyDescriptor(g.prototype,"bossType"),g.prototype),T=t(g.prototype,"bloodNum",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),f=g))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/LevelBlockVo.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,c;return{setters:[function(e){t=e.defineProperty},function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"96f596kGy5CyKwOXWP6bB+P","LevelBlockVo",void 0);e("default",(function(){t(this,"level",1),t(this,"isLinkUpScene",0),t(this,"unlocks",{})}));c._RF.pop()}}}));

System.register("chunks:///_virtual/EEffectName.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var i;t("EEffectName",void 0),e._RF.push({},"a7f76UAoNJOEb/3fVQ8Z4MS","EEffectName",void 0),function(t){t.FIRE="fire",t.BOOM="boom",t.FIRE_HIT="fire-hit",t.LIGHTNING="lightning",t.LIGHTNING_HIT="lightning-hit",t.FLY_BALL="fly-ball",t.FLY_BALL_HIT="fly-ball-hit",t.BULLET="bullet",t.JIANSHE="jianshe"}(i||(i=t("EEffectName",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/Bullet.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Vec3Util.ts","./PoolManager.ts","./Behavior3D.ts","./FLGloable.ts","./GameEvenEnum.ts","./GameState.ts"],(function(t){"use strict";var s,e,i,n,o,a,r,c,l,u,h,d,y,f,v,P;return{setters:[function(t){s=t.inheritsLoose,e=t.defineProperty,i=t.assertThisInitialized,n=t.createClass},function(t){o=t.cclegacy,a=t._decorator,r=t.geometry,c=t.v3,l=t.Vec3,u=t.PhysicsSystem},function(t){h=t.Vec3Util},function(t){d=t.PoolManager},function(t){y=t.Behavior3D},function(t){f=t.FLGloable},function(t){v=t.GameEvenEnum},function(t){P=t.EColliderGroup}],execute:function(){var m;o._RF.push({},"b7bcdWDdXlEHII/X7wik7ZO","Bullet",void 0);var p=a.ccclass;a.property,t("Bullet",p("Bullet")(m=function(t){function o(){for(var s,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return s=t.call.apply(t,[this].concat(o))||this,e(i(s),"isInit",!1),e(i(s),"moveDir",null),e(i(s),"startPos",null),e(i(s),"maxDis",50),e(i(s),"lastPos",null),e(i(s),"curPos",null),e(i(s),"moveSpeed",.5),e(i(s),"ray",new r.Ray),s}s(o,t);var a=o.prototype;return a.onLoad=function(){},a.onEnabled=function(){},a.init=function(t){this.moveDir=t,this.node.rotation=h.lockPos(c(),this.moveDir,!1),this.startPos=this.node.worldPosition.clone(),this.curPos=this.node.worldPosition.clone(),this.isInit=!0},a.update=function(){this.isInit&&f.curGameState==v.GAME_STARTED&&(l.distance(this.node.worldPosition,this.startPos)>this.maxDis?this.recovery():(this.node.translate(this.moveDir.clone().multiplyScalar(this.moveSpeed),1),this.updateRay()))},a.updateRay=function(){if(this.lastPos=this.curPos.clone(),this.curPos=this.node.worldPosition.clone(),this.ray.o=this.lastPos,this.ray.d=this.moveDir,u.instance.raycast(this.ray,this.rayMask,l.distance(this.lastPos,this.curPos)),u.instance.raycastResults&&u.instance.raycastResults.length>0){for(var t=1e10,s=null,e=0;e<u.instance.raycastResults.length;e++){var i=u.instance.raycastResults[e].distance;i<=t&&(t=i,s=u.instance.raycastResults[e])}if(s&&s.collider)s.collider.node.emit(v.E_MonsterHit),this.recovery()}},a.recovery=function(){this.isInit=!1,d.getInstance().putNode(this.node)},a.onDisabled=function(){},n(o,[{key:"rayMask",get:function(){return P.monster}}]),o}(y))||m);o._RF.pop()}}}));

System.register("chunks:///_virtual/MapManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./LocalConfig.ts","./Vec3Util.ts","./PoolManager.ts","./UIManager.ts","./GamePageEnum.ts","./Behavior3D.ts","./FLGloable.ts","./GameEvenEnum.ts","./GameState.ts","./MonsterBase.ts","./MapPrefabEnum.ts","./MainPlayer.ts","./NumberWall.ts","./CameraScript.ts"],(function(e){"use strict";var t,o,n,r,a,i,s,l,c,u,g,p,d,m,f,h,v,y,C,M,N,D,P,b,R,B,E,S,_,G,w;return{setters:[function(e){t=e.defineProperty,o=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,s=e._decorator,l=e.Material,c=e.sys,u=e.SystemEvent,g=e.KeyCode,p=e.Camera,d=e.find,m=e.Node,f=e.MeshRenderer,h=e.v4,v=e.BoxCollider},function(e){y=e.LocalConfig},function(e){C=e.Vec3Util},function(e){M=e.PoolManager},function(e){N=e.uiManager},function(e){D=e.GamePageEnum},function(e){P=e.Behavior3D},function(e){b=e.FLGloable},function(e){R=e.GameEvenEnum},function(e){B=e.EColliderGroup},function(e){E=e.MonsterBase},function(e){S=e.MapPrefabEnum},function(e){_=e.MainPlayer},function(e){G=e.NumberWall},function(e){w=e.CameraScript}],execute:function(){var I,A,L,z,F,O,W;i._RF.push({},"c1219BAvEZKqbpsijwHeUDD","MapManager",void 0);var x=s.ccclass,K=s.property;e("MapManager",(I=x("MapManager"),A=K({type:l,displayName:"死亡灰材质"}),I((W=O=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return t=e.call.apply(e,[this].concat(n))||this,r(a(t),"grayMaterial",F,a(t)),t}n(t,e);var o=t.prototype;return o.onLoad=function(){if(t.instance=this,this.initEvent(),this.initStart(),console.log("当前设备环境浏览器",c.isBrowser),c.isBrowser){var e=window.location.search.substring(1);if(e){for(var o={},n=e.split("&"),r=0;r<n.length;r++)if(!(n[r].indexOf("=")<=-1)){var a=n[r].split("=");o[a[0]]=a[1]}o.debug&&"true"==o.debug&&N.instance.showDialog(D.PAGE_DEBUG)}}b.curGameState=R.GAME_READY,N.instance.showDialog(D.PAGE_GAME)},o.initEvent=function(){this.registerEvent(R.CHANGE_BOSS,this.onChangeBoss,this),this.registerEvent(R.CHANGE_FLOOR,this.onChangeFloor,this),this.registerEvent(u.EventType.KEY_DOWN,(function(e){switch(e.keyCode){case g.KEY_W:case g.DIGIT_1:}}),this)},o.initStart=function(){b.scene3D=this.node.parent,b.camera3D=b.scene3D.getChildByName("Main Camera"),b.cameraCom=b.camera3D.getComponent(p),b.player=b.scene3D.getChildByName("player"),b.effectRoot=d("effectManager"),b.mapRoot=new m("mapRoot"),b.mapRoot.parent=this.node,b.groundRoot=new m("groundRoot"),b.groundRoot.parent=this.node,b.ballRoot=new m("ballRoot"),b.ballRoot.parent=this.node,b.lineRoot=new m("lineRoot"),b.lineRoot.parent=this.node,b.grayMaterial=this.grayMaterial,b.uiParent=d("Canvas").getChildByName("normal"),this.initLevel()},o.initLevel=function(){this.onClear(),this.initMap()},o.onClear=function(){console.log("clear scene !!!"),b.isWin=!1,b.gameIsStop=!1,b.cameraKeyCodeMove=!1,b.curMonsters=[],b.curStageNumDoor=[],b.ballRoot.destroyAllChildren(),b.groundRoot.destroyAllChildren(),b.mapRoot.destroyAllChildren(),b.lineRoot.destroyAllChildren()},o.initMap=function(){var e=b.level;e>b.maxLevel&&(e=b.maxLevel);var t=[];b.curMonsterInfos=[],b.curMonsterInfos_1=[],b.curMonsterInfos_2=[];var o=y.instance.getTable("map"+e);for(var n in o){var r=o[n],a=r.name,i=r.pos,s=r.other,l=void 0;switch(a){case S.map_number_wall:var c=s.split("|"),u=Number(c[0]);l=M.getInstance().getPrefabNodeByPool(1==u?S.map_door_green:S.map_door_red,b.groundRoot),C.setNdPosRotScaleByDate(l,i,!0);var g=c[1],p=c[2],d=l.getComponent(G);d||(d=l.addComponent(G)),d.init(u,g,p),b.curStageNumDoor.push(l);break;case S.map_boss:var m=Number(s.split("|")[0]),N=Number(s.split("|")[1]);l=M.getInstance().getPrefabNodeByPool("boss_"+m,b.groundRoot),C.setNdPosRotScaleByDate(l,i,!0),l.getComponent(v).setGroup(B.monster);var D=l.getComponent(E);D||(D=l.addComponent(E)),D.init(m,N),t.push(l),1003!=m&&1004!=m?b.curMonsterInfos.push(l):1003==m?b.curMonsterInfos_1.push(l):b.curMonsterInfos_2.push(l);break;case S.map_ground:l=M.getInstance().getPrefabNodeByPool(a,b.groundRoot),C.setNdPosRotScaleByDate(l,i,!0),b.curGround=l,l.getChildByName("ground").getChildByName("floor").getComponent(f).material.setProperty("tilingOffset",h(1,2*l.scale.z,0,0))}}b.curStageNumDoor=C.getV3sortByNode(b.curStageNumDoor,"z",!0);for(var P=0;P<b.curStageNumDoor.length;P++){var R=b.curStageNumDoor[P].worldPosition.z,_=b.curStageNumDoor[P+1]?b.curStageNumDoor[P+1].worldPosition.z:-1e8;b.monstersWave[b.curStageNumDoor[P].uuid]=[];for(var w=0;w<t.length;w++)t[w].worldPosition.z<=R&&t[w].worldPosition.z>_&&b.monstersWave[b.curStageNumDoor[P].uuid].push(t[w])}this.initPlayer()},o.initPlayer=function(){b.player.active=!0;var e=b.camera3D.getComponent(w);e||(e=b.camera3D.addComponent(w)),e.init(),b.playerScript||(b.playerScript=b.player.addComponent(_)),b.playerScript.init()},o.onNextLevel=function(){this.initLevel()},o.onChangeBoss=function(e){},o.onChangeFloor=function(e){var t=b.curGround.getChildByName("ground");t.removeAllChildren(),M.getInstance().getPrefabNodeByPool("floor00"+e,t).getComponent(f).material.setProperty("tilingOffset",h(1,2*b.curGround.scale.z,0,0))},o.removeMapRoot=function(e){for(;e.children.length>0;)M.getInstance().putNode(e.children[0])},t}(P),t(O,"instance",void 0),F=o((z=W).prototype,"grayMaterial",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=z))||L));i._RF.pop()}}}));

System.register("chunks:///_virtual/BallNum.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIEvenEnum.ts","./FLGloable.ts","./GameState.ts"],(function(t){"use strict";var e,i,n,r,l,a,o,c,s,u,p,h,y,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,r=t.assertThisInitialized,l=t.defineProperty},function(t){a=t.cclegacy,o=t._decorator,c=t.Label,s=t.CCInteger,u=t.systemEvent,p=t.Component},function(t){h=t.UIEvenEnum},function(t){y=t.FLGloable},function(t){f=t.EState}],execute:function(){var b,v,g,m,d,E,P;a._RF.push({},"c39afdHAgpCG4bSIhz+kG5o","BallNum",void 0);var A=o.ccclass,L=o.property;t("BallNum",(b=A("BallNum"),v=L({type:c,tooltip:"球数字体"}),g=L({type:s,tooltip:"高度"}),b((E=e((d=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(r(e),"ballText",E,r(e)),n(r(e),"high",P,r(e)),l(r(e),"playerActive",!0),l(r(e),"ballNum",0),e}i(e,t);var a=e.prototype;return a.onLoad=function(){u.on(h.UPDATE_PLAYER_BLOOD,this.onChangePlayerball,this)},a.onChangePlayerball=function(t){this.playerActive=!0,this.ballText.string=""+t,this.ballNum=t},a.update=function(t){if(this.playerActive&&y.playerScript){if(y.playerScript.curState===f.DIED)return this.playerActive=!1,void(this.ballText.string="");if(y.player.active){var e=y.cameraCom.convertToUINode(y.playerScript.hpRoot.worldPosition,this.node.parent);this.node.setPosition(e.x,e.y+this.high)}else this.ballText.string=""}},e}(p)).prototype,"ballText",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(d.prototype,"high",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=d))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/joystick.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIEvenEnum.ts","./Behavior3D.ts","./FLGloable.ts","./GameEvenEnum.ts"],(function(t){"use strict";var e,i,n,o,s,a,r,h,c,l,u,d,v,_,p,E,g,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.defineProperty,a=t.createClass},function(t){r=t.cclegacy,h=t._decorator,c=t.Enum,l=t.view,u=t.Node,d=t.Vec3,v=t.systemEvent,_=t.UITransformComponent},function(t){p=t.UIEvenEnum},function(t){E=t.Behavior3D},function(t){g=t.FLGloable},function(t){f=t.GameEvenEnum}],execute:function(){var T,y,m,S,b,R,C,D,L,O,A,P,M,U,w,F,N;r._RF.push({},"cb632XAFCxCrZeVvBnfx844","joystick",void 0);var G=h.ccclass,H=h.property,z=c({DEFAULT:0,FOLLOW:1,FOLLOW_ALWAYS:2,FOLLOW_DOT:3}),I=c({FOUR:4,EIGHT:8,ALL:0}),k=l.getVisibleSize().height;t("Joystick",(T=G("Joystick"),y=H({type:u,displayName:"摇杆背景节点"}),m=H({type:u,displayName:"摇杆节点"}),S=H({type:z,displayName:"触摸类型"}),b=H({type:I,displayName:"方向类型"}),R=H({displayName:"启动半透明"}),C=H({displayName:"点击跟随"}),D=H({displayName:"内圈大小"}),T((A=e((O=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(o(e),"ndRing",A,o(e)),n(o(e),"ndDot",P,o(e)),n(o(e),"touchType",M,o(e)),n(o(e),"directionType",U,o(e)),n(o(e),"isEnableTransparent",w,o(e)),n(o(e),"isFollowStart",F,o(e)),n(o(e),"innerSize",N,o(e)),s(o(e),"onClickCb",null),s(o(e),"onEndCb",null),s(o(e),"clearFECb",null),s(o(e),"onBeginFECb",null),s(o(e),"onSuccessFECb",null),s(o(e),"isMoving",!1),s(o(e),"_angle",0),s(o(e),"_stickPos",new d),s(o(e),"_oriRingPos",null),s(o(e),"_touchStartLocation",new d),s(o(e),"_touchMoveLocation",new d),s(o(e),"_distanceRate",0),s(o(e),"_oriDotPos",new d),s(o(e),"_movePos",new d),e}i(e,t);var r=e.prototype;return r.eventShow=function(){this.isMoving=!1,this.ndDot.setPosition(this._oriDotPos),this.ndRing.active=!1,g.radians=g.angle=null,this.node.off(u.EventType.TOUCH_START,this._touchStartEvent,this),this.node.off(u.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.off(u.EventType.TOUCH_END,this._touchEndEvent,this),this.node.off(u.EventType.TOUCH_CANCEL,this._touchEndEvent,this),this.onEnabled()},r.onEnabled=function(){this.node.on(u.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(u.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(u.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(u.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},r.onDisabled=function(){this.node.off(u.EventType.TOUCH_START,this._touchStartEvent,this),this.node.off(u.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.off(u.EventType.TOUCH_END,this._touchEndEvent,this),this.node.off(u.EventType.TOUCH_CANCEL,this._touchEndEvent,this),this.isMoving=!1,this.ndDot.setPosition(this._oriDotPos),this._oriRingPos&&this.ndRing.setPosition(this._oriRingPos)},r._touchStartEvent=function(t){var e;if(!g.gameIsStop){g.curGameState==f.GAME_READY&&(g.curGameState=f.GAME_STARTED,v.emit(f.GAME_STARTED)),v.emit(p.UI_TOUCH_START);var i=t.getUILocation();this._touchStartLocation.set(i.x,i.y,0);var n=null===(e=this.node.getComponent(_))||void 0===e?void 0:e.convertToNodeSpaceAR(this._touchStartLocation);if(this._oriRingPos||(this._oriRingPos=this.ndRing.getPosition().clone()),this._stickPos.set(n),!this.isFollowStart){var o,s;this.ndRing.active=!0;var a=(n=null===(o=this.ndRing.getComponent(_))||void 0===o?void 0:o.convertToNodeSpaceAR(this._touchStartLocation)).length();return(null===(s=this.ndRing.getComponent(_))||void 0===s?void 0:s.contentSize.width)/2>a&&(this.ndDot.setPosition(n),this._updateAngle(n),!0)}this.touchType===z.FOLLOW&&(n.y=n.y>=-k/6?-k/6:n.y),this.ndRing.active=!0,this.ndRing.setPosition(n)}},r._touchMoveEvent=function(t){var e,i;if(!g.gameIsStop&&g.curGameState==f.GAME_STARTED){var n=t.getUILocation();this._touchMoveLocation.set(n.x,n.y,0);var o=null===(e=this.ndRing.getComponent(_))||void 0===e?void 0:e.convertToNodeSpaceAR(this._touchMoveLocation),s=o.length();s>this.innerSize&&(this.isMoving=!0);var a=(null===(i=this.ndRing.getComponent(_))||void 0===i?void 0:i.contentSize.width)/2;if(g.speedGrade=0,a>s)g.speedGrade=Number((s/a).toFixed(3)),this.ndDot.setPosition(o);else if(this.touchType!==z.FOLLOW_DOT){g.speedGrade=1;var r=Math.atan2(o.y,o.x),h=Math.cos(r)*a,c=Math.sin(r)*a;this._movePos.set(h,c,0),this.ndDot.setPosition(this._movePos)}else this.ndDot.setPosition(o);this._updateAngle(o),this._distanceRate=g.speedGrade}},r._touchEndEvent=function(t){g.gameIsStop||g.curGameState==f.GAME_STARTED&&(v.emit(p.UI_TOUCH_END),this.isMoving=!1,this.ndDot.setPosition(this._oriDotPos),this.ndRing.active=!1,g.radians=g.angle=null)},r._updateAngle=function(t){var e=this._angle;if(this._angle=180*Math.atan2(t.y,t.x)/Math.PI,!(Math.abs(e-this.angle)<.1))return g.angle=this._angle,g.radians=Math.PI/180*g.angle,v.emit(p.UI_TOUCH_MOVE),this._angle},r.reset=function(){this.isMoving=!1,this.ndDot.setPosition(this._oriDotPos)},a(e,[{key:"distanceRate",get:function(){return this._distanceRate}},{key:"angle",get:function(){return this._angle},set:function(t){this._angle=t}}]),e}(E)).prototype,"ndRing",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(O.prototype,"ndDot",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(O.prototype,"touchType",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.DEFAULT}}),U=e(O.prototype,"directionType",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.ALL}}),w=e(O.prototype,"isEnableTransparent",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=e(O.prototype,"isFollowStart",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=e(O.prototype,"innerSize",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),L=O))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/DebugPanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GamePrefabs.ts","./Vec3Util.ts","./PoolManager.ts","./UIManager.ts","./GamePageEnum.ts","./UIEvenEnum.ts","./FLGloable.ts","./GameEvenEnum.ts","./GameState.ts","./MonsterBase.ts","./NumberWall.ts","./MapManager.ts"],(function(e){"use strict";var t,n,o,i,r,l,a,s,u,c,g,p,h,m,b,f,d,C,E,y,v,B,N,I,S,P,M,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.defineProperty},function(e){l=e.cclegacy,a=e._decorator,s=e.Node,u=e.Label,c=e.Prefab,g=e.EditBox,p=e.systemEvent,h=e.EventHandler,m=e.Button,b=e.v3,f=e.Component},function(e){d=e.GamePrefabs},function(e){C=e.Vec3Util},function(e){E=e.PoolManager},function(e){y=e.uiManager},function(e){v=e.GamePageEnum},function(e){B=e.UIEvenEnum},function(e){N=e.FLGloable},function(e){I=e.GameEvenEnum},function(e){S=e.ECameraState},function(e){P=e.MonsterBase},function(e){M=e.NumberWall},function(e){_=e.MapManager}],execute:function(){var w,D,A,z,x,T,G,L,O,H,W,R,k,F,U,K,Y,V,j,J,X,q,Q,Z,$,ee,te,ne,oe,ie,re,le,ae,se,ue,ce,ge,pe,he,me,be,fe,de,Ce,Ee,ye,ve,Be,Ne,Ie,Se;l._RF.push({},"cd537XhEvpBiLocfJ0s9uai","DebugPanel",void 0);var Pe=a.ccclass,Me=a.property;e("DebugPanel",(w=Pe("DebugPanel"),D=Me({type:s,tooltip:"普通调试按钮"}),A=Me({type:s,tooltip:"关卡调试按钮"}),z=Me({type:u,tooltip:"切换面板按钮文字"}),x=Me({type:s,tooltip:"关卡调整面板"}),T=Me({type:s,tooltip:"BOSS调整面板"}),G=Me({type:u,tooltip:"切换Boss面板按钮"}),L=Me({type:c,tooltip:"切换数字门调试预制体"}),O=Me({type:c,tooltip:"切换怪物预制体"}),H=Me({type:g,tooltip:"帽子输入框"}),W=Me({type:g,tooltip:"衣服输入框"}),R=Me({type:g,tooltip:"武器输入框"}),k=Me({type:g,tooltip:"BOSS输入框"}),F=Me({type:g,tooltip:"地面输入框"}),U=Me({type:g,tooltip:"关卡输入框"}),K=Me({type:g,tooltip:"BOSS血量输入框"}),Y=Me({type:g,tooltip:"BOSS技能输入框"}),V=Me({type:g,tooltip:"玩家血量输入框"}),j=Me({type:g,tooltip:"球体颜色输入框"}),J=Me({type:g,tooltip:"球体数量输入框"}),X=Me({type:g,tooltip:"球体间隔输入框"}),q=Me({type:g,tooltip:"相机速度输入框"}),Q=Me({type:u,tooltip:"切换特效文字"}),Z=Me({type:u,tooltip:"切换水面文字"}),$=Me({type:g,tooltip:"相机颜色输入框"}),w((ne=t((te=function(e){function t(){for(var t,n=arguments.length,l=new Array(n),a=0;a<n;a++)l[a]=arguments[a];return t=e.call.apply(e,[this].concat(l))||this,o(i(t),"normalButton",ne,i(t)),o(i(t),"stageButton",oe,i(t)),o(i(t),"changeButtonText",ie,i(t)),o(i(t),"stagePanel",re,i(t)),o(i(t),"bossPanel",le,i(t)),o(i(t),"lblChangeBoss",ae,i(t)),o(i(t),"numberDoorChange",se,i(t)),o(i(t),"bossChange",ue,i(t)),o(i(t),"capEdit",ce,i(t)),o(i(t),"bodyEdit",ge,i(t)),o(i(t),"weaponEdit",pe,i(t)),o(i(t),"bossEdit",he,i(t)),o(i(t),"floorEdit",me,i(t)),o(i(t),"stageEdit",be,i(t)),o(i(t),"bossBloodEdit",fe,i(t)),o(i(t),"bossSkillEdit",de,i(t)),o(i(t),"playerBloodEdit",Ce,i(t)),o(i(t),"ballColorEdit",Ee,i(t)),o(i(t),"ballNumEdit",ye,i(t)),o(i(t),"ballIntervalEdit",ve,i(t)),o(i(t),"cameraSpeedEdit",Be,i(t)),o(i(t),"closeEffectText",Ne,i(t)),o(i(t),"closeWaterText",Ie,i(t)),o(i(t),"cameraColorEdit",Se,i(t)),r(i(t),"isNormal",!1),r(i(t),"isStage",!1),r(i(t),"_debugPetLevel",1),t}n(t,e);var l=t.prototype;return l.onLoad=function(){this.onChangePanel()},l.onEnable=function(){console.log("打开调试"),this.cameraColorEdit.string=C.colorToHex(N.cameraCom.clearColor).color,this.closeEffectText.string=N.cameraKeyCodeMove?"已开启相机键盘移动":"已关闭相机键盘移动";var e=N.scene3D.getChildByName("water");this.closeWaterText.string=e.active?"已开启水面显示":"已关闭水面显示"},l.show=function(){},l.onBtnClose=function(){y.instance.hideDialog(v.PAGE_DEBUG)},l.onChangePanel=function(){this.isNormal?(this.normalButton.active=!1,this.stageButton.active=!0,this.stageButton.destroyAllChildren(),this.initCurStageNumDoor(),this.changeButtonText.string="切换正常调试",this.isNormal=!1):this.isNormal||(this.normalButton.active=!0,this.stageButton.active=!1,this.changeButtonText.string="切换数字门调试",this.isNormal=!0)},l.onChangeSet=function(){this.isStage=!this.isStage,this.isStage?(this.stagePanel.active=!1,this.bossPanel.active=!0,this.bossPanel.destroyAllChildren(),this.initCurStageBoss(),this.lblChangeBoss.string="切换正常调试"):(this.stagePanel.active=!0,this.bossPanel.active=!1,this.lblChangeBoss.string="切换Boss调试")},l.changeCap=function(){p.emit(I.CHANGE_CAP,parseInt(this.capEdit.string))},l.changeBody=function(){p.emit(I.CHANGE_BODY,parseInt(this.bodyEdit.string))},l.changeWeapon=function(){p.emit(I.CHANGE_WEAPON,parseInt(this.weaponEdit.string))},l.changeBoss=function(){p.emit(I.CHANGE_BOSS,parseInt(this.bossEdit.string))},l.changeFloor=function(){p.emit(I.CHANGE_FLOOR,parseInt(this.floorEdit.string))},l.changeStage=function(){N.level=parseInt(this.stageEdit.string),_.instance.onNextLevel()},l.changeBossBlood=function(){p.emit(I.CHANGE_BOSS_BLOOD,parseInt(this.bossBloodEdit.string))},l.changeBossSkill=function(){N.curBossSkill=parseInt(this.bossSkillEdit.string)},l.changePlayerBlood=function(){p.emit(I.CHANGE_PLAYER_HP,parseInt(this.playerBloodEdit.string))},l.changeBallColor=function(){N.ballPrefab=d.getInstance().res["ball_1000"+parseInt(this.ballColorEdit.string)]},l.changeBallNum=function(){N.ballCount=parseInt(this.ballNumEdit.string),p.emit(B.UPDATE_PLAYER_BALL,N.ballCount)},l.changeBalInterval=function(){N.ballInterval=parseFloat(this.ballIntervalEdit.string)},l.changeCameraSpeed=function(){N.cameraSpeed=parseFloat(this.cameraSpeedEdit.string)/1e4},l.changeCameraColor=function(){N.cameraCom.clearColor=C.hexToColor(this.cameraColorEdit.string,1)},l.closeEffect=function(){N.cameraKeyCodeMove?(this.closeEffectText.string="已关闭相机键盘移动",N.cameraKeyCodeMove=!1,p.emit(I.CAMERA_CHANGE_STATE,S.FLOOW)):(this.closeEffectText.string="已开启相机键盘移动",N.cameraKeyCodeMove=!0,p.emit(I.CAMERA_CHANGE_STATE,S.STOP))},l.closeWater=function(){var e=N.scene3D.getChildByName("water");e.active?(this.closeWaterText.string="已关闭水面显示",e.active=!1):(this.closeWaterText.string="已开启水面显示",e.active=!0)},l.initStage=function(){_.instance.onNextLevel(),p.emit(I.GAME_RESET)},l.onBtnOpenDebug=function(){this.node.getChildByName("debugRoot").active=!this.node.getChildByName("debugRoot").active},l.initCurStageNumDoor=function(){for(var e=0;e<N.curStageNumDoor.length;e++){var t=E.getInstance().getNode(this.numberDoorChange,this.stageButton),n=N.curStageNumDoor[e].getComponent(M).getNumberWallDate();t.getChildByName("name").getComponent(u).string="数字门:"+e,t.getChildByName("number-left").getComponent(g).placeholder=""+n[0],t.getChildByName("number-right").getComponent(g).placeholder=""+n[1];var o=new h;o.target=this.node,o.component="DebugPanel",o.handler="onChangeNumDoor",o.customEventData=""+e,t.getChildByName("Button").getComponent(m).clickEvents.push(o)}},l.initCurStageBoss=function(){for(var e=0;e<N.curMonsterInfos.length+2;e++){var t,n,o=E.getInstance().getNode(this.bossChange,this.bossPanel),i=void 0,r=void 0;if(e<N.curMonsterInfos.length)r=null===(t=N.curMonsterInfos[e])||void 0===t||null===(n=t.scale)||void 0===n?void 0:n.x;else if(e==N.curMonsterInfos.length){var l,a,s,c;i=Number(null===(l=N.curMonsterInfos_1[N.curMonsterInfos_1.length-1])||void 0===l||null===(a=l.name)||void 0===a?void 0:a.split("_")[1]),r=null===(s=N.curMonsterInfos_1[N.curMonsterInfos_1.length-1])||void 0===s||null===(c=s.scale)||void 0===c?void 0:c.x}else{var p,b,f,d;i=Number(null===(p=N.curMonsterInfos_2[N.curMonsterInfos_2.length-1])||void 0===p||null===(b=p.name)||void 0===b?void 0:b.split("_")[1]),r=null===(f=N.curMonsterInfos_2[N.curMonsterInfos_2.length-1])||void 0===f||null===(d=f.scale)||void 0===d?void 0:d.x}o.getChildByName("name").getComponent(u).string="怪物"+e,o.getChildByName("number").getComponent(g).placeholder="当前ID:{"+i+"}",o.getChildByName("scale").getComponent(g).placeholder="当前缩放:{"+r+"}";var C=new h;C.target=this.node,C.component="DebugPanel",C.handler="onChangeBoss",C.customEventData=""+e,o.getChildByName("Button").getComponent(m).clickEvents.push(C);var y=new h;y.target=this.node,y.component="DebugPanel",y.handler="onChangeMonsterScale",y.customEventData=""+e,o.getChildByName("buttonScale").getComponent(m).clickEvents.push(y)}},l.onChangeNumDoor=function(e,t){var n=parseInt(t),o=this.stageButton.children[n].getChildByName("number-left").getComponent(g).string,i=this.stageButton.children[n].getChildByName("number-right").getComponent(g).string;""==o&&(o=this.stageButton.children[n].getChildByName("number-left").getComponent(g).placeholder),""==i&&(i=this.stageButton.children[n].getChildByName("number-right").getComponent(g).placeholder),N.curStageNumDoor[n].getComponent(M).resetNumberWall(o,i)},l.onChangeBoss=function(e,t){var n=parseInt(t),o=this.bossPanel.children[n].getChildByName("number").getComponent(g).string;if(o)if(n<N.curMonsterInfos.length)N.curMonsterInfos[n].getComponent(P).changeMonster(Number(o));else{var i;i=n==N.curMonsterInfos.length?N.curMonsterInfos_1:N.curMonsterInfos_2;for(var r=0;r<i.length;r++){var l=i[r];if(console.log("pili:",l.components),l.components&&l.components.length>0)l.getComponent(P).changeMonster(Number(o))}}},l.onChangeMonsterScale=function(e,t){var n=parseInt(t),o=Number(this.bossPanel.children[n].getChildByName("scale").getComponent(g).string);if(o)if(n<N.curMonsterInfos.length)N.curMonsterInfos[n].scale=b(o,o,o);else{var i;i=n==N.curMonsterInfos.length?N.curMonsterInfos_1:N.curMonsterInfos_2;for(var r=0;r<i.length;r++)i[r]&&i[r].scale&&(i[r].scale=b(o,o,o))}},l.onBtnAddCoin=function(){},l.onBtnAddCoin2=function(){},l.debugPetLevelChang=function(e,t,n){this._debugPetLevel=Number(e)},l.lvDebug=function(){N.level=this._debugPetLevel,_.instance.onNextLevel()},t}(f)).prototype,"normalButton",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(te.prototype,"stageButton",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(te.prototype,"changeButtonText",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(te.prototype,"stagePanel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(te.prototype,"bossPanel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(te.prototype,"lblChangeBoss",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(te.prototype,"numberDoorChange",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(te.prototype,"bossChange",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(te.prototype,"capEdit",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(te.prototype,"bodyEdit",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(te.prototype,"weaponEdit",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(te.prototype,"bossEdit",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=t(te.prototype,"floorEdit",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(te.prototype,"stageEdit",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(te.prototype,"bossBloodEdit",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(te.prototype,"bossSkillEdit",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=t(te.prototype,"playerBloodEdit",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=t(te.prototype,"ballColorEdit",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=t(te.prototype,"ballNumEdit",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(te.prototype,"ballIntervalEdit",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Be=t(te.prototype,"cameraSpeedEdit",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=t(te.prototype,"closeEffectText",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=t(te.prototype,"closeWaterText",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(te.prototype,"cameraColorEdit",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=te))||ee));l._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvenEnum.ts",["cc"],(function(E){"use strict";var A;return{setters:[function(E){A=E.cclegacy}],execute:function(){var _;E("GameEvenEnum",void 0),A._RF.push({},"cd654nDqwZK/pXT4Y8GITxS","GameEvenEnum",void 0),function(E){E.GAME_READY="GAME_READY",E.GAME_STARTED="GAME_STARTED",E.GAME_ENDED="GAME_ENDED",E.GAME_RESET="GAME_RESET",E.CAMERA_CHANGE_STATE="CAMERA_CHANGE_STATE",E.CHANGE_CAP="CHANGE_CAP",E.CHANGE_BODY="CHANGE_BODY",E.CHANGE_WEAPON="CHANGE_WEAPON",E.CHANGE_BOSS="CHANGE_BOSS",E.CHANGE_FLOOR="CHANGE_FLOOR",E.CHANGE_BOSS_BLOOD="CHANGE_BOSS_BLOOD",E.CHANGE_BOSS_SKILL="CHANGE_BOSS_SKILL",E.CHANGE_STAGE="CHANGE_STAGE",E.CHANGE_BALL_COLOR="CHANGE_BALL_COLOR",E.CHANGE_PLAYER_HP="CHANGE_PLAYER_HP",E.BOSS_DEAD="BOSS_DEAD",E.PLAYER_DEAD="PLAYER_DEAD",E.FIRE_BALL="FIRE_BALL",E.MONSTER_ATTACK_SATRT="MONSTER_ATTACK_SATRT",E.E_MonsterHit="m1010",E.E_MonsterAttack="m1011",E.E_BallAction="m1030",E.E_DoorAction="m1040",E.E_DoorBack="m1041"}(_||(_=E("GameEvenEnum",{}))),A._RF.pop()}}}));

System.register("chunks:///_virtual/BallBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Vec3Util.ts","./RotateUtil.ts","./RandomUtil.ts","./FlMath.ts","./Behavior3D.ts","./FLGloable.ts","./GameEvenEnum.ts","./GameState.ts"],(function(t){"use strict";var i,o,e,l,n,a,s,r,d,h,c,u,y,m,p,f,v,g,B,M,S,R,k,A;return{setters:[function(t){i=t.defineProperty,o=t.inheritsLoose,e=t.assertThisInitialized,l=t.createClass},function(t){n=t.cclegacy,a=t._decorator,s=t.v3,r=t.geometry,d=t.RigidBody,h=t.ERigidBodyType,c=t.SphereCollider,u=t.PhysicsSystem,y=t.math,m=t.instantiate,p=t.tween},function(t){f=t.Vec3Util},function(t){v=t.RotateUtil},function(t){g=t.RandomUtil},function(t){B=t.default},function(t){M=t.Behavior3D},function(t){S=t.FLGloable},function(t){R=t.GameEvenEnum},function(t){k=t.EColliderGroup,A=t.EBuffType}],execute:function(){var D,b,w;n._RF.push({},"e7ebcIXf5pCrIOJrH45Vgor","BallBase",void 0);var I=a.ccclass;a.property,t("BallBase",I((w=b=function(t){function n(){for(var o,l=arguments.length,a=new Array(l),d=0;d<l;d++)a[d]=arguments[d];return o=t.call.apply(t,[this].concat(a))||this,i(e(o),"moveSpeed",n.initSpeed),i(e(o),"_atkMul",1),i(e(o),"skill",null),i(e(o),"moveDir",s()),i(e(o),"isMove",!1),i(e(o),"rigidBody",null),i(e(o),"isCopy",!1),i(e(o),"multiplyNum",0),i(e(o),"numberWallUUID",[]),i(e(o),"ray",new r.Ray),i(e(o),"shutOutUUID",""),i(e(o),"isRayStart",!1),i(e(o),"multiplyAng",5),i(e(o),"multiplyAdd",.5),i(e(o),"multiplyAng2",10),o}o(n,t);var a=n.prototype;return a.onLoad=function(){this.rigidBody=this.getComponent(d),this.rigidBody.setGroup(k.player),this.rigidBody.setMask(this.ballRayMask),this.rigidBody.type=h.STATIC,this.node.on(R.E_BallAction,this.onBallAction,this);this.node.getComponent(c)},a.update=function(t){if(this.isMove){t=B.getMinMax(t,.016,.018);var i=this.moveSpeed*t;if(this.node.worldPosition.z>S.player.worldPosition.z+3||this.node.worldPosition.x<-4||this.node.worldPosition.x>4)this.recovery();else if(this.node.worldPosition.z<S.curGround.getChildByName("boss_wall").worldPosition.z)this.addImpulse2(),this.isMove=!1;else{var o=this.moveDir.clone().multiplyScalar(i);this.node.translate(o,1),this.isRayStart&&this.castRay(this.node.worldPosition,this.moveDir)}}},a.castRay=function(t,i){if(this.ray.o=t,this.ray.d=i,u.instance.raycast(this.ray,this.ballRayMask,10),u.instance.raycastResults&&u.instance.raycastResults.length>0){for(var o=1e10,e=null,l=0;l<u.instance.raycastResults.length;l++){var n=u.instance.raycastResults[l].distance;n<=o&&(o=n,e=u.instance.raycastResults[l])}if(e&&o<=.5){if(this.shutOutUUID==e.collider.node.uuid)return;if(e.collider.getGroup()==k.number_wall&&i.z<0)-1==this.numberWallUUID.indexOf(e.collider.node.uuid)&&(this.numberWallUUID.push(e.collider.node.uuid),e.collider.node.emit(R.E_DoorAction,this.node));else if(e.collider.getGroup()==k.monster)this.hitMonster(e.collider.node,e.hitPoint.clone(),this.atk);else{var a=e.hitPoint.clone(),s=e.hitNormal.clone(),r=f.getReflectedDir(i,s);if(this.multiplyNum>0){var d=a.clone().subtract(i.clone().normalize().multiplyScalar(.25));this.multiplyBall(this.multiplyNum,r,d),this.multiplyNum=0,this.recovery()}else this.changeDir(r)}}}},a.onCollision=function(t){},a.hitMonster=function(t,i,o){void 0===o&&(o=this.atk),t.emit(R.E_MonsterHit,o,i),this.isMove=!1,this.node.off(R.E_BallAction,this.onBallAction,this),this.addImpulse()},a.addImpulse=function(){var t=this;this.rigidBody.clearState(),this.rigidBody.setMask(this.ballMonsterMask),this.rigidBody.type=h.DYNAMIC,this.rigidBody.clearState();var i=y.random()>.5?g.randomFloat(-5,-3):g.randomFloat(3,5);this.rigidBody.applyImpulse(s(i,g.randomFloat(40,30),g.randomFloat(8,5))),this.rigidBody.applyTorque(s(g.randomFloat(-6,6),g.randomFloat(20,30),g.randomFloat(3,1))),this.scheduleOnce((function(){t.recovery()}),5)},a.addImpulse2=function(){var t=this;this.rigidBody.clearState(),this.rigidBody.setMask(this.ballMonsterMask),this.rigidBody.type=h.DYNAMIC,this.rigidBody.clearState();var i=y.random()>.5?g.randomFloat(-5,-3):g.randomFloat(3,5);this.rigidBody.applyImpulse(s(i,g.randomFloat(40,30),g.randomFloat(8,5))),this.rigidBody.applyTorque(s(g.randomFloat(-6,6),g.randomFloat(5,10),g.randomFloat(3,1))),this.scheduleOnce((function(){t.recovery()}),5)},a.recovery=function(){this.stop(),this.node.destroy(),this.rigidBody.clearState()},a.launch=function(t,i,o,e){void 0===o&&(o=!1),void 0===e&&(e=""),this.moveSpeed=n.initSpeed,this.node.active=!0,this.node.worldPosition=i,this.changeDir(t),this.isMove=!0,this.shutOutUUID=e,this.isCopy=o,this.isRayStart=!0},a.enterDoorCallBack=function(t,i,o){switch(void 0===i&&(i=!1),t){case A.ADD:this.addBuffBall(o[0],o[1]);break;case A.CUT:break;case A.MULTIPLY:this.multiplyNum=o,this.multiplyNum=this.multiplyNum>10?10:this.multiplyNum;break;case A.MULTIPLY2:this.multiplyBuffBall(o[0],o[1]);break;case A.EXCEPT:}i&&this.recovery()},a.multiplyBall=function(t,i,o){for(var e=-Math.floor(t/2)*this.multiplyAng,l=0;l<t;l++){var n=e;e+=this.multiplyAng,this.node.rotation=f.lockPos(s(),i,!1),v.rotateAround(this.node,s(0,1,0),y.toRadian(n));var a=this.node.forward.clone(),r=m(this.node);r.parent=S.ballRoot,r.emit(R.E_BallAction,"launch",a,o)}},a.addBuffBall=function(t,i){for(var o=-Math.floor(i/2)*this.multiplyAdd,e=0;e<i;e++){var l=o;o+=this.multiplyAdd;var n=this.node.worldPosition.clone().add3f(l,0,0),a=m(this.node);a.parent=S.ballRoot,a.emit(R.E_BallAction,"launch",this.moveDir.clone(),n,!0,t)}this.recovery()},a.multiplyBuffBall=function(t,i){for(var o=-Math.floor(i/2)*this.multiplyAng2,e=0;e<i;e++){var l=o;o+=this.multiplyAng2,this.node.rotation=f.lockPos(s(),this.moveDir,!1),v.rotateAround(this.node,s(0,1,0),y.toRadian(l));var n=this.node.forward.clone(),a=m(this.node);a.parent=S.ballRoot,a.emit(R.E_BallAction,"launch",n,this.node.worldPosition.clone(),!0,t)}this.recovery()},a.setSpeed=function(){var t=this;if(this.moveSpeed!=n.fastSpeed){var i=.1*this.node.getSiblingIndex();p(this).delay(i).call((function(){t.moveSpeed=n.fastSpeed})).start()}},a.stop=function(){this.isMove=!1,this.rigidBody.setLinearVelocity(s())},a.changeDir=function(t){this.moveDir=t,this.node.rotation=f.lockPos(s(),this.moveDir)},a.onBallAction=function(t){var i=this[t];if(i){for(var o=arguments.length,e=new Array(o>1?o-1:0),l=1;l<o;l++)e[l-1]=arguments[l];i.call.apply(i,[this].concat(e))}},a.playWallSound=function(){},a.onDestroyed=function(){},l(n,[{key:"atk",get:function(){return 1}},{key:"ballRayMask",get:function(){return k.wall+k.number_wall+k.monster}},{key:"ballMonsterMask",get:function(){return k.player+k.monster+k.plane+k.wall}}]),n}(M),i(b,"initSpeed",12),i(b,"fastSpeed",2200),i(b,"moveSpeed",10),D=w))||D);n._RF.pop()}}}));

System.register("chunks:///_virtual/CameraLock.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,o,r,n,a,s,c,p,l,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,n=t.defineProperty},function(t){a=t.cclegacy,s=t._decorator,c=t.Node,p=t.Vec3,l=t.v3,u=t.Component}],execute:function(){var d,h,y,f,m;a._RF.push({},"f3d026j5G5OC6vSRYLCeUsu","CameraLock",void 0);var C=s.ccclass,g=s.property;t("CameraLock",(d=C("CameraLock"),h=g({type:c,displayName:"跟随目标节点"}),d((m=i((f=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a))||this,o(r(i),"targetNd",m,r(i)),n(r(i),"initPosition",void 0),n(r(i),"subCameraAndPlayer",void 0),i}e(i,t);var a=i.prototype;return a.onLoad=function(){this.initPosition=this.node.position.clone(),this.subCameraAndPlayer=this.initPosition.subtract(this.targetNd.position)},a.update=function(){this.node.position=p.lerp(l(),this.node.position,l(this.targetNd.position.x+this.subCameraAndPlayer.x,this.targetNd.position.y+this.subCameraAndPlayer.y,this.targetNd.position.z+this.subCameraAndPlayer.z),.8)},i}(u)).prototype,"targetNd",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=f))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/BossBlood.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIEvenEnum.ts","./GameEvenEnum.ts"],(function(t){"use strict";var e,n,o,s,i,r,l,a,c,u,h,p,d,B,f,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,s=t.assertThisInitialized,i=t.defineProperty},function(t){r=t.cclegacy,l=t._decorator,a=t.Label,c=t.CCInteger,u=t.systemEvent,h=t.Tween,p=t.tween,d=t.v3,B=t.Component},function(t){f=t.UIEvenEnum},function(t){v=t.GameEvenEnum}],execute:function(){var g,b,y,w,m,E,D;r._RF.push({},"f5ed6nDgJlCLr64ujQVGq5V","BossBlood",void 0);var T=l.ccclass,I=l.property;t("BossBlood",(g=T("BossBlood"),b=I({type:a,tooltip:"血量字体"}),y=I({type:c,tooltip:"高度"}),g((E=e((m=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,o(s(e),"bloodText",E,s(e)),o(s(e),"high",D,s(e)),i(s(e),"bossActive",!0),i(s(e),"tweenInterval",0),e}n(e,t);var r=e.prototype;return r.onLoad=function(){u.on(f.UPDATE_BOSS_BLOOD,this.onChangeBossBlood,this),u.on(v.BOSS_DEAD,this.onBossDead,this)},r.start=function(){},r.onChangeBossBlood=function(t){this.bossActive=!0,this.bloodText.string=t.toString(),this.changeBossBloodTween()},r.changeBossBloodTween=function(){this.tweenInterval>0||(this.tweenInterval=.125,h.stopAllByTarget(this.node),p(this.node).to(.06,{scale:d(1.6,1.6,1.6)}).to(.07,{scale:d(1,1,1)}).start())},r.onBossDead=function(){this.bossActive=!1,this.bloodText.string=""},r.update=function(t){this.bossActive&&this.tweenInterval>0&&(this.tweenInterval-=t)},e}(B)).prototype,"bloodText",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(m.prototype,"high",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=m))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/ball-magic",["./UIEvenEnum.ts","./LevelToolPlayer.ts","./EBossSkill.ts","./FLGloable.ts","./GameEvenEnum.ts","./GameState.ts","./EAniDefine.ts","./EEffectName.ts","./MonsterBase.ts","./MapPrefabEnum.ts","./Bullet.ts","./MainPlayer.ts","./LevelToolBoss.ts","./LevelToolNumWall.ts","./MapLoader.ts","./NumberTool.ts","./NumberWall.ts","./MapLevelVo.ts","./BallBase.ts","./Ball_10001.ts","./CameraScript.ts","./FollowMovement.ts","./MonsterTool.ts","./FreeFlightCamera.ts","./GamePanel.ts","./LevelBlockVo.ts","./MapManager.ts","./BallNum.ts","./joystick.ts","./DebugPanel.ts","./CameraLock.ts","./BossBlood.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/ball-magic', 'chunks:///_virtual/ball-magic'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});