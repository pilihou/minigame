System.register("chunks:///_virtual/UIEvenEnum.ts",["cc"],(function(_){"use strict";var E;return{setters:[function(_){E=_.cclegacy}],execute:function(){var U;_("UIEvenEnum",void 0),E._RF.push({},"059d8sJE4hPZYh2x+k1CuA6","UIEvenEnum",void 0),function(_){_.UI_TOUCH_START="UI_TOUCH_START",_.UI_TOUCH_MOVE="UI_TOUCH_MOVE",_.UI_TOUCH_END="UI_TOUCH_END",_.GAME_PAGE_VIDEO_BACK="GAME_PAGE_VIDEO_BACK",_.UPDATE_BOSS_BLOOD="UPDATE_BOSS_BLOOD",_.UPDATE_PLAYER_BLOOD="UPDATE_PLAYER_BLOOD",_.UPDATE_PLAYER_BALL="UPDATE_PLAYER_BALL"}(U||(U=_("UIEvenEnum",{}))),E._RF.pop()}}}));

System.register("chunks:///_virtual/LevelToolPlayer.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,o,t,l,i,n,a,c,u,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){i=e.cclegacy,n=e._decorator,a=e.CCInteger,c=e.Color,u=e.color,p=e.Component}],execute:function(){var s,y,f,v,b,d,g;i._RF.push({},"0ed82OXEedEBo/PZgiXYkFT","LevelToolPlayer",void 0);var C=n.ccclass,h=n.property;e("LevelToolPlayer",(s=C("LevelToolPlayer"),y=h({type:a,displayName:"数字"}),f=h({type:c,displayName:"初始球颜色"}),s((d=r((b=function(e){function r(){for(var r,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return r=e.call.apply(e,[this].concat(i))||this,t(l(r),"playerCount",d,l(r)),t(l(r),"ballColor",g,l(r)),r}return o(r,e),r}(p)).prototype,"playerCount",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),g=r(b.prototype,"ballColor",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u(12,34,197,255)}}),v=b))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/EAniDefine.ts",["cc"],(function(e){"use strict";var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){var i;e("EAniDefine",void 0),n._RF.push({},"18b1cLf8PVKBaJwassTU8Aw","EAniDefine",void 0),function(e){e.IDLE="idle",e.RUN="run",e.RUN_RIGHT="run2",e.RUN_LEFT="run3",e.HIT="hit",e.ATTACK1="attackcycle3",e.DIED="died",e.SUCC="success"}(i||(i=e("EAniDefine",{}))),n._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts","./FlMath.ts","./Behavior3D.ts","./EBossState.ts","./FLGloable.ts","./GameState.ts","./GameEvenEnum.ts"],(function(t){"use strict";var i,o,n,e,s,r,a,h,l,d,u,c,p,m,v,f,w;return{setters:[function(t){i=t.inheritsLoose,o=t.defineProperty,n=t.assertThisInitialized},function(t){e=t.cclegacy,s=t._decorator,r=t.SkeletalAnimation,a=t.SkinnedMeshRenderer,h=t.v3,l=t.tween,d=t.BoxCollider},function(t){u=t.PoolManager},function(t){c=t.default},function(t){p=t.Behavior3D},function(t){m=t.EBossState},function(t){v=t.FLGloable},function(t){f=t.EColliderGroup},function(t){w=t.GameEvenEnum}],execute:function(){var g;e._RF.push({},"2412ew5jq9DPa4GGIVsm+lh","MonsterBase",void 0);var y=s.ccclass;s.property,t("MonsterBase",y("MonsterBase")(g=function(t){function e(){for(var i,e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,o(n(i),"isInit",!1),o(n(i),"isDie",!1),o(n(i),"rw",null),o(n(i),"rwAni",null),o(n(i),"moveType",1),o(n(i),"isRise",!0),o(n(i),"arrowPos",null),o(n(i),"minX",-5),o(n(i),"maxX",5),o(n(i),"mat",null),o(n(i),"hitX",2),o(n(i),"curAniName",""),i}i(e,t);var s=e.prototype;return s.onLoad=function(){this.rw=this.node.getChildByName("rw"),this.rwAni=this.rw.getComponent(r);var t=this.node.getComponentsInChildren(a);this.mat=this.node.getComponentsInChildren(a)[0].materials[0];for(var i=0;i<t.length;i++)for(var o=0;o<t[i].materials.length;o++)t[i].setMaterialInstance(this.mat,o)},s.onEnabled=function(){this.node.on(w.E_MonsterHit,this.onHit,this)},s.init=function(t){this.moveType=t,2==this.moveType?(this.node.worldPosition=h(0,this.node.worldPosition.y,this.node.worldPosition.z),this.playAni(m.IDLE)):this.playAni(m.IDLE),this.isInit=!0},s.onHit=function(t){var i=this;void 0===t&&(t=null);var o=0;if(this.schedule((function(){var t=o>=33?66-o:o;t=c.getMinMax(t,1,66),i.mat.setProperty("albedo",h(t,t,t)),o+=3}),1e-4,33),this.playAni(m.HIT,.8,!0),null!=t&&1==this.moveType){var n=h(this.node.worldPosition.x+(t?-1:1)*this.hitX,this.node.worldPosition.y,this.node.worldPosition.z);n.x=c.getMinMax(n.x,v.playerScript.moveRange[0],v.playerScript.moveRange[1]),l(this.node).to(.5,{worldPosition:n}).call((function(){i.playAni(m.IDLE)})).start()}},s.update=function(t){this.isInit&&v.curGameState==w.GAME_STARTED&&2==this.moveType&&this.updateMove()},s.updateMove=function(){this.arrowPos=this.node.position,this.isRise?(this.arrowPos.x+=v.bossMoveSpeed,this.arrowPos.x>this.maxX&&(this.arrowPos.x=this.maxX,this.isRise=!1)):(this.arrowPos.x-=v.bossMoveSpeed,this.arrowPos.x<this.minX&&(this.arrowPos.x=this.minX,this.isRise=!0)),this.node.position=this.arrowPos},s.changeMonster=function(t){var i=this.moveType,o=u.getInstance().getPrefabNodeByPool("boss_"+t,v.groundRoot);o.worldPosition=this.node.worldPosition.clone(),o.rotation=this.node.rotation.clone(),o.getComponent(d).setGroup(1==i?f.monster:f.monsterBoss);var n=o.getComponent(e);return n||(n=o.addComponent(e)),n.init(i),this.node.destroy(),o},s.playAni=function(t,i,o){void 0===i&&(i=1),void 0===o&&(o=!1),o&&(this.curAniName=""),this.curAniName!==t&&(this.rwAni&&this.rwAni.play(t),this.rwAni&&this.rwAni.getState(t)&&(this.rwAni.getState(t).speed=i),this.curAniName=t)},s.getAniPro=function(t){return this.rwAni.getState(t).isPlaying?this.rwAni.getState(t).ratio:-1},s.onDisabled=function(){this.node.off(w.E_MonsterHit,this.onHit,this)},e}(p))||g);e._RF.pop()}}}));

System.register("chunks:///_virtual/MapPrefabEnum.ts",["cc"],(function(a){"use strict";var e;return{setters:[function(a){e=a.cclegacy}],execute:function(){var n;a("MapPrefabEnum",void 0),e._RF.push({},"332e11z0WNIiqb7O0kLptB7","MapPrefabEnum",void 0),function(a){a.map_ground="map_ground",a.map_number_wall="map_number_wall",a.map_wall="map_wall",a.map_player="map_player",a.map_boss="map_boss",a.boss_wall="boss_wall",a.line_circle="line_circle",a.line_point="line_point"}(n||(n=a("MapPrefabEnum",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/ESoundEnum.ts",["cc"],(function(n){"use strict";var u;return{setters:[function(n){u=n.cclegacy}],execute:function(){var e;n("ESoundEnum",void 0),u._RF.push({},"339a7eiU2VFUaT5lElJ9c9/","ESoundEnum",void 0),function(n){n.BASE="res/snd/",n.BGM="res/snd/bgm"}(e||(e=n("ESoundEnum",{}))),u._RF.pop()}}}));

System.register("chunks:///_virtual/MainPlayer.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts","./FlMath.ts","./UIEvenEnum.ts","./EAniDefine.ts","./Behavior3D.ts","./FLGloable.ts","./GameState.ts","./GameEvenEnum.ts"],(function(t){"use strict";var i,e,n,o,s,r,h,a,l,c,u,A,d,p,E,g,w,y,m,v,_;return{setters:[function(t){i=t.inheritsLoose,e=t.defineProperty,n=t.assertThisInitialized,o=t.createClass},function(t){s=t.cclegacy,r=t._decorator,h=t.SkeletalAnimation,a=t.SystemEvent,l=t.systemEvent,c=t.v3,u=t.Vec3,A=t.math,d=t.KeyCode},function(t){p=t.PoolManager},function(t){E=t.default},function(t){g=t.UIEvenEnum},function(t){w=t.EAniDefine},function(t){y=t.Behavior3D},function(t){m=t.FLGloable},function(t){v=t.EState},function(t){_=t.GameEvenEnum}],execute:function(){var f;s._RF.push({},"3573bqMr2dNCJ/8MowiUd+H","MainPlayer",void 0);var C=r.ccclass;r.property,t("MainPlayer",C("MainPlayer")(f=function(t){function s(){for(var i,o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return i=t.call.apply(t,[this].concat(s))||this,e(n(i),"isInit",!1),e(n(i),"rw",null),e(n(i),"rwAni",null),e(n(i),"speed",.09),e(n(i),"isMove",!1),e(n(i),"capArr",[]),e(n(i),"clothesArr",[]),e(n(i),"bodyArr",[]),e(n(i),"weaponArr",[]),e(n(i),"initPosition",null),e(n(i),"curHp",1),e(n(i),"curBall",null),e(n(i),"_curState",-1),e(n(i),"isFollowRight",null),e(n(i),"moveRange",[-8.5,8.5]),e(n(i),"moveSpeed",.3),e(n(i),"curAniName",""),e(n(i),"leftDown",!1),e(n(i),"rightDown",!1),e(n(i),"isFollow",!1),i}i(s,t);var r=s.prototype;return r.booState=function(t){return t==this.curState},r.onLoad=function(){this.rw=this.node.getChildByName("rw"),this.rwAni=this.rw.getComponent(h),this.initPosition=this.node.worldPosition.clone(),this.initAllClothes()},r.onEnabled=function(){this.registerEvent(a.EventType.KEY_DOWN,this.onKeyDown,this),this.registerEvent(a.EventType.KEY_UP,this.onKeyUp,this),this.registerEvent(_.E_PlayerHit,this.onHit,this),this.registerEvent(_.GAME_STARTED,this.actionEmitBalls,this),this.registerEvent(_.CHANGE_CAP,this.onChangeCap,this),this.registerEvent(_.CHANGE_BODY,this.onChangeClothes,this),this.registerEvent(_.CHANGE_WEAPON,this.onChangeWeapon,this),this.registerEvent(_.CHANGE_PLAYER_HP,this.onChangeHp,this),this.registerEvent(_.GAME_RESET,this.resetPlayerState,this)},r.onChangeHp=function(t){this.curHp=t,l.emit(g.UPDATE_PLAYER_BLOOD,this.curHp)},r.init=function(){var t=this;this.rest(),this.scheduleOnce((function(){t.playAni(w.IDLE,1,!0)}),.001),this.curState=v.DAIJI,this.isInit=!0},r.rest=function(){this.curHp=m.initPlayerHp,l.emit(g.UPDATE_PLAYER_BLOOD,this.curHp),this.isMove=!1,this.curBall=null},r.update=function(){this.isInit&&m.curGameState==_.GAME_STARTED&&(this.updateState(),this.onUpdateJoystickMove(),this.onUpdateFollowMove(),this.onUpdateKeyMove())},r.updateState=function(){switch(this.curState){case v.DAIJI:(this.getAniPro(w.ATTACK1)>=1||-1==this.getAniPro(w.ATTACK1))&&this.playAni(w.IDLE);break;case v.MOVE:}},r.onUpdateJoystickMove=function(){this.onUpdateMove(null!==m.angle,m.angle+90>=0&&m.angle+90<=180)},r.onUpdateKeyMove=function(){null!=m.angle||this.isFollow||this.onUpdateMove(this.leftDown||this.rightDown,this.rightDown)},r.onUpdateFollowMove=function(){if(null==m.angle&&this.isFollow&&this.curBall){this.booState(v.MOVE)||(this.curState=v.MOVE);var t=E.lerp(0,this.curBall.worldPosition.x-this.node.worldPosition.x,.8);t=E.getMinMax(t,-this.moveSpeed,this.moveSpeed),this.node.worldPosition=c(this.node.worldPosition.x+t,this.node.worldPosition.y,this.node.worldPosition.z),(this.getAniPro(w.ATTACK1)>=1||-1==this.getAniPro(w.ATTACK1))&&this.playAni(t>0?w.RUN_RIGHT:w.RUN_LEFT),l.emit(_.KEY_DOWN,!0,t<0)}},r.onUpdateMove=function(t,i){if(t){this.booState(v.MOVE)||(this.curState=v.MOVE);var e=c(this.node.worldPosition.x+this.moveSpeed*(i?1:-1),0,0);e.x=E.getMinMax(e.x,this.moveRange[0],this.moveRange[1]),this.node.worldPosition=e,(this.getAniPro(w.ATTACK1)>=1||-1==this.getAniPro(w.ATTACK1))&&this.playAni(i?w.RUN_RIGHT:w.RUN_LEFT)}else this.booState(v.DAIJI)||(this.curState=v.DAIJI)},r.onHit=function(t){void 0===t&&(t=1),this.playAni(w.ATTACK1,2),this.curHp-=t,l.emit(g.UPDATE_PLAYER_BLOOD,this.curHp)},r.onGameOver=function(t){this.isInit=!1,this.curState=v.DIED,m.curGameState=_.GAME_ENDED,this.unscheduleAllCallbacks(),t?this.playAni(w.SUCC):this.playAni(w.DIED)},r.actionEmitBalls=function(){this.playAni(w.ATTACK1,1,!0);var t=u.rotateY(c(),c(0,0,-1),c(0,1,0),A.toRadian(30)),i=u.add(c(),this.node.worldPosition,t.clone().multiplyScalar(2));this.curBall=p.getInstance().getNode(m.ballPrefab,m.ballRoot),this.curBall.emit(_.E_BallAction,"launch",t,i)},r.resetPlayerState=function(){this.playAni(w.IDLE),this.curState=v.DAIJI,this.node.worldPosition=this.initPosition,m.curGameState=_.GAME_READY},r.initAllClothes=function(){for(var t=1;t<=6;t++)this.rw.getChildByName("Zomball_zj"+t+"_head")?this.capArr.push(this.rw.getChildByName("Zomball_zj"+t+"_head")):this.rw.getChildByName("Zomball_zj"+t+"_head")||this.capArr.push(null),this.rw.getChildByName("Zomball_zj"+t+"_clothes")?this.clothesArr.push(this.rw.getChildByName("Zomball_zj"+t+"_clothes")):this.rw.getChildByName("Zomball_zj"+t+"_clothes")||this.clothesArr.push(null),this.rw.getChildByName("Zomball_zj"+t+"_body")?this.bodyArr.push(this.rw.getChildByName("Zomball_zj"+t+"_body")):this.rw.getChildByName("Zomball_zj"+t+"_body")||this.bodyArr.push(null),this.rw.getChildByName("wq Socket").getChildByName("Zomball_wp"+t)?this.weaponArr.push(this.rw.getChildByName("wq Socket").getChildByName("Zomball_wp"+t)):this.rw.getChildByName("wq Socket").getChildByName("Zomball_wp"+t)||this.weaponArr.push(null);console.log(this.capArr,this.weaponArr)},r.onChangeCap=function(t){if(t>0&&t<7)for(var i=0;i<this.capArr.length;i++)i===t-1&&this.capArr[i]?this.capArr[i].active=!0:this.capArr[i]&&(this.capArr[i].active=!1)},r.onChangeClothes=function(t){if(t>0&&t<7)for(var i=0;i<this.clothesArr.length;i++)i===t-1&&this.clothesArr[i]?this.clothesArr[i].active=!0:this.clothesArr[i]&&(this.clothesArr[i].active=!1),i===t-1&&this.bodyArr[i]?this.bodyArr[i].active=!0:i!==t-1||this.bodyArr[i]?this.bodyArr[i]&&(this.bodyArr[i].active=!1):this.bodyArr[0].active=!0},r.onChangeWeapon=function(t){if(t>0&&t<6)for(var i=0;i<this.weaponArr.length;i++)i===t-1&&this.weaponArr[i]?this.weaponArr[i].active=!0:this.weaponArr[i]&&(this.weaponArr[i].active=!1)},r.playAni=function(t,i,e){void 0===i&&(i=1),void 0===e&&(e=!1),e&&(this.curAniName=""),this.curAniName!==t&&(this.rwAni&&this.rwAni.play(t),this.rwAni&&this.rwAni.getState(t)&&(this.rwAni.getState(t).speed=i),this.curAniName=t)},r.getAniPro=function(t){return this.rwAni.getState(t).isPlaying?this.rwAni.getState(t).ratio:-1},r.onDisabled=function(){},r.onKeyDown=function(t){switch(t.keyCode){case d.ARROW_LEFT:this.leftDown=!0,l.emit(_.KEY_DOWN,!0,!0);break;case d.ARROW_RIGHT:this.rightDown=!0,l.emit(_.KEY_DOWN,!0,!1);break;case d.SPACE:this.isFollowRight=null,this.isFollow=!0}},r.onKeyUp=function(t){switch(t.keyCode){case d.ARROW_LEFT:this.leftDown=!1,l.emit(_.KEY_DOWN,!1,!0);break;case d.ARROW_RIGHT:this.rightDown=!1,l.emit(_.KEY_DOWN,!1,!1);break;case d.SPACE:this.isFollow=!1,l.emit(_.KEY_DOWN,!1,!1)}},o(s,[{key:"curState",get:function(){return this._curState},set:function(t){this._curState=t}}]),s}(y))||f);s._RF.pop()}}}));

System.register("chunks:///_virtual/MapLoader.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./LevelToolPlayer.ts","./MapPrefabEnum.ts","./LevelToolBoss.ts"],(function(t){"use strict";var e,o,i,r,n,a,s,p,l,c,u,m,d,h,y,g,f,v,b,N,_;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,n=t.defineProperty,a=t.createClass},function(t){s=t.cclegacy,p=t._decorator,l=t.CCInteger,c=t.systemEvent,u=t.SystemEvent,m=t.KeyCode,d=t.Vec3,h=t.color,y=t.instantiate,g=t.v3,f=t.director,v=t.Component},function(t){b=t.LevelToolPlayer},function(t){N=t.MapPrefabEnum},function(t){_=t.LevelToolBoss}],execute:function(){var w,D,S,T,C,M,L,P,F,k,O,B,z,j,x,E,I,A,R,V,K,U;s._RF.push({},"38bbdzZyqVAXo6lB18DB+W7","MapLoader",void 0);var W=p.ccclass,q=p.property,Y="assets/bundles/ball-magic/res/config/";t("MapLoader",(w=W("MapLoader"),D=q({displayName:" "}),S=q({type:l,min:1,step:1,displayName:"导出关卡数"}),T=q({displayName:"保存关卡数据"}),C=q({displayName:" "}),M=q({type:l,min:1,step:1,displayName:"加载关卡数"}),L=q({displayName:"加载关卡数据"}),P=q({displayName:" "}),F=q({displayName:" "}),k=q({displayName:"添加地板"}),O=q({displayName:"添加主角"}),B=q({displayName:"添加boss"}),z=q({displayName:"添加数字墙"}),j=q({displayName:"添加障碍墙壁"}),w((I=e((E=function(t){function e(){for(var e,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a))||this,i(r(e),"test1",I,r(e)),i(r(e),"mapNameSave",A,r(e)),n(r(e),"_isFinish1",!1),i(r(e),"test2",R,r(e)),i(r(e),"mapNameLoad",V,r(e)),n(r(e),"_isFinish2",!1),i(r(e),"test3",K,r(e)),i(r(e),"test4",U,r(e)),n(r(e),"_t1",!1),n(r(e),"_t4",!1),n(r(e),"_t5",!1),n(r(e),"_t2",!1),n(r(e),"_t3",!1),e}o(e,t);var s=e.prototype;return s.onLoad=function(){c.on(u.EventType.KEY_DOWN,this.keyDown,this)},s.keyDown=function(t){switch(t.keyCode){case m.KEY_E:this.saveMap();break;case m.KEY_R:this.readMap()}},s.saveMap=function(){var t=this,e="id,预设,位置旋转缩放,其他\nnumber,string,string,string\nid,name,pos,other\n";e+=this.writeMapInfo(this.node);var o=window.cce.project;o.replace("\\"," / ");var i=o+"/"+Y,r=require("fs"),n=function(){r.writeFile(i+"map"+t.mapNameSave+".csv",e,(function(e){e?(console.warn("失败 关卡解锁: "+t.mapNameSave),console.error("error",e)):console.warn("成功 关卡解锁: "+t.mapNameSave),t._isFinish1=!0}))};r.exists(i,(function(t){t?n():r.mkdir(i,(function(t){t?console.log("创建目录 失败 "+t):(console.log("创建目录 成功 "+i),n())}))}))},s.writeMapInfo=function(t){for(var e="",o=0;o<t.children.length;o++){var i=t.children[o],r=i.name;r=r.split("-")[0];var n=this.getPosRotScal(i,!0),a="";switch(r){case N.map_boss:var s=i.getComponent(_);a=s.bossType+"|"+s.moveType;break;case N.map_player:var p=i.getComponent(b);a=p.playerCount+"|"+this.colorToString(p.ballColor)}e+=o+1+',"'+r+'","'+n+'","'+a+'"\n'}return e},s.getPosRotScal=function(t,e,o){return void 0===e&&(e=!0),e?this.vec3ToString(t.getWorldPosition())+"|"+this.vec3ToString(t.eulerAngles)+"|"+this.vec3ToString(t.getWorldScale()):this.vec3ToString(t.getPosition())+"|"+this.vec3ToString(t.eulerAngles)+"|"+this.vec3ToString(t.getScale())},s.readMap=function(){var t=this;this.mapNameSave=this.mapNameLoad,this.node.destroyAllChildren();var e=window.cce.project;e.replace("\\"," / ");var o=e+"/"+Y+"map"+this.mapNameLoad+".csv";require("fs").readFile(o,"utf-8",(function(e,o){if(e)return console.error("失败 关卡-解锁："+t.mapNameLoad+" error:"+e);console.warn("成功 关卡-解锁："+t.mapNameLoad+" error:"+t.mapNameLoad),t.readMapData(o),t._isFinish2=!0}))},s.readMapData=function(t){var e=t.split("\n");e=this.deleteUselessData(e),console.log("场景元素数据dataList-1",e);for(var o=3;e[o];){var i=e[o].split("''")[0];console.log("场景元素数据dataList-2",i),i=i.split('"'),i=this.deleteUselessData2(i),console.log("场景元素数据dataList-3",i);var r=i[1],n=i[2],a=i[3],s=this.instantiateNd(r);switch(s.parent=this.node,this.setNdPosRotScaleByDate(s,n,!0),r){case N.map_boss:var p=s.getComponent(_);p.bossType=Number(a.split("|")[0]),p.moveType=Number(a.split("|")[1]),s.getComponent(_).addBoss();break;case N.map_player:var l=s.getComponent(b);l.playerCount=Number(a.split("|")[0]),l.ballColor=this.stringToColor(a.split("|")[1])}o++}},s.deleteUselessData=function(t){for(var e=t.length-1;e>-1;e--)0!==t[e].length&&","!==t[e]||t.splice(e,1);return t},s.deleteUselessData2=function(t){for(var e=t.length-1;e>-1;e--)","!==t[e]&&(0!==t[e].length||e!=t.length-1&&0!=e)||t.splice(e,1);return t},s.stringToVec3=function(t){var e=t.split(",");return e.length<=2?new d(Number(e[0]),0,Number(e[1])):new d(Number(e[0]),Number(e[1]),Number(e[2]))},s.vec3ToString=function(t,e,o){return void 0===e&&(e=!1),void 0===o&&(o=3),e?Number(t.x.toFixed(o))+","+Number(t.z.toFixed(o)):Number(t.x.toFixed(o))+","+Number(t.y.toFixed(o))+","+Number(t.z.toFixed(o))},s.colorToString=function(t){return t.r+","+t.g+","+t.b+","+t.a},s.stringToColor=function(t){var e=t.split(",");return h(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3]))},s.setNdPosRotScaleByDate=function(t,e,o){void 0===o&&(o=!0);var i=e.split("|"),r=this.stringToVec3(i[0]),n=this.stringToVec3(i[1]),a=this.stringToVec3(i[2]);o?(t.worldPosition=r,t.eulerAngles=n,t.worldScale=a):(t.position=r,t.eulerAngles=n,t.scale=a)},s.instantiateNd=function(t,e){this.mapItem.getChildByName(t)||(console.warn("错误 在mapItem中找不到 "+t),console.error("error"));var o=y(this.mapItem.getChildByName(t));return o.parent=e||this.node,o},a(e,[{key:"getMapData",get:function(){return this._isFinish1},set:function(t){this._isFinish1!=t&&(this._isFinish1=t,console.log("开始计算"),this.saveMap())}},{key:"setMapData",get:function(){return this._isFinish2},set:function(t){this._isFinish2!=t&&(this._isFinish2=t,console.log("开始计算"),this.readMap())}},{key:"t1",get:function(){return this._t1},set:function(t){this._t1!=t&&(this._t1=t,this.node.getChildByName(N.map_ground)||(this.instantiateNd(N.map_ground).position=g()))}},{key:"t4",get:function(){return this._t4},set:function(t){this._t4!=t&&(this._t4=t,this.node.getChildByName(N.map_player)||(this.instantiateNd(N.map_player).position=g()))}},{key:"t5",get:function(){return this._t5},set:function(t){if(this._t5!=t){this._t5=t;var e=this.instantiateNd(N.map_boss);e.position=g(),e.getComponent(_).addBoss()}}},{key:"t2",get:function(){return this._t2},set:function(t){this._t2!=t&&(this._t2=t,this.instantiateNd(N.map_number_wall).position=g())}},{key:"t3",get:function(){return this._t3},set:function(t){this._t3!=t&&(this._t3=t,this.instantiateNd(N.map_wall).position=g())}},{key:"mapItem",get:function(){var t;return null===(t=f.getScene())||void 0===t?void 0:t.getChildByName("mapItem")}}]),e}(v)).prototype,"test1",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"导出关卡——关卡分栏"}}),A=e(E.prototype,"mapNameSave",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(E.prototype,"getMapData",[T],Object.getOwnPropertyDescriptor(E.prototype,"getMapData"),E.prototype),R=e(E.prototype,"test2",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"加载关卡——关卡分栏"}}),V=e(E.prototype,"mapNameLoad",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(E.prototype,"setMapData",[L],Object.getOwnPropertyDescriptor(E.prototype,"setMapData"),E.prototype),K=e(E.prototype,"test3",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"创建节点——关卡分栏"}}),U=e(E.prototype,"test4",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"----------------------"}}),e(E.prototype,"t1",[k],Object.getOwnPropertyDescriptor(E.prototype,"t1"),E.prototype),e(E.prototype,"t4",[O],Object.getOwnPropertyDescriptor(E.prototype,"t4"),E.prototype),e(E.prototype,"t5",[B],Object.getOwnPropertyDescriptor(E.prototype,"t5"),E.prototype),e(E.prototype,"t2",[z],Object.getOwnPropertyDescriptor(E.prototype,"t2"),E.prototype),e(E.prototype,"t3",[j],Object.getOwnPropertyDescriptor(E.prototype,"t3"),E.prototype),x=E))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/NumberWall.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GamePrefabs.ts","./FlMath.ts","./Behavior3D.ts","./FLGloable.ts","./GameState.ts","./GameEvenEnum.ts","./NumberTool.ts"],(function(e){"use strict";var t,l,i,a,r,s,n,o,u,c,h,f,b,m,p,B;return{setters:[function(e){t=e.defineProperty,l=e.inheritsLoose,i=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,s=e.MeshRenderer,n=e.BoxCollider,o=e.v3,u=e.Node},function(e){c=e.GamePrefabs},function(e){h=e.default},function(e){f=e.Behavior3D},function(e){b=e.FLGloable},function(e){m=e.EBuffType},function(e){p=e.GameEvenEnum},function(e){B=e.NumberTool}],execute:function(){var T,C,y;a._RF.push({},"3e008JbyX5MPa6PPO/CafcW","NumberWall",void 0);var k=r.ccclass;r.property,e("NumberWall",k("NumberWall")((y=C=function(e){function a(){for(var l,a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return l=e.call.apply(e,[this].concat(r))||this,t(i(l),"isInit",!1),t(i(l),"leftBlock",null),t(i(l),"rightBlock",null),t(i(l),"centerBlock",null),t(i(l),"centerMat",null),t(i(l),"numberRoot",null),t(i(l),"isChangeBall",!1),t(i(l),"ballColor",null),t(i(l),"ballScale",null),t(i(l),"boxCom",null),t(i(l),"buffType",0),t(i(l),"buffValue",0),t(i(l),"throughNum",0),t(i(l),"curNumText",null),t(i(l),"numberScript",null),l}l(a,e);var r=a.prototype;return r.onLoad=function(){this.leftBlock=this.node.getChildByName("leftBlock"),this.rightBlock=this.node.getChildByName("rightBlock"),this.centerBlock=this.node.getChildByName("centerBlock"),this.centerMat=this.centerBlock.children[0].getComponent(s).material,this.numberRoot=this.node.getChildByName("numberRoot"),this.boxCom=this.centerBlock.getComponent(n),this.centerBlock.on(p.E_DoorAction,this.onEnterDoor,this)},r.init=function(e,t,l,i,a){this.centerBlock.scale=e,this.leftBlock.position=o(-e.x/2+.09,0,0),this.rightBlock.position=o(e.x/2-.09,0,0),this.centerMat.setProperty("mainColor",t),this.isChangeBall=!!i,this.ballColor=i,this.ballScale=a;var r=h.deepClone_SlapKing_(l);this.curNumText=r;var s=r.substring(0,1);switch(this.buffValue=Number(r.slice(1)),s){case"+":this.buffType=m.ADD;break;case"-":this.buffType=m.CUT;break;case"x":this.buffType=m.MULTIPLY;break;case"*":this.buffType=m.MULTIPLY2;break;case"/":this.buffType=m.EXCEPT}this.isInit=!0;var n=new u;n.parent=this.node;var f=n.addComponent(B);f.setNumber(this.buffType,this.buffValue,c.getInstance().res.dj4_number),this.numberScript=f},r.getNumberWallDate=function(){var e=[];return e.push(this.curNumText),e.push(this.ballColor),e.push(this.ballScale),e},r.resetNumberWall=function(e,t,l){var i=e.substring(0,1);switch(this.buffValue=Number(e.slice(1)),i){case"+":this.buffType=m.ADD;break;case"-":this.buffType=m.CUT;break;case"x":this.buffType=m.MULTIPLY;break;case"*":this.buffType=m.MULTIPLY2;break;case"/":this.buffType=m.EXCEPT}this.numberScript.node.destroyAllChildren(),this.numberScript.setNumber(this.buffType,this.buffValue,c.getInstance().res.dj4_number)},r.onEnterDoor=function(e){switch(this.throughNum+=1,this.ballScale&&(e.scale=o(this.ballScale,this.ballScale,this.ballScale)),this.ballColor&&(b.ballCloneMaterial.setProperty("mainColor",this.ballColor),b.ballCloneMaterial.setProperty("emissive",this.ballColor),e.children[0].getComponent(s).material=b.ballCloneMaterial),this.buffType){case m.ADD:e.emit(p.E_BallAction,"enterDoorCallBack",this.buffType,!1,[this.centerBlock.uuid,Math.ceil(this.buffValue/100)]);break;case m.CUT:this.buffValue-=1,e.emit(p.E_BallAction,"enterDoorCallBack",this.buffType,this.buffValue>0);break;case m.MULTIPLY:e.emit(p.E_BallAction,"enterDoorCallBack",this.buffType,!1,this.buffValue);break;case m.MULTIPLY2:e.emit(p.E_BallAction,"enterDoorCallBack",this.buffType,!1,[this.centerBlock.uuid,this.buffValue]);break;case m.EXCEPT:e.emit(p.E_BallAction,"enterDoorCallBack",this.buffType,this.throughNum%this.buffType!=0)}},r.onDisabled=function(){},r.update=function(){},a}(f),t(C,"newBallMaterial",null),T=y))||T);a._RF.pop()}}}));

System.register("chunks:///_virtual/MapLevelVo.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"3e06cv8yAFAkp4dOOt8Cl6z","MapLevelVo",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Ball_10001.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./BallBase.ts"],(function(t){"use strict";var e,r,n,s;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator},function(t){s=t.BallBase}],execute:function(){var c;r._RF.push({},"42bb83fIQRDeJQzrSzFmuG3","Ball_10001",void 0);var l=n.ccclass;n.property,t("ball_10001",l(c=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r}(s))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/CameraScript.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Vec3Util.ts","./Behavior3D.ts","./FLGloable.ts","./GameState.ts","./GameEvenEnum.ts"],(function(t){"use strict";var i,e,n,o,s,a,r,c,h,l,u,d,p;return{setters:[function(t){i=t.inheritsLoose,e=t.defineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.Vec3,r=t.v3,c=t.Camera},function(t){h=t.Vec3Util},function(t){l=t.Behavior3D},function(t){u=t.FLGloable},function(t){d=t.ECameraState},function(t){p=t.GameEvenEnum}],execute:function(){var f;o._RF.push({},"558219OtYhEY6ILHsW4pQPT","CameraScript",void 0);var g=s.ccclass;s.property,t("CameraScript",g("CameraScript")(f=function(t){function o(){for(var i,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,e(n(i),"curState",1),e(n(i),"initPosition",void 0),e(n(i),"initAngle",void 0),e(n(i),"subCameraAndPlayer",void 0),e(n(i),"initFieldOfView",void 0),e(n(i),"lockTargetNd",void 0),e(n(i),"isInit",!1),i}i(o,t);var s=o.prototype;return s.onLoad=function(){},s.onEnabled=function(){this.registerEvent(p.CAMERA_CHANGE_STATE,this.onStateChange,this)},s.onStateChange=function(t,i){switch(this.curState=t,t){case d.DAIJI:this.isInit=!1;break;case d.FLOOW:this.isInit=!0;break;case d.UNLOCK:case d.STOP:this.isInit=!1}},s.resetCamera=function(){this.curState==d.DAIJI&&(this.node.worldPosition=a.add(r(),u.player.worldPosition,this.subCameraAndPlayer))},s.init=function(){this.initPosition||(this.lockTargetNd=u.player,this.initPosition=this.node.position.clone(),this.initAngle=this.node.eulerAngles.clone(),this.initFieldOfView=this.node.getComponent(c).fov,this.subCameraAndPlayer=a.subtract(r(),this.node.worldPosition,this.lockTargetNd.position)),this.node.position=this.initPosition,this.node.eulerAngles=this.initAngle,this.node.getComponent(c).fov=this.initFieldOfView,this.curState=d.FLOOW,this.isInit=!0},s.update=function(){if(this.isInit)switch(this.curState){case d.DAIJI:break;case d.FLOOW:if(!this.lockTargetNd||!this.lockTargetNd.parent)return;this.flowTarget(this.lockTargetNd,this.subCameraAndPlayer);break;case d.STOP:}},s.flowTarget=function(t,i,e){void 0===e&&(e=.5),this.node.position=h.lerpVec3(this.node.position,r(t.position.x+i.x,t.position.y+i.y,t.position.z+i.z),e)},s.onDisabled=function(){},o}(l))||f);o._RF.pop()}}}));

System.register("chunks:///_virtual/GameState.ts",["cc"],(function(E){"use strict";var e;return{setters:[function(E){e=E.cclegacy}],execute:function(){var o,t,n,I,L,r;E({EBloodType:void 0,EBuffType:void 0,ECameraState:void 0,ECanColliderGroup:void 0,EColliderGroup:void 0,EState:void 0}),e._RF.push({},"55f98YfSWFJn6pd7scjZTN9","GameState",void 0),function(E){E[E.DAIJI=0]="DAIJI",E[E.MOVE=1]="MOVE",E[E.DIED=2]="DIED"}(o||(o=E("EState",{}))),function(E){E[E.DAIJI=0]="DAIJI",E[E.FLOOW=1]="FLOOW",E[E.UNLOCK=2]="UNLOCK",E[E.STOP=3]="STOP"}(t||(t=E("ECameraState",{}))),function(E){E[E.PLAYER=0]="PLAYER",E[E.GREEN=1]="GREEN",E[E.RED=2]="RED"}(n||(n=E("EBloodType",{}))),function(E){E[E.player=1]="player",E[E.wall=2]="wall",E[E.end_wall=4]="end_wall",E[E.monster=8]="monster",E[E.monsterBoss=16]="monsterBoss"}(I||(I=E("EColliderGroup",{}))),function(E){E[E.PLAYER=16]="PLAYER",E[E.PLAYER_SOLDIER=18]="PLAYER_SOLDIER",E[E.ENEMY_SOLDIER=28]="ENEMY_SOLDIER",E[E.ENEMY_LIMIT=8]="ENEMY_LIMIT",E[E.OUT_LIMIT=16]="OUT_LIMIT"}(L||(L=E("ECanColliderGroup",{}))),function(E){E[E.ADD=1]="ADD",E[E.CUT=2]="CUT",E[E.MULTIPLY=3]="MULTIPLY",E[E.MULTIPLY2=4]="MULTIPLY2",E[E.EXCEPT=5]="EXCEPT"}(r||(r=E("EBuffType",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/EBossSkill.ts",["cc"],(function(L){"use strict";var s;return{setters:[function(L){s=L.cclegacy}],execute:function(){var t;L("EBossSkill",void 0),s._RF.push({},"566f8LnV99DvKEt7oja0n+L","EBossSkill",void 0),function(L){L[L.SKILL_FIRE=1]="SKILL_FIRE",L[L.SKILL_LIGHTNING=2]="SKILL_LIGHTNING",L[L.SKILL_BALL=3]="SKILL_BALL"}(t||(t=L("EBossSkill",{}))),s._RF.pop()}}}));

System.register("chunks:///_virtual/LevelToolNumWall.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,l,r,a,i,n,o,u,s,c,p,y,m,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,l=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.defineProperty,n=e.createClass},function(e){o=e.cclegacy,u=e._decorator,s=e.Color,c=e.CCString,p=e.CCInteger,y=e.color,m=e.instantiate,f=e.director,h=e.Component}],execute:function(){var b,g,d,v,C,w,N,B,I,V,_,z;o._RF.push({},"5ce42dkqQBEIb9GIvtTaz5J","LevelToolNumWall",void 0);var L=u.ccclass,T=u.property;e("LevelToolNumWall",(b=L("LevelToolNumWall"),g=T({type:s,displayName:"面片颜色"}),d=T({type:c,displayName:"数字"}),v=T({type:Boolean,displayName:"是否改变球颜色"}),C=T({type:s,displayName:"穿过-球颜色",visible:function(){return this.isChangeBall}}),w=T({type:p,displayName:"穿过-球缩放",visible:function(){return this.isChangeBall}}),b((I=t((B=function(e){function t(){for(var t,l=arguments.length,n=new Array(l),o=0;o<l;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,r(a(t),"wallColor",I,a(t)),i(a(t),"_wallValue","+100"),r(a(t),"isChangeBall",V,a(t)),r(a(t),"ballColor",_,a(t)),r(a(t),"ballScale",z,a(t)),t}l(t,e);var o=t.prototype;return o.setValue=function(){},o.instantiateNd=function(e,t){this.mapItem.getChildByName(e)||(console.warn("错误 在mapItem中找不到 "+e),console.error("error"));var l=m(this.mapItem.getChildByName(e));return l.parent=t||this.node,l},n(t,[{key:"wallValue",get:function(){return this._wallValue},set:function(e){this._wallValue!=e&&(this._wallValue=e,this.setValue())}},{key:"mapItem",get:function(){var e;return null===(e=f.getScene())||void 0===e?void 0:e.getChildByName("mapItem")}}]),t}(h)).prototype,"wallColor",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y()}}),t(B.prototype,"wallValue",[d],Object.getOwnPropertyDescriptor(B.prototype,"wallValue"),B.prototype),V=t(B.prototype,"isChangeBall",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=t(B.prototype,"ballColor",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y()}}),z=t(B.prototype,"ballScale",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),N=B))||N));o._RF.pop()}}}));

System.register("chunks:///_virtual/TweenUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,i,o,r,a,c,l,s,u,p,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.defineProperty},function(e){a=e.cclegacy,c=e._decorator,l=e.CCInteger,s=e.tween,u=e.Tween,p=e.v3,h=e.Component}],execute:function(){var f,w,y,b,d,g,v;a._RF.push({},"60e85QEr5hFupfYofCKbbDf","TweenUI",void 0);var P,T=c.ccclass,S=c.property;!function(e){e[e.BREATHE=1]="BREATHE",e[e.POPUP=2]="POPUP"}(P||(P={}));e("TweenUI",(f=T("TweenUI"),w=S({type:l,tooltip:"缓动类型"}),y=S({type:l,tooltip:"缓动变化值"}),f((g=t((d=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return t=e.call.apply(e,[this].concat(a))||this,i(o(t),"tweenNum",g,o(t)),i(o(t),"tweenRatio",v,o(t)),r(o(t),"initScale",void 0),r(o(t),"targetScale",void 0),t}n(t,e);var a=t.prototype;return a.onLoad=function(){this.initScale=this.node.scale.clone(),this.targetScale=this.initScale.clone().multiplyScalar(this.tweenRatio)},a.onEnable=function(){switch(this.tweenNum){case P.BREATHE:this.breathe(this.node);break;case P.POPUP:this.popUp(this.node)}},a.breathe=function(e){var t=this;s(e).delay(1).to(1,{scale:this.targetScale}).call((function(){s(e).to(1,{scale:t.initScale}).start()})).union().repeatForever().start()},a.onDisable=function(){u.stopAllByTarget(this.node)},a.popUp=function(e){s(e).to(2,{position:p(0,90,0)},{easing:"backIn"}).start()},t}(h)).prototype,"tweenNum",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=t(d.prototype,"tweenRatio",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.2}}),b=d))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/FollowMovement.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,o,n,r,s,a,l,p,u,c,d,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.defineProperty,s=t.createClass},function(t){a=t.cclegacy,l=t._decorator,p=t.Node,u=t.CCFloat,c=t.v3,d=t.Vec3,h=t.Component}],execute:function(){var y,f,b,g,m,w,L,v,z,N,R,C,P,F,S,k,x;a._RF.push({},"62c6bYOT19FwoeFRC6pb+RK","FollowMovement",void 0);var M=l.ccclass,_=l.property;t("FollowMovement",(y=M("FollowMovement"),f=_({type:p,displayName:"跟随目标节点"}),b=_({type:u,displayName:"目标移动多远记录一次距离"}),g=_({type:u,displayName:"记录还剩多少时停止移动"}),m=_({type:u,displayName:"走速度"}),w=_({type:u,displayName:"跑速度"}),L=_({type:u,displayName:"速度变化的缓动率"}),v=_({type:u,displayName:"距离目标多远后开始跑（单位是List的Item数）"}),y((R=e((N=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,o(n(e),"targetNd",R,n(e)),o(n(e),"recordGap",C,n(e)),o(n(e),"stopCount",P,n(e)),o(n(e),"walkSpeed",F,n(e)),o(n(e),"runSpeed",S,n(e)),o(n(e),"speedLerpRant",k,n(e)),o(n(e),"startRunCount",x,n(e)),r(n(e),"posList",[]),r(n(e),"velocity",c()),e}i(e,t);var a=e.prototype;return a.onLoad=function(){},a.update=function(){if(this.targetNd){for(;this.posList.length>0&&d.distance(c(this.node.worldPosition.x,0,this.node.worldPosition.z),c(this.posList[0].x,0,this.posList[0].z))<this.recordGap;)this.posList.shift();this.posList.length>0?(d.distance(this.targetNd.worldPosition,this.posList[this.posList.length-1])>this.recordGap&&this.posList.push(this.targetNd.worldPosition.clone()),this.posList.length>this.stopCount?this.velocity=c(this.posList[0].x-this.node.worldPosition.x,0,this.posList[0].z-this.node.worldPosition.z).normalize().multiplyScalar(this.walkSpeed):this.velocity=d.lerp(c(),this.velocity,d.ZERO,this.speedLerpRant),this.node.translate(this.velocity,1)):this.posList.push(this.targetNd.worldPosition.clone())}},a.onDisable=function(){this.posList=[]},s(e,[{key:"isRunning",get:function(){return this.posList.length>this.startRunCount}}]),e}(h)).prototype,"targetNd",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(N.prototype,"recordGap",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),P=e(N.prototype,"stopCount",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),F=e(N.prototype,"walkSpeed",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),S=e(N.prototype,"runSpeed",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),k=e(N.prototype,"speedLerpRant",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),x=e(N.prototype,"startRunCount",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),z=N))||z));a._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterTool.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,r,i,n,a,s,l,p,c,d,h,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.defineProperty,i=e.assertThisInitialized,n=e.initializerDefineProperty,a=e.createClass},function(e){s=e.cclegacy,l=e._decorator,p=e.Vec3,c=e.v3,d=e.SkeletalAnimation,h=e.Node,y=e.Component}],execute:function(){var u,f,g,m,N,P,b,w,S,v,C,O,A,D,R,k,z;s._RF.push({},"64416bYTsRFKrQQtnfuHrwm","MonsterTool",void 0);var H=l.ccclass,I=l.property;e("MonsterTool",(u=H("MonsterTool"),f=I({type:p,displayName:"排布属性"}),g=I({displayName:"当前节点下宠物节点排布"}),m=I({tooltip:"播放动作名称,不填则播放默认动作"}),N=I({displayName:"当前节点下宠物动作"}),P=I({displayName:"创建宠物节点1-20"}),b=I({displayName:"更改子节点名字为rw"}),w=I({displayName:"增加血量节点"}),S=I({displayName:"宠物阶数"}),v=I({displayName:"宠物缩放倍数"}),C=I({displayName:"调整宠物大小"}),u((D=t((A=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,r(i(t),"isSort",!0),r(i(t),"isPlayAni",!0),r(i(t),"isCreatPet",!0),r(i(t),"isChangeName",!0),r(i(t),"isAddHpRoot",!0),r(i(t),"isPetScale",!0),n(i(t),"sortInfo",D,i(t)),n(i(t),"aniName",R,i(t)),n(i(t),"petOrder",k,i(t)),n(i(t),"petScale",z,i(t)),t}o(t,e);var s=t.prototype;return s.updateNodeSort=function(){for(var e=0;e<this.node.children.length;e++){this.node.children[e].position=c(e%this.sortInfo.z*this.sortInfo.x,0,Math.floor(e/this.sortInfo.z)*this.sortInfo.y)}},s.playNdAni=function(){for(var e=0;e<this.node.children.length;e++){var t=this.node.children[e].getComponentsInChildren(d);if(t&&t[0]){var o=this.aniName;""==o&&(o=t[0].defaultClip.name),console.log("播放成功",o),t[0].play(o)}}},s.start=function(){},a(t,[{key:"nodeSort",get:function(){return!this.isSort},set:function(e){this.isSort=!1,this.updateNodeSort()}},{key:"playAni",get:function(){return!this.isPlayAni},set:function(e){this.isPlayAni=!1,this.playNdAni(),console.log("当前节点下宠物动作")}},{key:"creatPet",get:function(){return!this.isCreatPet},set:function(e){this.isCreatPet=!1;for(var t=1;t<=20;t++)for(var o=1;o<=3;o++){var r=100*(1e3+t)+o;this.node.addChild(new h(r.toString()))}console.log("创建宠物节点1-20")}},{key:"changeName",get:function(){return!this.isChangeName},set:function(e){this.isChangeName=!1;for(var t=0;t<this.node.children.length;t++)this.node.children[t].children[0].name="rw",this.node.children[t].children[0].position=c();console.log("更改子节点名字为rw")}},{key:"addHpRoot",get:function(){return!this.isAddHpRoot},set:function(e){this.isAddHpRoot=!1;for(var t=0;t<this.node.children.length;t++)this.node.children[t].getChildByName("blood")||this.node.children[t].addChild(new h("blood"));console.log("增加血量节点")}},{key:"changePetScale",get:function(){return!this.isPetScale},set:function(e){this.isPetScale=!1;for(var t=0;t<this.node.children.length;t++)if(this.node.children[t].getChildByName("rw")&&Number(this.node.children[t].name.split("_")[1])%10==this.petOrder){var o=this.node.children[t].getChildByName("rw").scale.x*this.petScale;o=Math.floor(100*o)/100,this.node.children[t].getChildByName("rw").scale=c(o,o,o)}console.log("调整宠物大小")}}]),t}(y)).prototype,"sortInfo",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c(5,3,3)}}),t(A.prototype,"nodeSort",[g],Object.getOwnPropertyDescriptor(A.prototype,"nodeSort"),A.prototype),R=t(A.prototype,"aniName",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(A.prototype,"playAni",[N],Object.getOwnPropertyDescriptor(A.prototype,"playAni"),A.prototype),t(A.prototype,"creatPet",[P],Object.getOwnPropertyDescriptor(A.prototype,"creatPet"),A.prototype),t(A.prototype,"changeName",[b],Object.getOwnPropertyDescriptor(A.prototype,"changeName"),A.prototype),t(A.prototype,"addHpRoot",[w],Object.getOwnPropertyDescriptor(A.prototype,"addHpRoot"),A.prototype),k=t(A.prototype,"petOrder",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=t(A.prototype,"petScale",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),t(A.prototype,"changePetScale",[C],Object.getOwnPropertyDescriptor(A.prototype,"changePetScale"),A.prototype),O=A))||O));s._RF.pop()}}}));

System.register("chunks:///_virtual/FreeFlightCamera.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,i,n,r,s,a,h,c,p,l,y,u,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,r=e.defineProperty},function(e){s=e.cclegacy,a=e._decorator,h=e.math,c=e.KeyCode,p=e.CCFloat,l=e.systemEvent,y=e.SystemEvent,u=e.game,d=e.Component}],execute:function(){var v,f,_,S,m,C,T,E,g,k,x,w;s._RF.push({},"6c841mU+4JNvqwHy5tJsJh0","FreeFlightCamera",void 0);var z=a.ccclass,A=a.property,F=a.menu,U=h.Vec2,b=h.Vec3,D=h.Quat,L=new U,O=new U,H=new b,K=new D,M="W".charCodeAt(0),P="S".charCodeAt(0),W="A".charCodeAt(0),N="D".charCodeAt(0),R="Q".charCodeAt(0),Y="E".charCodeAt(0),Q=c.SHIFT_LEFT;e("FreeFlightCamera",(v=z("FreeFlightCamera"),f=F("game/camera/FreeFlightCamera"),_=A({type:p,tooltip:"移动速度"}),S=A({type:p,tooltip:"按Shift键后的速度"}),m=A({type:p,slide:!0,range:[.05,.5,.01],tooltip:"移动后惯性效果"}),C=A({type:p,tooltip:"旋转速度"}),v(T=f((g=t((E=function(e){function t(){for(var t,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,i(n(t),"moveSpeed",g,n(t)),i(n(t),"moveSpeedShiftScale",k,n(t)),i(n(t),"damp",x,n(t)),i(n(t),"rotateSpeed",w,n(t)),r(n(t),"_euler",new b),r(n(t),"_velocity",new b),r(n(t),"_position",new b),r(n(t),"_speedScale",1),t}o(t,e);var s=t.prototype;return s.onLoad=function(){l.on(y.EventType.MOUSE_WHEEL,this.onMouseWheel,this),l.on(y.EventType.KEY_DOWN,this.onKeyDown,this),l.on(y.EventType.KEY_UP,this.onKeyUp,this),l.on(y.EventType.TOUCH_START,this.onTouchStart,this),l.on(y.EventType.TOUCH_MOVE,this.onTouchMove,this),l.on(y.EventType.TOUCH_END,this.onTouchEnd,this),b.copy(this._euler,this.node.eulerAngles),b.copy(this._position,this.node.position)},s.onDestroy=function(){l.off(y.EventType.MOUSE_WHEEL,this.onMouseWheel,this),l.off(y.EventType.KEY_DOWN,this.onKeyDown,this),l.off(y.EventType.KEY_UP,this.onKeyUp,this),l.off(y.EventType.TOUCH_START,this.onTouchStart,this),l.off(y.EventType.TOUCH_MOVE,this.onTouchMove,this),l.off(y.EventType.TOUCH_END,this.onTouchEnd,this)},s.update=function(e){b.transformQuat(H,this._velocity,this.node.rotation),b.scaleAndAdd(this._position,this._position,H,this.moveSpeed*this._speedScale),b.lerp(H,this.node.position,this._position,e/this.damp),this.node.setPosition(H),D.fromEuler(K,this._euler.x,this._euler.y,this._euler.z),D.slerp(K,this.node.rotation,K,e/this.damp),this.node.setRotation(K)},s.onMouseWheel=function(e){var t=-e.getScrollY()*this.moveSpeed*.1;b.transformQuat(H,b.UNIT_Z,this.node.rotation),b.scaleAndAdd(this._position,this.node.position,H,t)},s.onKeyDown=function(e){var t=this._velocity;e.keyCode===Q?this._speedScale=this.moveSpeedShiftScale:e.keyCode===M?0===t.z&&(t.z=-1):e.keyCode===P?0===t.z&&(t.z=1):e.keyCode===W?0===t.x&&(t.x=-1):e.keyCode===N?0===t.x&&(t.x=1):e.keyCode===R?0===t.y&&(t.y=-1):e.keyCode===Y&&0===t.y&&(t.y=1)},s.onKeyUp=function(e){var t=this._velocity;e.keyCode===Q?this._speedScale=1:e.keyCode===M?t.z<0&&(t.z=0):e.keyCode===P?t.z>0&&(t.z=0):e.keyCode===W?t.x<0&&(t.x=0):e.keyCode===N?t.x>0&&(t.x=0):e.keyCode===R?t.y<0&&(t.y=0):e.keyCode===Y&&t.y>0&&(t.y=0)},s.onTouchStart=function(e){u.canvas.requestPointerLock&&u.canvas.requestPointerLock()},s.onTouchMove=function(e){e.getStartLocation(L),L.x>.4*u.canvas.width?(e.getDelta(O),this._euler.y-=O.x*this.rotateSpeed*.1,this._euler.x+=O.y*this.rotateSpeed*.1):(e.getLocation(O),U.subtract(O,O,L),this._velocity.x=.01*O.x,this._velocity.z=.01*-O.y)},s.onTouchEnd=function(e){document.exitPointerLock&&document.exitPointerLock(),e.getStartLocation(L),L.x<.4*u.canvas.width&&(this._velocity.x=0,this._velocity.z=0)},t}(d)).prototype,"moveSpeed",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),k=t(E.prototype,"moveSpeedShiftScale",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),x=t(E.prototype,"damp",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),w=t(E.prototype,"rotateSpeed",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),T=E))||T)||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/GamePanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIManager.ts","./GamePageEnum.ts","./Behavior3D.ts"],(function(n){"use strict";var e,t,a,o,i,u;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,a=n._decorator},function(n){o=n.uiManager},function(n){i=n.GamePageEnum},function(n){u=n.Behavior3D}],execute:function(){var c;t._RF.push({},"6d84aKLi/BEKq6HRgciUmZZ","GamePanel",void 0);var s=a.ccclass;a.property,n("GamePanel",s("GamePanel")(c=function(n){function t(){return n.apply(this,arguments)||this}e(t,n);var a=t.prototype;return a.show=function(){},a.onEnabled=function(){},a.update=function(n){},a.showDebugPanel=function(){o.instance.showDialog(i.PAGE_DEBUG)},a.onDisabled=function(){this.unscheduleAllCallbacks()},t}(u))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/EBossState.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var s;t("EBossState",void 0),e._RF.push({},"6fdc4YkqZRK8a3A4wexSwIr","EBossState",void 0),function(t){t.IDLE="idle",t.HIT="hit",t.ATTACK="attack",t.DIED="died"}(s||(s=t("EBossState",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/NumberTool.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameState.ts"],(function(e){"use strict";var t,r,i,n,o,s,a,u,l,p,f,h,c,m,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.defineProperty},function(e){s=e.cclegacy,a=e._decorator,u=e.CCInteger,l=e.Prefab,p=e.Enum,f=e.v4,h=e.instantiate,c=e.MeshRenderer,m=e.Component},function(e){b=e.EBuffType}],execute:function(){var y,g,P,v,N,T,w,d;s._RF.push({},"70a443B9aNPIp+p/uhlebsf","NumberTool",void 0);var M=a.ccclass,C=a.property;e("NumberTool",(y=C({type:u,displayName:"设置数字"}),g=C({type:l,displayName:"数字面片预制体"}),P=C({type:p(b),displayName:"数字运算类型"}),M((T=t((N=function(e){function t(){for(var t,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,i(n(t),"showNumber",T,n(t)),i(n(t),"numPerfab",w,n(t)),i(n(t),"styleType",d,n(t)),o(n(t),"seperate",.32),o(n(t),"numTilingOffset",[f(1,1,0,0),f(1,1,0,.25),f(1,1,0,.5),f(1,1,0,.75),f(1,1,.25,0),f(1,1,.25,.25),f(1,1,.25,.5),f(1,1,.25,.75),f(1,1,.5,0),f(1,1,.5,.25),f(1,1,.5,.5),f(1,1,.5,.75),f(1,1,.75,0),f(1,1,.75,.25)]),t}r(t,e);var s=t.prototype;return s.start=function(){},s.setNumber=function(e,t,r){this.showNumber=t,this.numPerfab=r;for(var i=0,n=[];this.showNumber>0&&Math.floor(this.showNumber/10)>=0;){var o=this.showNumber%10;this.showNumber=Math.floor(this.showNumber/10);var s=h(this.numPerfab);s.parent=this.node,n.push(s),s.getComponent(c).material.setProperty("tilingOffset",this.numTilingOffset[o]),i++}var a=10;switch(e){case b.ADD:a=11;break;case b.CUT:a=12;break;case b.MULTIPLY:case b.MULTIPLY2:a=10;break;case b.EXCEPT:a=13}var u=h(this.numPerfab);u.parent=this.node,u.getComponent(c).material.setProperty("tilingOffset",this.numTilingOffset[a]),i++,console.log("加上运算符，总位数为:",i);for(var l=Math.floor(i%2)?0:this.seperate/2,p=0;p<n.length;p++){var f=(Math.floor(i/2)-p)*this.seperate-l,m=n[p].getPosition();m.x=f,n[p].setPosition(m)}var y=n[n.length-1].getPosition();y.x=y.x-this.seperate,u.setPosition(y)},t}(m)).prototype,"showNumber",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),w=t(N.prototype,"numPerfab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(N.prototype,"styleType",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return b.ADD}}),v=N))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/light.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,o,r,i,c,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.tween,i=t.Vec3,c=t.Tween,s=t.Component}],execute:function(){var u;n._RF.push({},"7e2ccEfNzhPb4zApJrc03Zv","light",void 0);var l=o.ccclass;o.property,t("Light",l("Light")(u=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.onEnable=function(){var t=this;r(this.node).to(4,{eulerAngles:new i(0,0,-360)}).call((function(){t.node.setRotationFromEuler(0,0,0)})).union().repeatForever().start()},o.onDisable=function(){c.stopAllByTarget(this.node)},n}(s))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/FLGloable.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./FLStore.ts","./EBossSkill.ts"],(function(l){"use strict";var e,n,o,t,u,r;return{setters:[function(l){e=l.createClass,n=l.defineProperty},function(l){o=l.cclegacy,t=l.color},function(l){u=l.FLStore},function(l){r=l.EBossSkill}],execute:function(){o._RF.push({},"92e4cRBjqlJ76piC+JF5hQQ","FLGloable",void 0);var a=l("FLGloable",function(){function l(){}return e(l,null,[{key:"level",get:function(){return null===l._level&&(l._level=u.get("_newLevel",1)),l._level},set:function(e){e>100||(e=Math.round(e),l._level=e,u.set("_newLevel",e))}}]),l}());n(a,"curGameState",null),n(a,"isWin",!1),n(a,"scene3D",null),n(a,"camera3D",null),n(a,"cameraCom",null),n(a,"effectRoot",null),n(a,"curMonster",null),n(a,"curGround",null),n(a,"mapRoot",null),n(a,"groundRoot",null),n(a,"ballRoot",null),n(a,"lineRoot",null),n(a,"autoDestroyRoot",null),n(a,"curMonsterInfos",[]),n(a,"ballCloneMaterial",null),n(a,"uiParent",null),n(a,"bloodPrefab",[]),n(a,"enemyIsGod",!1),n(a,"bossMoveSpeed",.2),n(a,"player",null),n(a,"playerScript",null),n(a,"ballCount",20),n(a,"showBallCount",10),n(a,"ballInterval",.15),n(a,"initBallColor",t(12,34,197.255)),n(a,"initPlayerHp",20),n(a,"boss",null),n(a,"curBossSkill",r.SKILL_FIRE),n(a,"ballPrefab",null),n(a,"playerIsInit",!1),n(a,"radians",null),n(a,"angle",null),n(a,"speedGrade",1),n(a,"gameIsStop",!1),n(a,"hasAddFLnative",!1),n(a,"maxLevel",10),n(a,"_level",null),o._RF.pop()}}}));

System.register("chunks:///_virtual/LevelToolBoss.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,s,r,i,n,a,p,l,c,y,u,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,s=e.defineProperty,r=e.assertThisInitialized,i=e.initializerDefineProperty,n=e.createClass},function(e){a=e.cclegacy,p=e._decorator,l=e.Enum,c=e.CCInteger,y=e.v3,u=e.instantiate,d=e.director,h=e.Component}],execute:function(){var m,v,f,b,g,T;a._RF.push({},"95d4e59uMBN3KjIOCg8OQgv","LevelToolBoss",void 0);var B=p.ccclass,_=p.property;e("LevelToolBoss",(m=B("LevelToolBoss"),v=_({type:l({"年兽":1001,"木乃伊":1002,"黑法师":1003,"蜘蛛":1004,"章鱼":1005,"野猪":1006,"草":1007}),displayName:"增加boss"}),f=_({type:c,displayName:"移动类型"}),m((t((g=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,s(r(t),"_bossType",1001),i(r(t),"moveType",T,r(t)),t}o(t,e);var a=t.prototype;return a.addBoss=function(){this.node.destroyAllChildren(),this.instantiateNd("boss_"+this._bossType).position=y()},a.instantiateNd=function(e,t){this.mapItem.getChildByName(e)||(console.warn("错误 在mapItem中找不到 "+e),console.error("error"));var o=u(this.mapItem.getChildByName(e));return o.parent=t||this.node,o},n(t,[{key:"bossType",get:function(){return this._bossType},set:function(e){this._bossType!=e&&(this._bossType=e,this.addBoss())}},{key:"mapItem",get:function(){var e;return null===(e=d.getScene())||void 0===e?void 0:e.getChildByName("mapItem")}}]),t}(h)).prototype,"bossType",[v],Object.getOwnPropertyDescriptor(g.prototype,"bossType"),g.prototype),T=t(g.prototype,"moveType",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=g))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/EEffectName.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var c;e("EEffectName",void 0),t._RF.push({},"a7f76UAoNJOEb/3fVQ8Z4MS","EEffectName",void 0),function(e){e.FIRE="fire",e.BOOM="boom",e.FIRE_HIT="fire-hit",e.WALL_COLLIDE="wallCollide"}(c||(c=e("EEffectName",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/MapManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GamePrefabs.ts","./LocalConfig.ts","./Vec3Util.ts","./PoolManager.ts","./UIManager.ts","./GamePageEnum.ts","./Behavior3D.ts","./FLGloable.ts","./GameState.ts","./GameEvenEnum.ts","./MonsterBase.ts","./MapPrefabEnum.ts","./MainPlayer.ts","./CameraScript.ts"],(function(e){"use strict";var t,n,o,a,r,i,l,s,c,u,p,d,g,f,m,h,C,y,v,M,b,P,B,E,G,R,N,w,D;return{setters:[function(e){t=e.defineProperty,n=e.applyDecoratedDescriptor,o=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,l=e._decorator,s=e.Material,c=e.sys,u=e.SystemEvent,p=e.KeyCode,d=e.Camera,g=e.find,f=e.Node,m=e.BoxCollider},function(e){h=e.GamePrefabs},function(e){C=e.LocalConfig},function(e){y=e.Vec3Util},function(e){v=e.PoolManager},function(e){M=e.uiManager},function(e){b=e.GamePageEnum},function(e){P=e.Behavior3D},function(e){B=e.FLGloable},function(e){E=e.EColliderGroup},function(e){G=e.GameEvenEnum},function(e){R=e.MonsterBase},function(e){N=e.MapPrefabEnum},function(e){w=e.MainPlayer},function(e){D=e.CameraScript}],execute:function(){var _,S,A,I,L,F,x;i._RF.push({},"c1219BAvEZKqbpsijwHeUDD","MapManager",void 0);var U=l.ccclass,O=l.property;e("MapManager",(_=U("MapManager"),S=O({type:s,displayName:"克隆材质球"}),_((x=F=function(e){function n(){for(var n,o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return n=e.call.apply(e,[this].concat(i))||this,a(r(n),"ballCloneMaterial",L,r(n)),t(r(n),"curUnlockData",null),n}o(n,e);var i=n.prototype;return i.onLoad=function(){if(n.instance=this,this.initEvent(),this.initStart(),console.log("当前设备环境浏览器",c.isBrowser),c.isBrowser){var e=window.location.search.substring(1);if(e){for(var t={},o=e.split("&"),a=0;a<o.length;a++)if(!(o[a].indexOf("=")<=-1)){var r=o[a].split("=");t[r[0]]=r[1]}t.debug&&"true"==t.debug&&M.instance.showDialog(b.PAGE_DEBUG)}}B.curGameState=G.GAME_READY,M.instance.showDialog(b.PAGE_GAME)},i.initEvent=function(){this.registerEvent(G.CHANGE_BOSS,this.onChangeBoss,this),this.registerEvent(G.CHANGE_FLOOR,this.onChangeFloor,this),this.registerEvent(u.EventType.KEY_DOWN,(function(e){switch(e.keyCode){case p.KEY_W:case p.DIGIT_1:}}),this)},i.initStart=function(){B.scene3D=this.node.parent,B.camera3D=B.scene3D.getChildByName("Main Camera"),B.cameraCom=B.camera3D.getComponent(d),B.player=B.scene3D.getChildByName("player"),B.effectRoot=g("effectManager"),B.mapRoot=new f("mapRoot"),B.mapRoot.parent=this.node,B.groundRoot=new f("groundRoot"),B.groundRoot.parent=this.node,B.ballRoot=new f("ballRoot"),B.ballRoot.parent=this.node,B.lineRoot=new f("lineRoot"),B.lineRoot.parent=this.node,B.uiParent=g("Canvas").getChildByName("normal"),B.ballCloneMaterial=this.ballCloneMaterial,B.ballPrefab=h.getInstance().res.ball_10001,this.initLevel()},i.initLevel=function(){this.onClear(),this.initMap()},i.onClear=function(){console.log("clear scene !!!"),B.isWin=!1,B.gameIsStop=!1,B.ballRoot.destroyAllChildren(),B.groundRoot.destroyAllChildren(),B.mapRoot.destroyAllChildren(),B.lineRoot.destroyAllChildren()},i.initMap=function(){var e=B.level;e>B.maxLevel&&(e=B.maxLevel),B.curMonsterInfos=[];var t=C.instance.getTable("map"+e);for(var n in t){var o=t[n],a=o.name,r=o.pos,i=o.other,l=void 0;switch(a){case N.map_boss:var s=Number(i.split("|")[0]),c=Number(i.split("|")[1]);l=v.getInstance().getPrefabNodeByPool("boss_"+s,B.groundRoot),y.setNdPosRotScaleByDate(l,r,!0),l.getComponent(m).setGroup(1==c?E.monster:E.monsterBoss);var u=l.getComponent(R);u||(u=l.addComponent(R)),u.init(c),B.curMonsterInfos.push(l)}}var p=v.getInstance().getPrefabNodeByPool(N.map_ground,B.groundRoot);B.curGround=p,p.getChildByName("leftPlane").getComponent(m).setGroup(E.wall),p.getChildByName("rightPlane").getComponent(m).setGroup(E.wall),p.getChildByName("endPlane").getComponent(m).setGroup(E.end_wall),p.getChildByName("playerPlane").getComponent(m).setGroup(E.player),this.initPlayer(),B.curMonsterInfos=this.getNodesort(B.curMonsterInfos,"z",!0)},i.getNodesort=function(e,t,n){return e.sort((function(e,o){return n?o.worldPosition[t]-e.worldPosition[t]:e.worldPosition[t]-o.worldPosition[t]}))},i.initPlayer=function(){B.player.active=!0;var e=B.camera3D.getComponent(D);e||(e=B.camera3D.addComponent(D)),e.init(),B.playerScript||(B.playerScript=B.player.addComponent(w)),B.playerScript.init()},i.onNextLevel=function(){this.initLevel()},i.onChangeBoss=function(e){},i.onChangeFloor=function(e){var t=B.curGround.getChildByName("bgGround").getChildByName("dj9_ground");t.removeAllChildren(),v.getInstance().getPrefabNodeByPool("floor00"+e,t)},i.removeMapRoot=function(e){for(;e.children.length>0;)v.getInstance().putNode(e.children[0])},n}(P),t(F,"instance",void 0),L=n((I=x).prototype,"ballCloneMaterial",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=I))||A));i._RF.pop()}}}));

System.register("chunks:///_virtual/BallNum.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIEvenEnum.ts","./FLGloable.ts","./GameState.ts"],(function(t){"use strict";var e,i,n,l,r,a,o,s,c,u,p,h,y,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,l=t.assertThisInitialized,r=t.defineProperty},function(t){a=t.cclegacy,o=t._decorator,s=t.Label,c=t.CCInteger,u=t.systemEvent,p=t.Component},function(t){h=t.UIEvenEnum},function(t){y=t.FLGloable},function(t){f=t.EState}],execute:function(){var b,v,g,m,d,P,A;a._RF.push({},"c39afdHAgpCG4bSIhz+kG5o","BallNum",void 0);var C=o.ccclass,E=o.property;t("BallNum",(b=C("BallNum"),v=E({type:s,tooltip:"球数字体"}),g=E({type:c,tooltip:"高度"}),b((P=e((d=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(l(e),"ballText",P,l(e)),n(l(e),"high",A,l(e)),r(l(e),"playerActive",!0),r(l(e),"ballNum",0),e}i(e,t);var a=e.prototype;return a.onLoad=function(){var t=this;u.on(h.UPDATE_PLAYER_BALL,this.onChangePlayerball,this),this.scheduleOnce((function(){t.onChangePlayerball(y.showBallCount)}),.2)},a.onChangePlayerball=function(t){this.playerActive=!0,this.ballText.string="X"+t,this.ballNum=t},a.update=function(t){if(this.playerActive&&y.playerScript){if(y.playerScript.curState===f.DIED)return this.playerActive=!1,void(this.ballText.string="");if(y.player){var e=y.cameraCom.convertToUINode(y.player.worldPosition,this.node.parent);this.node.setPosition(e.x,e.y+this.high)}else this.ballText.string=""}},e}(p)).prototype,"ballText",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(d.prototype,"high",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=d))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/joystick.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIEvenEnum.ts","./Behavior3D.ts","./FLGloable.ts","./GameEvenEnum.ts"],(function(t){"use strict";var e,i,n,o,s,a,h,r,c,l,u,d,v,_,E,p,g,f,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.defineProperty,a=t.createClass},function(t){h=t.cclegacy,r=t._decorator,c=t.Enum,l=t.view,u=t.Node,d=t.Vec3,v=t.systemEvent,_=t.UITransformComponent,E=t.v3},function(t){p=t.UIEvenEnum},function(t){g=t.Behavior3D},function(t){f=t.FLGloable},function(t){y=t.GameEvenEnum}],execute:function(){var T,m,D,S,A,C,b,O,P,R,L,M,w,U,G,N,F;h._RF.push({},"cb632XAFCxCrZeVvBnfx844","joystick",void 0);var I=r.ccclass,H=r.property,z=c({DEFAULT:0,FOLLOW:1,FOLLOW_ALWAYS:2,FOLLOW_DOT:3}),k=c({FOUR:4,EIGHT:8,ALL:0}),V=l.getVisibleSize().height;t("Joystick",(T=I("Joystick"),m=H({type:u,displayName:"摇杆背景节点"}),D=H({type:u,displayName:"摇杆节点"}),S=H({type:z,displayName:"触摸类型"}),A=H({type:k,displayName:"方向类型"}),C=H({displayName:"启动半透明"}),b=H({displayName:"点击跟随"}),O=H({displayName:"内圈大小"}),T((L=e((R=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),h=0;h<i;h++)a[h]=arguments[h];return e=t.call.apply(t,[this].concat(a))||this,n(o(e),"ndRing",L,o(e)),n(o(e),"ndDot",M,o(e)),n(o(e),"touchType",w,o(e)),n(o(e),"directionType",U,o(e)),n(o(e),"isEnableTransparent",G,o(e)),n(o(e),"isFollowStart",N,o(e)),n(o(e),"innerSize",F,o(e)),s(o(e),"onClickCb",null),s(o(e),"onEndCb",null),s(o(e),"clearFECb",null),s(o(e),"onBeginFECb",null),s(o(e),"onSuccessFECb",null),s(o(e),"isMoving",!1),s(o(e),"_angle",0),s(o(e),"_stickPos",new d),s(o(e),"_oriRingPos",null),s(o(e),"_touchStartLocation",new d),s(o(e),"_touchMoveLocation",new d),s(o(e),"_distanceRate",0),s(o(e),"_oriDotPos",new d),s(o(e),"_movePos",new d),e}i(e,t);var h=e.prototype;return h.eventShow=function(){this.isMoving=!1,this.ndDot.setPosition(this._oriDotPos),this.ndRing.active=!1,f.radians=f.angle=null,this.node.off(u.EventType.TOUCH_START,this._touchStartEvent,this),this.node.off(u.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.off(u.EventType.TOUCH_END,this._touchEndEvent,this),this.node.off(u.EventType.TOUCH_CANCEL,this._touchEndEvent,this),v.off(p.GAME_PAGE_VIDEO_BACK,this.eventShow,this),this.onEnabled()},h.onEnabled=function(){v.on(p.GAME_PAGE_VIDEO_BACK,this.eventShow,this),v.on(y.KEY_DOWN,this.onKeyDown,this),this.node.on(u.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(u.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(u.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(u.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},h.onDisabled=function(){this.node.off(u.EventType.TOUCH_START,this._touchStartEvent,this),this.node.off(u.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.off(u.EventType.TOUCH_END,this._touchEndEvent,this),this.node.off(u.EventType.TOUCH_CANCEL,this._touchEndEvent,this),v.off(p.GAME_PAGE_VIDEO_BACK,this.eventShow,this),v.on(y.KEY_DOWN,this.onKeyDown,this),this.isMoving=!1,this.ndDot.setPosition(this._oriDotPos),this._oriRingPos&&this.ndRing.setPosition(this._oriRingPos)},h._touchStartEvent=function(t){var e;if(!f.gameIsStop){f.curGameState==y.GAME_READY&&(f.curGameState=y.GAME_STARTED,v.emit(y.GAME_STARTED)),v.emit(p.UI_TOUCH_START);var i=t.getUILocation();this._touchStartLocation.set(i.x,i.y,0);var n=null===(e=this.node.getComponent(_))||void 0===e?void 0:e.convertToNodeSpaceAR(this._touchStartLocation);if(this._oriRingPos||(this._oriRingPos=this.ndRing.getPosition().clone()),this._stickPos.set(n),!this.isFollowStart){var o,s;this.ndRing.active=!0;var a=(n=null===(o=this.ndRing.getComponent(_))||void 0===o?void 0:o.convertToNodeSpaceAR(this._touchStartLocation)).length();return(null===(s=this.ndRing.getComponent(_))||void 0===s?void 0:s.contentSize.width)/2>a&&(this.ndDot.setPosition(n),this._updateAngle(n),!0)}this.touchType===z.FOLLOW&&(n.y=n.y>=-V/6?-V/6:n.y,n.y=0),this.ndRing.active=!0,this.ndRing.setPosition(n)}},h._touchMoveEvent=function(t){var e,i;if(!f.gameIsStop&&f.curGameState==y.GAME_STARTED){var n=t.getUILocation();this._touchMoveLocation.set(n.x,n.y,0);var o=null===(e=this.ndRing.getComponent(_))||void 0===e?void 0:e.convertToNodeSpaceAR(this._touchMoveLocation),s=o.length();s>this.innerSize&&(this.isMoving=!0),o.y=0;var a=(null===(i=this.ndRing.getComponent(_))||void 0===i?void 0:i.contentSize.width)/2;if(f.speedGrade=0,a>s)f.speedGrade=Number((s/a).toFixed(3)),this.ndDot.setPosition(o);else if(this.touchType!==z.FOLLOW_DOT){f.speedGrade=1;var h=Math.atan2(o.y,o.x),r=Math.cos(h)*a,c=Math.sin(h)*a;this._movePos.set(r,c,0),this.ndDot.setPosition(this._movePos)}else this.ndDot.setPosition(o);this._updateAngle(o),this._distanceRate=f.speedGrade}},h._touchEndEvent=function(t){f.gameIsStop||f.curGameState==y.GAME_STARTED&&(v.emit(p.UI_TOUCH_END),this.isMoving=!1,this.ndDot.setPosition(this._oriDotPos),f.radians=f.angle=null)},h._updateAngle=function(t){var e=this._angle;if(this._angle=180*Math.atan2(t.y,t.x)/Math.PI,!(Math.abs(e-this.angle)<.1))return f.angle=this._angle,f.radians=Math.PI/180*f.angle,v.emit(p.UI_TOUCH_MOVE),this._angle},h.reset=function(){this.isMoving=!1,this.ndDot.setPosition(this._oriDotPos)},h.onKeyDown=function(t,e){if(t){var i,n=(null===(i=this.ndRing.getComponent(_))||void 0===i?void 0:i.contentSize.width)/2,o=E(e?-n:n,0,0);this.ndDot.setPosition(o)}else this.ndDot.setPosition(this._oriDotPos)},a(e,[{key:"distanceRate",get:function(){return this._distanceRate}},{key:"angle",get:function(){return this._angle},set:function(t){this._angle=t}}]),e}(g)).prototype,"ndRing",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(R.prototype,"ndDot",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(R.prototype,"touchType",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.DEFAULT}}),U=e(R.prototype,"directionType",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return k.ALL}}),G=e(R.prototype,"isEnableTransparent",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=e(R.prototype,"isFollowStart",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=e(R.prototype,"innerSize",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),P=R))||P));h._RF.pop()}}}));

System.register("chunks:///_virtual/DebugPanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GamePrefabs.ts","./PoolManager.ts","./UIManager.ts","./GamePageEnum.ts","./UIEvenEnum.ts","./FLGloable.ts","./GameEvenEnum.ts","./MonsterBase.ts","./MapManager.ts"],(function(t){"use strict";var e,n,o,i,a,l,r,u,s,c,g,p,b,d,h,m,f,y,E,B,v,C,N,I,S;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,a=t.defineProperty},function(t){l=t.cclegacy,r=t._decorator,u=t.Node,s=t.Label,c=t.Prefab,g=t.EditBox,p=t.systemEvent,b=t.EventHandler,d=t.Button,h=t.v3,m=t.Component},function(t){f=t.GamePrefabs},function(t){y=t.PoolManager},function(t){E=t.uiManager},function(t){B=t.GamePageEnum},function(t){v=t.UIEvenEnum},function(t){C=t.FLGloable},function(t){N=t.GameEvenEnum},function(t){I=t.MonsterBase},function(t){S=t.MapManager}],execute:function(){var P,M,w,D,G,L,_,z,A,x,O,H,R,k,F,T,U,Y,W,j,J,X,q,K,Q,V,Z,$,tt,et,nt,ot,it,at,lt,rt,ut,st,ct;l._RF.push({},"cd537XhEvpBiLocfJ0s9uai","DebugPanel",void 0);var gt=r.ccclass,pt=r.property;t("DebugPanel",(P=gt("DebugPanel"),M=pt({type:u,tooltip:"普通调试按钮"}),w=pt({type:u,tooltip:"关卡调试按钮"}),D=pt({type:s,tooltip:"切换面板按钮文字"}),G=pt({type:c,tooltip:"切换数字门调试预制体"}),L=pt({type:g,tooltip:"帽子输入框"}),_=pt({type:g,tooltip:"衣服输入框"}),z=pt({type:g,tooltip:"武器输入框"}),A=pt({type:g,tooltip:"BOSS输入框"}),x=pt({type:g,tooltip:"地面输入框"}),O=pt({type:g,tooltip:"关卡输入框"}),H=pt({type:g,tooltip:"BOSS血量输入框"}),R=pt({type:g,tooltip:"BOSS技能输入框"}),k=pt({type:g,tooltip:"玩家血量输入框"}),F=pt({type:g,tooltip:"球体颜色输入框"}),T=pt({type:g,tooltip:"球体数量输入框"}),U=pt({type:g,tooltip:"球体间隔输入框"}),Y=pt({type:g,tooltip:"敌人无敌"}),W=pt({type:g,tooltip:"守门移速"}),P((X=e((J=function(t){function e(){for(var e,n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return e=t.call.apply(t,[this].concat(l))||this,o(i(e),"normalButton",X,i(e)),o(i(e),"stageButton",q,i(e)),o(i(e),"changeButtonText",K,i(e)),o(i(e),"numberDoorChange",Q,i(e)),o(i(e),"capEdit",V,i(e)),o(i(e),"bodyEdit",Z,i(e)),o(i(e),"weaponEdit",$,i(e)),o(i(e),"bossEdit",tt,i(e)),o(i(e),"floorEdit",et,i(e)),o(i(e),"stageEdit",nt,i(e)),o(i(e),"bossBloodEdit",ot,i(e)),o(i(e),"bossSkillEdit",it,i(e)),o(i(e),"playerBloodEdit",at,i(e)),o(i(e),"ballColorEdit",lt,i(e)),o(i(e),"ballNumEdit",rt,i(e)),o(i(e),"ballIntervalEdit",ut,i(e)),o(i(e),"enemyGod",st,i(e)),o(i(e),"bossMoveSpeedEdit",ct,i(e)),a(i(e),"isNormal",!1),a(i(e),"lang",["zh","en"]),a(i(e),"langIndex",0),a(i(e),"_debugPetLevel",1),e}n(e,t);var l=e.prototype;return l.onLoad=function(){this.onChangePanel()},l.onEnable=function(){console.log("打开调试"),this.enemyGod.string=C.enemyIsGod?"开启":"关闭",this.bossMoveSpeedEdit.string=C.bossMoveSpeed.toString()},l.show=function(){},l.onBtnClose=function(){E.instance.hideDialog(B.PAGE_DEBUG)},l.onChangePanel=function(){this.isNormal?(this.normalButton.active=!1,this.stageButton.active=!0,this.stageButton.destroyAllChildren(),this.initCurStageNumDoor(),this.changeButtonText.string="切换正常调试",this.isNormal=!1):this.isNormal||(this.normalButton.active=!0,this.stageButton.active=!1,this.changeButtonText.string="切换怪物调试",this.isNormal=!0)},l.changeCap=function(){p.emit(N.CHANGE_CAP,parseInt(this.capEdit.string))},l.changeBody=function(){p.emit(N.CHANGE_BODY,parseInt(this.bodyEdit.string))},l.changeWeapon=function(){p.emit(N.CHANGE_WEAPON,parseInt(this.weaponEdit.string))},l.changeBoss=function(){p.emit(N.CHANGE_BOSS,parseInt(this.bossEdit.string))},l.changeFloor=function(){p.emit(N.CHANGE_FLOOR,parseInt(this.floorEdit.string))},l.changeStage=function(){C.level=parseInt(this.stageEdit.string),S.instance.onNextLevel()},l.changeBossBlood=function(){p.emit(N.CHANGE_BOSS_BLOOD,parseInt(this.bossBloodEdit.string))},l.changeBossSkill=function(){C.curBossSkill=parseInt(this.bossSkillEdit.string),S.instance.onNextLevel()},l.changePlayerBlood=function(){p.emit(N.CHANGE_PLAYER_HP,parseInt(this.playerBloodEdit.string))},l.changeBallColor=function(){C.ballPrefab=f.getInstance().res["ball_1000"+parseInt(this.ballColorEdit.string)]},l.changeBallNum=function(){C.ballCount=parseInt(this.ballNumEdit.string),p.emit(v.UPDATE_PLAYER_BALL,C.ballCount)},l.changeBalInterval=function(){C.ballInterval=parseFloat(this.ballIntervalEdit.string)},l.changeEnemyGod=function(){C.enemyIsGod=!C.enemyIsGod,this.enemyGod.string=C.enemyIsGod?"开启":"关闭"},l.changeBossMoveSpeed=function(){C.bossMoveSpeed=parseFloat(this.bossMoveSpeedEdit.string)},l.initStage=function(){S.instance.onNextLevel(),p.emit(N.GAME_RESET)},l.onBtnOpenDebug=function(){this.node.getChildByName("debugRoot").active=!this.node.getChildByName("debugRoot").active},l.initCurStageNumDoor=function(){for(var t=0;t<C.curMonsterInfos.length;t++){var e=y.getInstance().getNode(this.numberDoorChange,this.stageButton),n=Number(C.curMonsterInfos[t].name.split("_")[1]);e.getChildByName("name").getComponent(s).string="怪物"+t,e.getChildByName("number").getComponent(g).placeholder="当前ID:{"+n+"}",e.getChildByName("scale").getComponent(g).placeholder="当前缩放:{"+C.curMonsterInfos[t].scale.x+"}";var o=new b;o.target=this.node,o.component="DebugPanel",o.handler="onChangeNumDoor",o.customEventData=""+t,e.getChildByName("Button").getComponent(d).clickEvents.push(o);var i=new b;i.target=this.node,i.component="DebugPanel",i.handler="onChangeMonsterScale",i.customEventData=""+t,e.getChildByName("buttonScale").getComponent(d).clickEvents.push(i)}},l.onChangeNumDoor=function(t,e){var n=parseInt(e),o=this.stageButton.children[n].getChildByName("number").getComponent(g).string;if(o){var i=C.curMonsterInfos[n].getComponent(I).changeMonster(Number(o));C.curMonsterInfos[n]=i}},l.onChangeMonsterScale=function(t,e){var n=parseInt(e),o=Number(this.stageButton.children[n].getChildByName("scale").getComponent(g).string);o&&(C.curMonsterInfos[n].scale=h(o,o,o))},l.onBtnAddCoin=function(){},l.onBtnAddCoin2=function(){},l.onBtnLang=function(){var t=this.node.getChildByName("debugRoot").getChildByName("btnLang").getChildByName("lbLang").getComponent(s),e=this.lang[this.langIndex%this.lang.length];t.string="语言-"+e+";",window._languageData.init(e),this.langIndex+=1},l.debugPetLevelChang=function(t,e,n){this._debugPetLevel=Number(t)},l.lvDebug=function(){C.level=this._debugPetLevel,S.instance.onNextLevel()},e}(m)).prototype,"normalButton",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(J.prototype,"stageButton",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(J.prototype,"changeButtonText",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(J.prototype,"numberDoorChange",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(J.prototype,"capEdit",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(J.prototype,"bodyEdit",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(J.prototype,"weaponEdit",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(J.prototype,"bossEdit",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(J.prototype,"floorEdit",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(J.prototype,"stageEdit",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(J.prototype,"bossBloodEdit",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(J.prototype,"bossSkillEdit",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(J.prototype,"playerBloodEdit",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(J.prototype,"ballColorEdit",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(J.prototype,"ballNumEdit",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=e(J.prototype,"ballIntervalEdit",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(J.prototype,"enemyGod",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e(J.prototype,"bossMoveSpeedEdit",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=J))||j));l._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvenEnum.ts",["cc"],(function(E){"use strict";var A;return{setters:[function(E){A=E.cclegacy}],execute:function(){var _;E("GameEvenEnum",void 0),A._RF.push({},"cd654nDqwZK/pXT4Y8GITxS","GameEvenEnum",void 0),function(E){E.GAME_READY="GAME_READY",E.GAME_STARTED="GAME_STARTED",E.GAME_ENDED="GAME_ENDED",E.GAME_RESET="GAME_RESET",E.MONSTER_ATTACK_SATRT="MONSTER_ATTACK_SATRT",E.CAMERA_CHANGE_STATE="CAMERA_CHANGE_STATE",E.CHANGE_CAP="CHANGE_CAP",E.CHANGE_BODY="CHANGE_BODY",E.CHANGE_WEAPON="CHANGE_WEAPON",E.CHANGE_BOSS="CHANGE_BOSS",E.CHANGE_FLOOR="CHANGE_FLOOR",E.CHANGE_BOSS_BLOOD="CHANGE_BOSS_BLOOD",E.CHANGE_BOSS_SKILL="CHANGE_BOSS_SKILL",E.CHANGE_STAGE="CHANGE_STAGE",E.CHANGE_BALL_COLOR="CHANGE_BALL_COLOR",E.CHANGE_PLAYER_HP="CHANGE_PLAYER_HP",E.BOSS_DEAD="BOSS_DEAD",E.PLAYER_DEAD="PLAYER_DEAD",E.FIRE_BALL="FIRE_BALL",E.KEY_DOWN="KEY_DOWN",E.E_MonsterHit="m1010",E.E_Combo="m1009",E.E_BallAction="m1030",E.E_DoorAction="m1040",E.E_PlayerHit="m1050"}(_||(_=E("GameEvenEnum",{}))),A._RF.pop()}}}));

System.register("chunks:///_virtual/BallBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Vec3Util.ts","./FlMath.ts","./EffectManager.ts","./Behavior3D.ts","./FLGloable.ts","./GameState.ts","./GameEvenEnum.ts","./EEffectName.ts"],(function(t){"use strict";var e,i,o,n,s,a,r,l,c,h,u,d,p,v,y,f,m,R;return{setters:[function(t){e=t.defineProperty,i=t.inheritsLoose,o=t.assertThisInitialized,n=t.createClass},function(t){s=t.cclegacy,a=t._decorator,r=t.v3,l=t.geometry,c=t.PhysicsSystem,h=t.Vec3},function(t){u=t.Vec3Util},function(t){d=t.default},function(t){p=t.EffectManager},function(t){v=t.Behavior3D},function(t){y=t.FLGloable},function(t){f=t.EColliderGroup},function(t){m=t.GameEvenEnum},function(t){R=t.EEffectName}],execute:function(){var U,D,M;s._RF.push({},"e7ebcIXf5pCrIOJrH45Vgor","BallBase",void 0);var g=a.ccclass;a.property,t("BallBase",g((M=D=function(t){function s(){for(var i,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return i=t.call.apply(t,[this].concat(a))||this,e(o(i),"moveSpeed",s.initSpeed),e(o(i),"_atkMul",1),e(o(i),"skill",null),e(o(i),"moveDir",r()),e(o(i),"isMove",!1),e(o(i),"isCopy",!1),e(o(i),"multiplyNum",0),e(o(i),"moveUpRatio",25),e(o(i),"initMoveUpRatio",25),e(o(i),"a",-20),e(o(i),"numberWallUUID",[]),e(o(i),"ray",new l.Ray),e(o(i),"endDoorWidth",3),e(o(i),"lastUUID",""),e(o(i),"shutOutUUID",""),e(o(i),"isRayStart",!1),i}i(s,t);var a=s.prototype;return a.onLoad=function(){this.node.on(m.E_BallAction,this.onBallAction,this)},a.update=function(t){if(this.isMove){t=d.getMinMax(t,.016,.018),this.moveUpRatio+=this.a*t,this.moveUpRatio<0&&(this.moveUpRatio=0);var e=this.moveSpeed*t+this.moveUpRatio*t;if(this.node.worldPosition.z>y.player.worldPosition.z+3)this.recovery();else{var i=this.moveDir.clone().multiplyScalar(e);this.node.translate(i,1),this.isRayStart&&this.castRay(this.node.worldPosition,this.moveDir)}}},a.castRay=function(t,e){if(this.ray.o=t,this.ray.d=e,c.instance.raycast(this.ray,this.ballRayMask,5),c.instance.raycastResults&&c.instance.raycastResults.length>0){for(var i=1e10,o=null,n=0;n<c.instance.raycastResults.length;n++){var s=c.instance.raycastResults[n].distance;s<=i&&(i=s,o=c.instance.raycastResults[n])}if(o&&i<=.8){if(this.lastUUID==o.collider.node.uuid)return;this.lastUUID=o.collider.node.uuid;var a=o.hitPoint.clone(),l=o.hitNormal.clone();if(this.shutOutUUID==o.collider.node.uuid)return;switch(o.collider.getGroup()){case f.monster:console.log("=====击中怪物"),this.hitMonster(o.collider.node,l.clone());break;case f.wall:var d=h.add(r(),a,l.clone().multiplyScalar(.8));p.instance.playParticleByNode(R.WALL_COLLIDE,y.effectRoot,!0,d);break;case f.monsterBoss:this.moveUpRatio=this.initMoveUpRatio,o.collider.node.emit(m.E_MonsterHit,null);break;case f.end_wall:if(!y.enemyIsGod&&this.node.worldPosition.x>-this.endDoorWidth&&this.node.worldPosition.x<this.endDoorWidth)return this.recovery(),void y.playerScript.onGameOver(!0);break;case f.player:if(this.node.worldPosition.x<y.player.worldPosition.x-3||this.node.worldPosition.x>y.player.worldPosition.x+3)return this.recovery(),void y.playerScript.onGameOver(!1);this.moveUpRatio=this.initMoveUpRatio,y.playerScript.onHit()}var v=u.getReflectedDir(e,l);this.changeDir(v)}}},a.hitMonster=function(t,e){1==e.x?t.emit(m.E_MonsterHit,!0):-1==e.x?t.emit(m.E_MonsterHit,!1):t.emit(m.E_MonsterHit,null)},a.recovery=function(){this.stop(),this.node.destroy()},a.launch=function(t,e,i,o){void 0===i&&(i=!1),void 0===o&&(o=""),this.moveSpeed=s.initSpeed,this.node.active=!0,this.node.worldPosition=e,this.changeDir(t),this.isMove=!0,this.shutOutUUID=o,this.isCopy=i,this.isRayStart=!0},a.stop=function(){this.isMove=!1},a.changeDir=function(t){this.moveDir=t,this.moveDir.y=0,this.moveDir.normalize()},a.onBallAction=function(t){var e=this[t];if(e){for(var i=arguments.length,o=new Array(i>1?i-1:0),n=1;n<i;n++)o[n-1]=arguments[n];e.call.apply(e,[this].concat(o))}},a.playWallSound=function(){},a.onDestroyed=function(){},n(s,[{key:"atk",get:function(){return 1}},{key:"ballRayMask",get:function(){return f.wall+f.end_wall+f.monster+f.monsterBoss+f.player}}]),s}(v),e(D,"initSpeed",25),e(D,"fastSpeed",2200),e(D,"moveSpeed",10),U=M))||U);s._RF.pop()}}}));

System.register("chunks:///_virtual/CameraLock.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,o,r,n,a,s,c,p,l,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,n=t.defineProperty},function(t){a=t.cclegacy,s=t._decorator,c=t.Node,p=t.Vec3,l=t.v3,u=t.Component}],execute:function(){var d,h,y,f,m;a._RF.push({},"f3d026j5G5OC6vSRYLCeUsu","CameraLock",void 0);var C=s.ccclass,g=s.property;t("CameraLock",(d=C("CameraLock"),h=g({type:c,displayName:"跟随目标节点"}),d((m=i((f=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a))||this,o(r(i),"targetNd",m,r(i)),n(r(i),"initPosition",void 0),n(r(i),"subCameraAndPlayer",void 0),i}e(i,t);var a=i.prototype;return a.onLoad=function(){this.initPosition=this.node.position.clone(),this.subCameraAndPlayer=this.initPosition.subtract(this.targetNd.position)},a.update=function(){this.node.position=p.lerp(l(),this.node.position,l(this.targetNd.position.x+this.subCameraAndPlayer.x,this.targetNd.position.y+this.subCameraAndPlayer.y,this.targetNd.position.z+this.subCameraAndPlayer.z),.8)},i}(u)).prototype,"targetNd",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=f))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/BossBlood.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIEvenEnum.ts","./FLGloable.ts","./GameEvenEnum.ts"],(function(t){"use strict";var e,o,n,i,s,r,l,a,c,u,h,d,p,f,v,B,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,s=t.defineProperty},function(t){r=t.cclegacy,l=t._decorator,a=t.Label,c=t.CCInteger,u=t.systemEvent,h=t.Tween,d=t.tween,p=t.v3,f=t.Component},function(t){v=t.UIEvenEnum},function(t){B=t.FLGloable},function(t){g=t.GameEvenEnum}],execute:function(){var b,y,m,w,T,E,D;r._RF.push({},"f5ed6nDgJlCLr64ujQVGq5V","BossBlood",void 0);var I=l.ccclass,A=l.property;t("BossBlood",(b=I("BossBlood"),y=A({type:a,tooltip:"血量字体"}),m=A({type:c,tooltip:"高度"}),b((E=e((T=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,n(i(e),"bloodText",E,i(e)),n(i(e),"high",D,i(e)),s(i(e),"bossActive",!0),s(i(e),"tweenInterval",0),e}o(e,t);var r=e.prototype;return r.onLoad=function(){u.on(v.UPDATE_BOSS_BLOOD,this.onChangeBossBlood,this),u.on(g.BOSS_DEAD,this.onBossDead,this)},r.start=function(){},r.onChangeBossBlood=function(t){this.bossActive=!0,this.bloodText.string=t.toString(),this.changeBossBloodTween()},r.changeBossBloodTween=function(){this.tweenInterval>0||(this.tweenInterval=.125,h.stopAllByTarget(this.node),d(this.node).to(.06,{scale:p(1.6,1.6,1.6)}).to(.07,{scale:p(1,1,1)}).start())},r.onBossDead=function(){this.bossActive=!1,this.bloodText.string=""},r.update=function(t){if(this.bossActive)if(this.tweenInterval>0&&(this.tweenInterval-=t),B.curMonster){var e=B.cameraCom.convertToUINode(B.curMonster.worldPosition,this.node.parent);this.node.setPosition(e.x,e.y+this.high)}else this.bloodText.string=""},e}(f)).prototype,"bloodText",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(T.prototype,"high",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=T))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/ball-magic",["./UIEvenEnum.ts","./LevelToolPlayer.ts","./EAniDefine.ts","./EBossState.ts","./EBossSkill.ts","./FLGloable.ts","./GameState.ts","./GameEvenEnum.ts","./MonsterBase.ts","./MapPrefabEnum.ts","./ESoundEnum.ts","./MainPlayer.ts","./LevelToolBoss.ts","./MapLoader.ts","./NumberTool.ts","./NumberWall.ts","./MapLevelVo.ts","./EEffectName.ts","./BallBase.ts","./Ball_10001.ts","./CameraScript.ts","./LevelToolNumWall.ts","./TweenUI.ts","./FollowMovement.ts","./MonsterTool.ts","./FreeFlightCamera.ts","./GamePanel.ts","./light.ts","./MapManager.ts","./BallNum.ts","./joystick.ts","./DebugPanel.ts","./CameraLock.ts","./BossBlood.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/ball-magic', 'chunks:///_virtual/ball-magic'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});