System.register("chunks:///_virtual/UIEvenEnum.ts",["cc"],(function(_){"use strict";var E;return{setters:[function(_){E=_.cclegacy}],execute:function(){var U;_("UIEvenEnum",void 0),E._RF.push({},"059d8sJE4hPZYh2x+k1CuA6","UIEvenEnum",void 0),function(_){_.UI_TOUCH_START="UI_TOUCH_START",_.UI_TOUCH_MOVE="UI_TOUCH_MOVE",_.UI_TOUCH_END="UI_TOUCH_END",_.UPDATE_BOSS_BLOOD="UPDATE_BOSS_BLOOD",_.UPDATE_PLAYER_BLOOD="UPDATE_PLAYER_BLOOD",_.UPDATE_PLAYER_BALL="UPDATE_PLAYER_BALL"}(U||(U=_("UIEvenEnum",{}))),E._RF.pop()}}}));

System.register("chunks:///_virtual/LevelToolPlayer.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,o,t,l,i,n,a,c,u,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){i=e.cclegacy,n=e._decorator,a=e.CCInteger,c=e.Color,u=e.color,p=e.Component}],execute:function(){var s,y,f,v,b,d,g;i._RF.push({},"0ed82OXEedEBo/PZgiXYkFT","LevelToolPlayer",void 0);var C=n.ccclass,h=n.property;e("LevelToolPlayer",(s=C("LevelToolPlayer"),y=h({type:a,displayName:"数字"}),f=h({type:c,displayName:"初始球颜色"}),s((d=r((b=function(e){function r(){for(var r,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return r=e.call.apply(e,[this].concat(i))||this,t(l(r),"playerCount",d,l(r)),t(l(r),"ballColor",g,l(r)),r}return o(r,e),r}(p)).prototype,"playerCount",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),g=r(b.prototype,"ballColor",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u(12,34,197,255)}}),v=b))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Behavior3D.ts","./FlMath.ts","./EffectManager.ts","./UIEvenEnum.ts","./EBossState.ts","./EEffectName.ts","./EBossSkill.ts","./FLGloable.ts","./GameEvenEnum.ts"],(function(t){"use strict";var e,n,i,s,a,o,r,c,l,h,u,f,S,d,E,A,m,p,y,I,B;return{setters:[function(t){e=t.inheritsLoose,n=t.defineProperty,i=t.assertThisInitialized,s=t.asyncToGenerator},function(t){a=t.cclegacy,o=t._decorator,r=t.SkeletalAnimation,c=t.systemEvent,l=t.SystemEvent,h=t.v3,u=t.ParticleSystem,f=t.tween},function(t){S=t.Behavior3D},function(t){d=t.default},function(t){E=t.EffectManager},function(t){A=t.UIEvenEnum},function(t){m=t.EBossState},function(t){p=t.EEffectName},function(t){y=t.EBossSkill},function(t){I=t.FLGloable},function(t){B=t.GameEvenEnum}],execute:function(){var T;a._RF.push({},"2412ew5jq9DPa4GGIVsm+lh","MonsterBase",void 0);var k=o.ccclass;o.property,t("MonsterBase",k("MonsterBase")(T=function(t){function a(){for(var e,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(i(e),"isInit",!1),n(i(e),"isDie",!1),n(i(e),"bossHealth",0),n(i(e),"curState",m.IDLE),n(i(e),"animationState",null),n(i(e),"skeAni",null),n(i(e),"hitInterval",0),e}e(a,t);var o=a.prototype;return o.onLoad=function(){this.skeAni||(this.skeAni=this.node.getChildByName("rw").getComponent(r),this.skeAni.crossFade(m.IDLE))},o.onEnabled=function(){this.node.on(B.E_MonsterHit,this.onHit,this),c.on(B.MONSTER_ATTACK_SATRT,this.startAttack,this),c.on(B.CHANGE_BOSS_BLOOD,this.onChangeBlood,this),c.on(l.EventType.KEY_DOWN,this.onTestEffect,this)},o.onTestEffect=function(){},o.startAttack=function(){this.setAnimalState(m.ATTACK)},o.init=function(t){this.bossHealth=t,c.emit(A.UPDATE_BOSS_BLOOD,this.bossHealth)},o.setAnimalState=function(t){if(!this.isDie)switch(this.curState=t,t){case m.IDLE:this.skeAni.crossFade(m.IDLE,0),this.animationState=null;break;case m.HIT:if(this.skeAni.getState(m.HIT).isPlaying&&this.skeAni.getState(m.HIT).ratio<.2)return;this.skeAni.stop(),this.skeAni.crossFade(m.HIT,0),this.animationState=this.skeAni.getState(m.HIT);break;case m.ATTACK:this.skeAni.crossFade(m.ATTACK,0),this.useSkillAttack(),this.animationState=this.skeAni.getState(m.ATTACK);break;case m.DIED:this.skeAni.crossFade(m.DIED,0),this.animationState=null}},o.useSkillAttack=function(){var t=this;switch(I.curBossSkill){case y.SKILL_FIRE:this.scheduleOnce((function(){I.closeEffect&&E.instance.playParticleByNode(p.FIRE,I.curMonster,!0,h(0,-.2,1.8)),t.scheduleOnce((function(){I.playerScript.onHit(),I.closeEffect&&E.instance.playParticleByNode(p.FIRE_HIT,I.player,!0,h(0,1.5,1))}),.6)}),.5);break;case y.SKILL_LIGHTNING:this.scheduleOnce((function(){I.closeEffect&&E.instance.playParticleByNode(p.LIGHTNING,I.player,!0,h(0,6,0)),t.scheduleOnce((function(){I.playerScript.onHit(),I.closeEffect&&E.instance.playParticleByNode(p.LIGHTNING_HIT,I.player,!0,h(0,1.5,1))}),.2)}),.5);break;case y.SKILL_BALL:if(!I.closeEffect)return;this.scheduleOnce((function(){var t=E.instance.playParticleByNode(p.FLY_BALL,I.effectRoot,!1),e=d.getAngle(h(I.curMonster.worldPosition.x,I.curMonster.worldPosition.z,0),h(I.player.worldPosition.x,I.player.worldPosition.z,0));t.children[0].getComponent(u).startRotationY.constant=Math.PI/180*(-e-90),t.children[1].getComponent(u).startRotationY.constant=Math.PI/180*(-e-90),t.setWorldPosition(I.curMonster.worldPosition.clone().add3f(0,.5,5)),f(t).to(.37,{worldPosition:I.player.worldPosition.clone().add3f(0,.5,0)}).call((function(){E.instance.removeEffectByNode(t),I.playerScript.onHit(),E.instance.playParticleByNode(p.FLY_BALL_HIT,I.player,!0,h(0,1.5,1))})).start()}),.5)}},o.checkCurAnimationPlayOver=function(){!this.animationState&&this.isDie||(this.curState===m.HIT&&this.animationState.isMotionless&&this.setAnimalState(m.IDLE),this.curState===m.ATTACK&&this.animationState.isMotionless&&this.setAnimalState(m.IDLE))},o.onChangeBlood=function(t){this.bossHealth=t,c.emit(A.UPDATE_BOSS_BLOOD,this.bossHealth)},o.onHit=function(t,e){if(!this.isDie){this.bossHealth-=t,this.setAnimalState(m.HIT);var n=h(1-2*Math.random(),1.5*Math.random()+1,2);this.hitInterval<=0&&(E.instance.playParticleByNode(p.BOOM,I.curMonster,!0,n),this.hitInterval=.2),c.emit(A.UPDATE_BOSS_BLOOD,this.bossHealth),this.bossHealth<=0&&(this.setAnimalState(m.DIED),I.playerScript.onGameOver(!0),this.isDie=!0,c.emit(B.BOSS_DEAD))}},o.onSubBloodNum=function(){var t=s(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),o.onDisabled=function(){this.node.off(B.E_MonsterHit,this.onHit,this)},o.update=function(t){this.hitInterval>0&&(this.hitInterval-=t),this.checkCurAnimationPlayOver()},a}(S))||T);a._RF.pop()}}}));

System.register("chunks:///_virtual/MapPrefabEnum.ts",["cc"],(function(a){"use strict";var e;return{setters:[function(a){e=a.cclegacy}],execute:function(){var n;a("MapPrefabEnum",void 0),e._RF.push({},"332e11z0WNIiqb7O0kLptB7","MapPrefabEnum",void 0),function(a){a.map_ground="map_ground",a.map_number_wall="map_number_wall",a.map_wall="map_wall",a.map_player="map_player",a.map_boss="map_boss",a.boss_wall="boss_wall",a.line_circle="line_circle",a.line_point="line_point"}(n||(n=a("MapPrefabEnum",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/MainPlayer.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Vec3Util.ts","./Behavior3D.ts","./PoolManager.ts","./UIEvenEnum.ts","./FLGloable.ts","./GameEvenEnum.ts","./MapPrefabEnum.ts","./EAniDefine.ts","./GameState.ts"],(function(t){"use strict";var i,e,n,s,o,a,r,h,l,c,u,A,d,y,p,m,f,g,v,E,w,_,C,S;return{setters:[function(t){i=t.inheritsLoose,e=t.defineProperty,n=t.assertThisInitialized,s=t.createClass},function(t){o=t.cclegacy,a=t._decorator,r=t.geometry,h=t.SkeletalAnimation,l=t.SystemEvent,c=t.systemEvent,u=t.v3,A=t.Vec3,d=t.PhysicsSystem,y=t.KeyCode},function(t){p=t.Vec3Util},function(t){m=t.Behavior3D},function(t){f=t.PoolManager},function(t){g=t.UIEvenEnum},function(t){v=t.FLGloable},function(t){E=t.GameEvenEnum},function(t){w=t.MapPrefabEnum},function(t){_=t.EAniDefine},function(t){C=t.EState,S=t.EColliderGroup}],execute:function(){var P;o._RF.push({},"3573bqMr2dNCJ/8MowiUd+H","MainPlayer",void 0);var b=a.ccclass;a.property,t("MainPlayer",b("MainPlayer")(P=function(t){function o(){for(var i,s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o))||this,e(n(i),"isInit",!1),e(n(i),"rw",null),e(n(i),"rwAni",null),e(n(i),"speed",.09),e(n(i),"isMove",!1),e(n(i),"lineRoot",null),e(n(i),"capArr",[]),e(n(i),"clothesArr",[]),e(n(i),"bodyArr",[]),e(n(i),"weaponArr",[]),e(n(i),"curHp",1),e(n(i),"_curState",-1),e(n(i),"lineNum",0),e(n(i),"ray",new r.Ray),e(n(i),"hitPoints",[]),e(n(i),"ballR",.25),e(n(i),"curAniName",""),i}i(o,t);var a=o.prototype;return a.booState=function(t){return t==this.curState},a.onLoad=function(){this.rw=this.node.getChildByName("rw"),this.rwAni=this.rw.getComponent(h),this.lineRoot=this.node.getChildByName("lineRoot"),this.initAllClothes()},a.onEnabled=function(){this.registerEvent(l.EventType.KEY_DOWN,this.onKeyDown,this),this.registerEvent(g.UI_TOUCH_START,this.onTouchStart,this),this.registerEvent(g.UI_TOUCH_MOVE,this.onTouchMove,this),this.registerEvent(g.UI_TOUCH_END,this.onTouchEnd,this),this.registerEvent(E.CHANGE_CAP,this.onChangeCap,this),this.registerEvent(E.CHANGE_BODY,this.onChangeClothes,this),this.registerEvent(E.CHANGE_WEAPON,this.onChangeWeapon,this),this.registerEvent(E.CHANGE_PLAYER_HP,this.onChangeHp,this),this.registerEvent(E.GAME_RESET,this.resetPlayerState,this)},a.onChangeHp=function(t){this.curHp=t,c.emit(g.UPDATE_PLAYER_BLOOD,this.curHp)},a.init=function(){var t=this;this.rest(),this.scheduleOnce((function(){t.playAni(_.IDLE,1,!0)}),.001),this.curState=C.DAIJI,this.isInit=!0},a.rest=function(){this.curHp=v.initPlayerHp,c.emit(g.UPDATE_PLAYER_BLOOD,this.curHp),this.isMove=!1},a.update=function(){this.isInit&&v.curGameState==E.GAME_STARTED&&this.updateState()},a.updateState=function(){switch(this.curState){case C.HIT:}},a.onHit=function(t){var i=this;void 0===t&&(t=1),this.playAni(_.HIT),this.curHp-=t,c.emit(g.UPDATE_PLAYER_BLOOD,this.curHp),this.curHp<=0?this.onGameOver(!1):this.scheduleOnce((function(){i.curState=C.DAIJI,i.playAni(_.IDLE,1,!0),v.gameIsStop=!1,i.lineRoot.active=!0}),1.5)},a.onGameOver=function(t){this.isInit=!1,this.curState=C.DIED,v.curGameState=E.GAME_ENDED,this.unscheduleAllCallbacks(),t?this.playAni(_.SUCC):this.playAni(_.DIED)},a.onTouchStart=function(){this.isMove=!0,this.curState=C.DAIJI,this.lineRoot.active=!0},a.onTouchMove=function(){if(this.booState(C.DAIJI)&&null!==v.angle){var t=(v.angle-90+v.camera3D.eulerAngles.y)%360,i=u(0,t,0);this.lineRoot.eulerAngles=i,this.rw.rotation=p.lockPos(u(),this.lineRoot.forward);var e=A.add(u(),this.lineRoot.worldPosition,this.lineRoot.forward.clone().multiplyScalar(1));this.hitPoints=[e],this.castRay(e,this.lineRoot.forward),this.lineNum%1==0&&(v.lineRoot.destroyAllChildren(),this.drawAimLine()),this.lineNum+=1}},a.onTouchEnd=function(){this.lineRoot.active=!1,this.isMove=!1,v.lineRoot.destroyAllChildren(),this.curState=C.ATTACK,this.actionEmitBalls(),v.gameIsStop=!0},a.castRay=function(t,i){if(this.ray.o=t,this.ray.d=i,d.instance.raycast(this.ray,this.ballRayMask),d.instance.raycastResults&&d.instance.raycastResults.length>0){for(var e=1e8,n=null,s=0;s<d.instance.raycastResults.length;s++){var o=d.instance.raycastResults[s].distance;o<=e&&(e=o,n=d.instance.raycastResults[s])}var a=n.hitPoint.clone();if(a.z>this.node.worldPosition.z)return;a.subtract(i.clone().normalize().multiplyScalar(this.ballR));var r=n.hitNormal.clone();this.hitPoints.push(a);var h=n.collider,l=p.getReflectedDir(i,r),c=p.dirAngle(r,l);h.getGroup()!==S.monster&&Math.abs(c)>20&&this.hitPoints.length<5&&this.castRay(a,l)}},a.drawAimLine=function(){this.hitPoints.length<=1&&this.hitPoints.push(A.add(u(),this.hitPoints[0],this.lineRoot.forward.clone().multiplyScalar(4)));for(var t=0;t<this.hitPoints.length-1;t++){var i=this.hitPoints[t],e=this.hitPoints[t+1];if(0==t)f.getInstance().getPrefabNodeByPool(w.line_circle,v.lineRoot).worldPosition=u(e.x,0,e.z);this.drawLine(i,e)}},a.drawLine=function(t,i){for(var e=A.subtract(u(),i,t).normalize(),n=A.distance(t,i),s=.6,o=Math.ceil(n/s),a=0;a<o;a++){var r=A.add(u(),t,e.clone().multiplyScalar(a*s)),h=f.getInstance().getPrefabNodeByPool(w.line_point,v.lineRoot);h.position=r;var l=.3;a==o-1&&(l=n-s*a),h.scale=u(1,1,l),h.rotation=p.lockPos(t,i,!1)}},a.actionEmitBalls=function(){var t=this;if(this.booState(C.ATTACK)){this.playAni(_.ATTACK1);var i=v.ballCount,e=i-1,n=this.node.worldPosition.clone().add3f(0,.25,0);this.schedule((function(){v.curGameState==E.GAME_STARTED&&(c.emit(E.FIRE_BALL),f.getInstance().getNode(v.ballPrefab,v.ballRoot).emit(E.E_BallAction,"launch",t.lineRoot.forward.clone(),n),--e<0&&(t.playAni(_.IDLE,1,!0),t.scheduleOnce((function(){t.curState=C.HIT,c.emit(g.UPDATE_PLAYER_BALL,v.showBallCount),c.emit(E.MONSTER_ATTACK_SATRT)}),3)))}),v.ballInterval,i-1)}},a.resetPlayerState=function(){var t=u(0,0,0);this.lineRoot.eulerAngles=t,this.rw.rotation=p.lockPos(u(),this.lineRoot.forward),this.playAni(_.IDLE),this.curState=C.DAIJI,v.curGameState=E.GAME_READY},a.initAllClothes=function(){for(var t=1;t<=6;t++)this.rw.getChildByName("Zomball_zj"+t+"_head")?this.capArr.push(this.rw.getChildByName("Zomball_zj"+t+"_head")):this.rw.getChildByName("Zomball_zj"+t+"_head")||this.capArr.push(null),this.rw.getChildByName("Zomball_zj"+t+"_clothes")?this.clothesArr.push(this.rw.getChildByName("Zomball_zj"+t+"_clothes")):this.rw.getChildByName("Zomball_zj"+t+"_clothes")||this.clothesArr.push(null),this.rw.getChildByName("Zomball_zj"+t+"_body")?this.bodyArr.push(this.rw.getChildByName("Zomball_zj"+t+"_body")):this.rw.getChildByName("Zomball_zj"+t+"_body")||this.bodyArr.push(null),this.rw.getChildByName("wq Socket").getChildByName("Zomball_wp"+t)?this.weaponArr.push(this.rw.getChildByName("wq Socket").getChildByName("Zomball_wp"+t)):this.rw.getChildByName("wq Socket").getChildByName("Zomball_wp"+t)||this.weaponArr.push(null);console.log(this.capArr,this.weaponArr)},a.onChangeCap=function(t){if(t>0&&t<7)for(var i=0;i<this.capArr.length;i++)i===t-1&&this.capArr[i]?this.capArr[i].active=!0:this.capArr[i]&&(this.capArr[i].active=!1)},a.onChangeClothes=function(t){if(t>0&&t<7)for(var i=0;i<this.clothesArr.length;i++)i===t-1&&this.clothesArr[i]?this.clothesArr[i].active=!0:this.clothesArr[i]&&(this.clothesArr[i].active=!1),i===t-1&&this.bodyArr[i]?this.bodyArr[i].active=!0:i!==t-1||this.bodyArr[i]?this.bodyArr[i]&&(this.bodyArr[i].active=!1):this.bodyArr[0].active=!0},a.onChangeWeapon=function(t){if(t>0&&t<6)for(var i=0;i<this.weaponArr.length;i++)i===t-1&&this.weaponArr[i]?this.weaponArr[i].active=!0:this.weaponArr[i]&&(this.weaponArr[i].active=!1)},a.playAni=function(t,i,e){void 0===i&&(i=1),void 0===e&&(e=!1),e&&(this.curAniName=""),this.curAniName!==t&&(console.log("动画名：",t),this.rwAni&&this.rwAni.play(t),this.rwAni&&this.rwAni.getState(t)&&(this.rwAni.getState(t).speed=i),this.curAniName=t)},a.getAniPro=function(t){return this.rwAni.getState(t).isPlaying?this.rwAni.getState(t).ratio:-1},a.onDisabled=function(){},a.onKeyDown=function(t){switch(t.keyCode){case y.KEY_A:}},s(o,[{key:"curState",get:function(){return this._curState},set:function(t){this._curState=t}},{key:"ballRayMask",get:function(){return S.wall+S.monster}}]),o}(m))||P);o._RF.pop()}}}));

System.register("chunks:///_virtual/MapLoader.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./LevelToolPlayer.ts","./MapPrefabEnum.ts","./LevelToolBoss.ts","./LevelToolNumWall.ts"],(function(t){"use strict";var e,o,i,r,a,n,s,l,p,c,u,m,h,d,g,y,b,f,N,v,_,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.defineProperty,n=t.createClass},function(t){s=t.cclegacy,l=t._decorator,p=t.CCInteger,c=t.systemEvent,u=t.SystemEvent,m=t.KeyCode,h=t.Vec3,d=t.color,g=t.instantiate,y=t.v3,b=t.director,f=t.Component},function(t){N=t.LevelToolPlayer},function(t){v=t.MapPrefabEnum},function(t){_=t.LevelToolBoss},function(t){w=t.LevelToolNumWall}],execute:function(){var C,S,D,T,P,B,L,M,k,F,O,z,R,j,x,E,I,V,A,W,K,U;s._RF.push({},"38bbdzZyqVAXo6lB18DB+W7","MapLoader",void 0);var q=l.ccclass,Y=l.property,H="assets/bundles/ball-magic/res/config/";t("MapLoader",(C=q("MapLoader"),S=Y({displayName:" "}),D=Y({type:p,min:1,step:1,displayName:"导出关卡数"}),T=Y({displayName:"保存关卡数据"}),P=Y({displayName:" "}),B=Y({type:p,min:1,step:1,displayName:"加载关卡数"}),L=Y({displayName:"加载关卡数据"}),M=Y({displayName:" "}),k=Y({displayName:" "}),F=Y({displayName:"添加地板"}),O=Y({displayName:"添加主角"}),z=Y({displayName:"添加boss"}),R=Y({displayName:"添加数字墙"}),j=Y({displayName:"添加障碍墙壁"}),C((I=e((E=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,i(r(e),"test1",I,r(e)),i(r(e),"mapNameSave",V,r(e)),a(r(e),"_isFinish1",!1),i(r(e),"test2",A,r(e)),i(r(e),"mapNameLoad",W,r(e)),a(r(e),"_isFinish2",!1),i(r(e),"test3",K,r(e)),i(r(e),"test4",U,r(e)),a(r(e),"_t1",!1),a(r(e),"_t4",!1),a(r(e),"_t5",!1),a(r(e),"_t2",!1),a(r(e),"_t3",!1),e}o(e,t);var s=e.prototype;return s.onLoad=function(){c.on(u.EventType.KEY_DOWN,this.keyDown,this)},s.keyDown=function(t){switch(t.keyCode){case m.KEY_E:this.saveMap();break;case m.KEY_R:this.readMap()}},s.saveMap=function(){var t=this,e="id,预设,位置旋转缩放,其他\nnumber,string,string,string\nid,name,pos,other\n";e+=this.writeMapInfo(this.node);var o=window.cce.project;o.replace("\\"," / ");var i=o+"/"+H,r=require("fs"),a=function(){r.writeFile(i+"map"+t.mapNameSave+".csv",e,(function(e){e?(console.warn("失败 关卡解锁: "+t.mapNameSave),console.error("error",e)):console.warn("成功 关卡解锁: "+t.mapNameSave),t._isFinish1=!0}))};r.exists(i,(function(t){t?a():r.mkdir(i,(function(t){t?console.log("创建目录 失败 "+t):(console.log("创建目录 成功 "+i),a())}))}))},s.writeMapInfo=function(t){for(var e="",o=0;o<t.children.length;o++){var i=t.children[o],r=i.name;r=r.split("-")[0];var a=this.getPosRotScal(i,!0),n="";switch(r){case v.map_boss:var s=i.getComponent(_);n=s.bossType+"|"+s.bloodNum;break;case v.map_number_wall:var l=i.getComponent(w);n=this.colorToString(l.wallColor)+"|"+l.wallValue,l.isChangeBall&&(n+="|"+this.colorToString(l.ballColor)+"|"+l.ballScale);break;case v.map_player:var p=i.getComponent(N);n=p.playerCount+"|"+this.colorToString(p.ballColor);break;case v.map_ground:n=this.getPosRotScal(i.getChildByName("boss_wall"),!0)+"&"+this.getPosRotScal(i.getChildByName("boss_wall2"),!0)}e+=o+1+',"'+r+'","'+a+'","'+n+'"\n'}return e},s.getPosRotScal=function(t,e,o){return void 0===e&&(e=!0),e?this.vec3ToString(t.getWorldPosition())+"|"+this.vec3ToString(t.eulerAngles)+"|"+this.vec3ToString(t.getWorldScale()):this.vec3ToString(t.getPosition())+"|"+this.vec3ToString(t.eulerAngles)+"|"+this.vec3ToString(t.getScale())},s.readMap=function(){var t=this;this.mapNameSave=this.mapNameLoad,this.node.destroyAllChildren();var e=window.cce.project;e.replace("\\"," / ");var o=e+"/"+H+"map"+this.mapNameLoad+".csv";require("fs").readFile(o,"utf-8",(function(e,o){if(e)return console.error("失败 关卡-解锁："+t.mapNameLoad+" error:"+e);console.warn("成功 关卡-解锁："+t.mapNameLoad+" error:"+t.mapNameLoad),t.readMapData(o),t._isFinish2=!0}))},s.readMapData=function(t){var e=t.split("\n");e=this.deleteUselessData(e),console.log("场景元素数据dataList-1",e);for(var o=3;e[o];){var i=e[o].split("''")[0];console.log("场景元素数据dataList-2",i),i=i.split('"'),i=this.deleteUselessData2(i),console.log("场景元素数据dataList-3",i);var r=i[1],a=i[2],n=i[3],s=this.instantiateNd(r);switch(s.parent=this.node,this.setNdPosRotScaleByDate(s,a,!0),r){case v.map_boss:var l=s.getComponent(_);l.bossType=Number(n.split("|")[0]),l.bloodNum=Number(n.split("|")[1]),s.getComponent(_).addBoss();break;case v.map_number_wall:var p=s.getComponent(w);p.wallColor=this.stringToColor(n.split("|")[0]),p.wallValue=n.split("|")[1],n.split("|")[2]&&(p.isChangeBall=!0,p.ballColor=this.stringToColor(n.split("|")[2]),p.ballScale=Number(n.split("|")[3]));break;case v.map_player:var c=s.getComponent(N);c.playerCount=Number(n.split("|")[0]),c.ballColor=this.stringToColor(n.split("|")[1]);break;case v.map_ground:if(n){var u=n.split("&");this.setNdPosRotScaleByDate(s.getChildByName("boss_wall"),u[0],!0),this.setNdPosRotScaleByDate(s.getChildByName("boss_wall2"),u[1],!0)}}o++}},s.deleteUselessData=function(t){for(var e=t.length-1;e>-1;e--)0!==t[e].length&&","!==t[e]||t.splice(e,1);return t},s.deleteUselessData2=function(t){for(var e=t.length-1;e>-1;e--)","!==t[e]&&(0!==t[e].length||e!=t.length-1&&0!=e)||t.splice(e,1);return t},s.stringToVec3=function(t){var e=t.split(",");return e.length<=2?new h(Number(e[0]),0,Number(e[1])):new h(Number(e[0]),Number(e[1]),Number(e[2]))},s.vec3ToString=function(t,e,o){return void 0===e&&(e=!1),void 0===o&&(o=3),e?Number(t.x.toFixed(o))+","+Number(t.z.toFixed(o)):Number(t.x.toFixed(o))+","+Number(t.y.toFixed(o))+","+Number(t.z.toFixed(o))},s.colorToString=function(t){return t.r+","+t.g+","+t.b+","+t.a},s.stringToColor=function(t){var e=t.split(",");return d(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3]))},s.setNdPosRotScaleByDate=function(t,e,o){void 0===o&&(o=!0);var i=e.split("|"),r=this.stringToVec3(i[0]),a=this.stringToVec3(i[1]),n=this.stringToVec3(i[2]);o?(t.worldPosition=r,t.eulerAngles=a,t.worldScale=n):(t.position=r,t.eulerAngles=a,t.scale=n)},s.instantiateNd=function(t,e){this.mapItem.getChildByName(t)||(console.warn("错误 在mapItem中找不到 "+t),console.error("error"));var o=g(this.mapItem.getChildByName(t));return o.parent=e||this.node,o},n(e,[{key:"getMapData",get:function(){return this._isFinish1},set:function(t){this._isFinish1!=t&&(this._isFinish1=t,console.log("开始计算"),this.saveMap())}},{key:"setMapData",get:function(){return this._isFinish2},set:function(t){this._isFinish2!=t&&(this._isFinish2=t,console.log("开始计算"),this.readMap())}},{key:"t1",get:function(){return this._t1},set:function(t){this._t1!=t&&(this._t1=t,this.node.getChildByName(v.map_ground)||(this.instantiateNd(v.map_ground).position=y()))}},{key:"t4",get:function(){return this._t4},set:function(t){this._t4!=t&&(this._t4=t,this.node.getChildByName(v.map_player)||(this.instantiateNd(v.map_player).position=y()))}},{key:"t5",get:function(){return this._t5},set:function(t){if(this._t5!=t&&(this._t5=t,!this.node.getChildByName(v.map_boss))){var e=this.instantiateNd(v.map_boss);e.position=y(),e.getComponent(_).addBoss()}}},{key:"t2",get:function(){return this._t2},set:function(t){this._t2!=t&&(this._t2=t,this.instantiateNd(v.map_number_wall).position=y())}},{key:"t3",get:function(){return this._t3},set:function(t){this._t3!=t&&(this._t3=t,this.instantiateNd(v.map_wall).position=y())}},{key:"mapItem",get:function(){var t;return null===(t=b.getScene())||void 0===t?void 0:t.getChildByName("mapItem")}}]),e}(f)).prototype,"test1",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"导出关卡——关卡分栏"}}),V=e(E.prototype,"mapNameSave",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(E.prototype,"getMapData",[T],Object.getOwnPropertyDescriptor(E.prototype,"getMapData"),E.prototype),A=e(E.prototype,"test2",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"加载关卡——关卡分栏"}}),W=e(E.prototype,"mapNameLoad",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(E.prototype,"setMapData",[L],Object.getOwnPropertyDescriptor(E.prototype,"setMapData"),E.prototype),K=e(E.prototype,"test3",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"创建节点——关卡分栏"}}),U=e(E.prototype,"test4",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"----------------------"}}),e(E.prototype,"t1",[F],Object.getOwnPropertyDescriptor(E.prototype,"t1"),E.prototype),e(E.prototype,"t4",[O],Object.getOwnPropertyDescriptor(E.prototype,"t4"),E.prototype),e(E.prototype,"t5",[z],Object.getOwnPropertyDescriptor(E.prototype,"t5"),E.prototype),e(E.prototype,"t2",[R],Object.getOwnPropertyDescriptor(E.prototype,"t2"),E.prototype),e(E.prototype,"t3",[j],Object.getOwnPropertyDescriptor(E.prototype,"t3"),E.prototype),x=E))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/NumberWall.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GamePrefabs.ts","./Behavior3D.ts","./FlMath.ts","./FLGloable.ts","./GameEvenEnum.ts","./GameState.ts","./NumberTool.ts"],(function(e){"use strict";var t,l,i,o,a,r,s,n,u,c,h,f,b,m,p,B,C;return{setters:[function(e){t=e.defineProperty,l=e.inheritsLoose,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,r=e.MeshRenderer,s=e.BoxCollider,n=e.v3,u=e.Node},function(e){c=e.GamePrefabs},function(e){h=e.Behavior3D},function(e){f=e.default},function(e){b=e.FLGloable},function(e){m=e.GameEvenEnum},function(e){p=e.EColliderGroup,B=e.EBuffType},function(e){C=e.NumberTool}],execute:function(){var T,k,y;o._RF.push({},"3e008JbyX5MPa6PPO/CafcW","NumberWall",void 0);var d=a.ccclass;a.property,e("NumberWall",d("NumberWall")((y=k=function(e){function o(){for(var l,o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return l=e.call.apply(e,[this].concat(a))||this,t(i(l),"isInit",!1),t(i(l),"leftBlock",null),t(i(l),"rightBlock",null),t(i(l),"centerBlock",null),t(i(l),"centerMat",null),t(i(l),"numberRoot",null),t(i(l),"isChangeBall",!1),t(i(l),"ballColor",null),t(i(l),"ballScale",null),t(i(l),"boxCom",null),t(i(l),"buffType",0),t(i(l),"buffValue",0),t(i(l),"throughNum",0),t(i(l),"curNumText",null),t(i(l),"numberScript",null),l}l(o,e);var a=o.prototype;return a.onLoad=function(){this.leftBlock=this.node.getChildByName("leftBlock"),this.rightBlock=this.node.getChildByName("rightBlock"),this.centerBlock=this.node.getChildByName("centerBlock"),this.centerMat=this.centerBlock.children[0].getComponent(r).material,this.numberRoot=this.node.getChildByName("numberRoot"),this.boxCom=this.centerBlock.getComponent(s),this.boxCom.setGroup(p.number_wall),this.centerBlock.on(m.E_DoorAction,this.onEnterDoor,this)},a.init=function(e,t,l,i,o){this.centerBlock.scale=e,this.leftBlock.position=n(-e.x/2+.09,0,0),this.rightBlock.position=n(e.x/2-.09,0,0),this.centerMat.setProperty("mainColor",t),this.isChangeBall=!!i,this.ballColor=i,this.ballScale=o;var a=f.deepClone_SlapKing_(l);this.curNumText=a;var r=a.substring(0,1);switch(this.buffValue=Number(a.slice(1)),r){case"+":this.buffType=B.ADD;break;case"-":this.buffType=B.CUT;break;case"x":this.buffType=B.MULTIPLY;break;case"*":this.buffType=B.MULTIPLY2;break;case"/":this.buffType=B.EXCEPT}this.isInit=!0;var s=new u;s.parent=this.node;var h=s.addComponent(C);h.setNumber(this.buffType,this.buffValue,c.getInstance().res.dj4_number),this.numberScript=h},a.getNumberWallDate=function(){var e=[];return e.push(this.curNumText),e.push(this.ballColor),e.push(this.ballScale),e},a.resetNumberWall=function(e,t,l){var i=e.substring(0,1);switch(this.buffValue=Number(e.slice(1)),i){case"+":this.buffType=B.ADD;break;case"-":this.buffType=B.CUT;break;case"x":this.buffType=B.MULTIPLY;break;case"*":this.buffType=B.MULTIPLY2;break;case"/":this.buffType=B.EXCEPT}this.numberScript.node.destroyAllChildren(),this.numberScript.setNumber(this.buffType,this.buffValue,c.getInstance().res.dj4_number)},a.onEnterDoor=function(e){switch(this.throughNum+=1,this.ballScale&&(e.scale=n(this.ballScale,this.ballScale,this.ballScale)),this.ballColor&&(b.ballCloneMaterial.setProperty("mainColor",this.ballColor),b.ballCloneMaterial.setProperty("emissive",this.ballColor),e.children[0].getComponent(r).material=b.ballCloneMaterial),this.buffType){case B.ADD:e.emit(m.E_BallAction,"enterDoorCallBack",this.buffType,!1,[this.centerBlock.uuid,Math.ceil(this.buffValue/100),this.rightBlock.worldPosition.x,this.leftBlock.worldPosition.x]);break;case B.CUT:this.buffValue-=1,e.emit(m.E_BallAction,"enterDoorCallBack",this.buffType,this.buffValue>0);break;case B.MULTIPLY:e.emit(m.E_BallAction,"enterDoorCallBack",this.buffType,!1,this.buffValue);break;case B.MULTIPLY2:e.emit(m.E_BallAction,"enterDoorCallBack",this.buffType,!1,[this.centerBlock.uuid,this.buffValue]);break;case B.EXCEPT:e.emit(m.E_BallAction,"enterDoorCallBack",this.buffType,this.throughNum%this.buffType!=0)}},a.onDisabled=function(){},a.update=function(){},o}(h),t(k,"newBallMaterial",null),T=y))||T);o._RF.pop()}}}));

System.register("chunks:///_virtual/MapLevelVo.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"3e06cv8yAFAkp4dOOt8Cl6z","MapLevelVo",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Ball_10001.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./BallBase.ts"],(function(t){"use strict";var e,r,n,s;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator},function(t){s=t.BallBase}],execute:function(){var c;r._RF.push({},"42bb83fIQRDeJQzrSzFmuG3","Ball_10001",void 0);var l=n.ccclass;n.property,t("ball_10001",l(c=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r}(s))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/CameraScript.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Vec3Util.ts","./Behavior3D.ts","./FLGloable.ts","./GameEvenEnum.ts","./GameState.ts"],(function(t){"use strict";var i,e,n,o,s,a,r,c,l,d,h,u,p,f;return{setters:[function(t){i=t.inheritsLoose,e=t.defineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.Camera,r=t.Vec3,c=t.v3,l=t.tween},function(t){d=t.Vec3Util},function(t){h=t.Behavior3D},function(t){u=t.FLGloable},function(t){p=t.GameEvenEnum},function(t){f=t.ECameraState}],execute:function(){var g;o._RF.push({},"558219OtYhEY6ILHsW4pQPT","CameraScript",void 0);var m=s.ccclass;s.property,t("CameraScript",m("CameraScript")(g=function(t){function o(){for(var i,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,e(n(i),"curState",1),e(n(i),"initPosition",void 0),e(n(i),"initAngle",void 0),e(n(i),"subCameraAndPlayer",void 0),e(n(i),"initFieldOfView",void 0),e(n(i),"lockTargetNd",void 0),e(n(i),"isInit",!1),i}i(o,t);var s=o.prototype;return s.onLoad=function(){this.lockTargetNd=u.player,this.initPosition=this.node.position.clone(),this.initAngle=this.node.eulerAngles.clone(),this.initFieldOfView=this.node.getComponent(a).fov,this.subCameraAndPlayer=r.subtract(c(),this.node.worldPosition,this.lockTargetNd.position)},s.onEnabled=function(){this.registerEvent(p.CAMERA_CHANGE_STATE,this.onStateChange,this)},s.onStateChange=function(t,i){switch(this.curState=t,t){case f.DAIJI:this.isInit=!1;break;case f.FLOOW:this.isInit=!0;break;case f.UNLOCK:case f.STOP:this.isInit=!1}},s.resetCamera=function(){this.curState==f.DAIJI&&(this.node.worldPosition=r.add(c(),u.player.worldPosition,this.subCameraAndPlayer))},s.init=function(){this.node.position=this.initPosition,this.node.eulerAngles=this.initAngle,this.node.getComponent(a).fov=this.initFieldOfView,this.curState=f.DAIJI},s.update=function(){if(this.isInit)switch(this.curState){case f.DAIJI:break;case f.FLOOW:if(!this.lockTargetNd||!this.lockTargetNd.parent)return;this.flowTarget(this.lockTargetNd,this.subCameraAndPlayer);break;case f.STOP:}},s.flowTarget=function(t,i,e){void 0===e&&(e=.8),this.node.position=d.lerpVec3(this.node.position,c(t.position.x+i.x,t.position.y+i.y,t.position.z+i.z),e)},s.unlockCamera=function(t,i,e){var n=this;console.log("解锁缓动");var o=r.add(c(),t,this.subCameraAndPlayer),s=r.add(c(),u.player.worldPosition,this.subCameraAndPlayer);l(this.node).delay(1).to(i,{worldPosition:o}).delay(e).to(i,{worldPosition:s}).call((function(){u.gameIsStop=!1,n.onStateChange(f.FLOOW)})).start()},s.onDisabled=function(){},o}(h))||g);o._RF.pop()}}}));

System.register("chunks:///_virtual/GameState.ts",["cc"],(function(E){"use strict";var e;return{setters:[function(E){e=E.cclegacy}],execute:function(){var t,o,n,I,T,a;E({EBloodType:void 0,EBuffType:void 0,ECameraState:void 0,ECanColliderGroup:void 0,EColliderGroup:void 0,EState:void 0}),e._RF.push({},"55f98YfSWFJn6pd7scjZTN9","GameState",void 0),function(E){E[E.DAIJI=0]="DAIJI",E[E.ATTACK=1]="ATTACK",E[E.HIT=2]="HIT",E[E.DIED=3]="DIED"}(t||(t=E("EState",{}))),function(E){E[E.DAIJI=0]="DAIJI",E[E.FLOOW=1]="FLOOW",E[E.UNLOCK=2]="UNLOCK",E[E.STOP=3]="STOP"}(o||(o=E("ECameraState",{}))),function(E){E[E.PLAYER=0]="PLAYER",E[E.GREEN=1]="GREEN",E[E.RED=2]="RED"}(n||(n=E("EBloodType",{}))),function(E){E[E.ball=1]="ball",E[E.plane=2]="plane",E[E.wall=4]="wall",E[E.number_wall=8]="number_wall",E[E.monster=16]="monster"}(I||(I=E("EColliderGroup",{}))),function(E){E[E.PLAYER=16]="PLAYER",E[E.PLAYER_SOLDIER=18]="PLAYER_SOLDIER",E[E.ENEMY_SOLDIER=28]="ENEMY_SOLDIER",E[E.ENEMY_LIMIT=8]="ENEMY_LIMIT",E[E.OUT_LIMIT=16]="OUT_LIMIT"}(T||(T=E("ECanColliderGroup",{}))),function(E){E[E.ADD=1]="ADD",E[E.CUT=2]="CUT",E[E.MULTIPLY=3]="MULTIPLY",E[E.MULTIPLY2=4]="MULTIPLY2",E[E.EXCEPT=5]="EXCEPT"}(a||(a=E("EBuffType",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/EBossSkill.ts",["cc"],(function(L){"use strict";var s;return{setters:[function(L){s=L.cclegacy}],execute:function(){var t;L("EBossSkill",void 0),s._RF.push({},"566f8LnV99DvKEt7oja0n+L","EBossSkill",void 0),function(L){L[L.SKILL_FIRE=1]="SKILL_FIRE",L[L.SKILL_LIGHTNING=2]="SKILL_LIGHTNING",L[L.SKILL_BALL=3]="SKILL_BALL"}(t||(t=L("EBossSkill",{}))),s._RF.pop()}}}));

System.register("chunks:///_virtual/LevelToolNumWall.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,l,r,a,i,n,o,u,s,c,p,y,m,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,l=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.defineProperty,n=e.createClass},function(e){o=e.cclegacy,u=e._decorator,s=e.Color,c=e.CCString,p=e.CCInteger,y=e.color,m=e.instantiate,f=e.director,h=e.Component}],execute:function(){var b,g,d,v,C,w,N,B,I,V,_,z;o._RF.push({},"5ce42dkqQBEIb9GIvtTaz5J","LevelToolNumWall",void 0);var L=u.ccclass,T=u.property;e("LevelToolNumWall",(b=L("LevelToolNumWall"),g=T({type:s,displayName:"面片颜色"}),d=T({type:c,displayName:"数字"}),v=T({type:Boolean,displayName:"是否改变球颜色"}),C=T({type:s,displayName:"穿过-球颜色",visible:function(){return this.isChangeBall}}),w=T({type:p,displayName:"穿过-球缩放",visible:function(){return this.isChangeBall}}),b((I=t((B=function(e){function t(){for(var t,l=arguments.length,n=new Array(l),o=0;o<l;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,r(a(t),"wallColor",I,a(t)),i(a(t),"_wallValue","+100"),r(a(t),"isChangeBall",V,a(t)),r(a(t),"ballColor",_,a(t)),r(a(t),"ballScale",z,a(t)),t}l(t,e);var o=t.prototype;return o.setValue=function(){},o.instantiateNd=function(e,t){this.mapItem.getChildByName(e)||(console.warn("错误 在mapItem中找不到 "+e),console.error("error"));var l=m(this.mapItem.getChildByName(e));return l.parent=t||this.node,l},n(t,[{key:"wallValue",get:function(){return this._wallValue},set:function(e){this._wallValue!=e&&(this._wallValue=e,this.setValue())}},{key:"mapItem",get:function(){var e;return null===(e=f.getScene())||void 0===e?void 0:e.getChildByName("mapItem")}}]),t}(h)).prototype,"wallColor",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y()}}),t(B.prototype,"wallValue",[d],Object.getOwnPropertyDescriptor(B.prototype,"wallValue"),B.prototype),V=t(B.prototype,"isChangeBall",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=t(B.prototype,"ballColor",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y()}}),z=t(B.prototype,"ballScale",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),N=B))||N));o._RF.pop()}}}));

System.register("chunks:///_virtual/FollowMovement.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,o,n,r,s,a,l,p,u,c,d,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.defineProperty,s=t.createClass},function(t){a=t.cclegacy,l=t._decorator,p=t.Node,u=t.CCFloat,c=t.v3,d=t.Vec3,h=t.Component}],execute:function(){var y,f,b,g,m,w,L,v,z,N,R,C,P,F,S,k,x;a._RF.push({},"62c6bYOT19FwoeFRC6pb+RK","FollowMovement",void 0);var M=l.ccclass,_=l.property;t("FollowMovement",(y=M("FollowMovement"),f=_({type:p,displayName:"跟随目标节点"}),b=_({type:u,displayName:"目标移动多远记录一次距离"}),g=_({type:u,displayName:"记录还剩多少时停止移动"}),m=_({type:u,displayName:"走速度"}),w=_({type:u,displayName:"跑速度"}),L=_({type:u,displayName:"速度变化的缓动率"}),v=_({type:u,displayName:"距离目标多远后开始跑（单位是List的Item数）"}),y((R=e((N=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,o(n(e),"targetNd",R,n(e)),o(n(e),"recordGap",C,n(e)),o(n(e),"stopCount",P,n(e)),o(n(e),"walkSpeed",F,n(e)),o(n(e),"runSpeed",S,n(e)),o(n(e),"speedLerpRant",k,n(e)),o(n(e),"startRunCount",x,n(e)),r(n(e),"posList",[]),r(n(e),"velocity",c()),e}i(e,t);var a=e.prototype;return a.onLoad=function(){},a.update=function(){if(this.targetNd){for(;this.posList.length>0&&d.distance(c(this.node.worldPosition.x,0,this.node.worldPosition.z),c(this.posList[0].x,0,this.posList[0].z))<this.recordGap;)this.posList.shift();this.posList.length>0?(d.distance(this.targetNd.worldPosition,this.posList[this.posList.length-1])>this.recordGap&&this.posList.push(this.targetNd.worldPosition.clone()),this.posList.length>this.stopCount?this.velocity=c(this.posList[0].x-this.node.worldPosition.x,0,this.posList[0].z-this.node.worldPosition.z).normalize().multiplyScalar(this.walkSpeed):this.velocity=d.lerp(c(),this.velocity,d.ZERO,this.speedLerpRant),this.node.translate(this.velocity,1)):this.posList.push(this.targetNd.worldPosition.clone())}},a.onDisable=function(){this.posList=[]},s(e,[{key:"isRunning",get:function(){return this.posList.length>this.startRunCount}}]),e}(h)).prototype,"targetNd",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(N.prototype,"recordGap",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),P=e(N.prototype,"stopCount",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),F=e(N.prototype,"walkSpeed",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),S=e(N.prototype,"runSpeed",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),k=e(N.prototype,"speedLerpRant",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),x=e(N.prototype,"startRunCount",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),z=N))||z));a._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterTool.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,r,i,n,a,s,l,p,c,d,h,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.defineProperty,i=e.assertThisInitialized,n=e.initializerDefineProperty,a=e.createClass},function(e){s=e.cclegacy,l=e._decorator,p=e.Vec3,c=e.v3,d=e.SkeletalAnimation,h=e.Node,y=e.Component}],execute:function(){var u,f,g,m,N,P,b,w,S,v,C,O,A,D,R,k,z;s._RF.push({},"64416bYTsRFKrQQtnfuHrwm","MonsterTool",void 0);var H=l.ccclass,I=l.property;e("MonsterTool",(u=H("MonsterTool"),f=I({type:p,displayName:"排布属性"}),g=I({displayName:"当前节点下宠物节点排布"}),m=I({tooltip:"播放动作名称,不填则播放默认动作"}),N=I({displayName:"当前节点下宠物动作"}),P=I({displayName:"创建宠物节点1-20"}),b=I({displayName:"更改子节点名字为rw"}),w=I({displayName:"增加血量节点"}),S=I({displayName:"宠物阶数"}),v=I({displayName:"宠物缩放倍数"}),C=I({displayName:"调整宠物大小"}),u((D=t((A=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,r(i(t),"isSort",!0),r(i(t),"isPlayAni",!0),r(i(t),"isCreatPet",!0),r(i(t),"isChangeName",!0),r(i(t),"isAddHpRoot",!0),r(i(t),"isPetScale",!0),n(i(t),"sortInfo",D,i(t)),n(i(t),"aniName",R,i(t)),n(i(t),"petOrder",k,i(t)),n(i(t),"petScale",z,i(t)),t}o(t,e);var s=t.prototype;return s.updateNodeSort=function(){for(var e=0;e<this.node.children.length;e++){this.node.children[e].position=c(e%this.sortInfo.z*this.sortInfo.x,0,Math.floor(e/this.sortInfo.z)*this.sortInfo.y)}},s.playNdAni=function(){for(var e=0;e<this.node.children.length;e++){var t=this.node.children[e].getComponentsInChildren(d);if(t&&t[0]){var o=this.aniName;""==o&&(o=t[0].defaultClip.name),console.log("播放成功",o),t[0].play(o)}}},s.start=function(){},a(t,[{key:"nodeSort",get:function(){return!this.isSort},set:function(e){this.isSort=!1,this.updateNodeSort()}},{key:"playAni",get:function(){return!this.isPlayAni},set:function(e){this.isPlayAni=!1,this.playNdAni(),console.log("当前节点下宠物动作")}},{key:"creatPet",get:function(){return!this.isCreatPet},set:function(e){this.isCreatPet=!1;for(var t=1;t<=20;t++)for(var o=1;o<=3;o++){var r=100*(1e3+t)+o;this.node.addChild(new h(r.toString()))}console.log("创建宠物节点1-20")}},{key:"changeName",get:function(){return!this.isChangeName},set:function(e){this.isChangeName=!1;for(var t=0;t<this.node.children.length;t++)this.node.children[t].children[0].name="rw",this.node.children[t].children[0].position=c();console.log("更改子节点名字为rw")}},{key:"addHpRoot",get:function(){return!this.isAddHpRoot},set:function(e){this.isAddHpRoot=!1;for(var t=0;t<this.node.children.length;t++)this.node.children[t].getChildByName("blood")||this.node.children[t].addChild(new h("blood"));console.log("增加血量节点")}},{key:"changePetScale",get:function(){return!this.isPetScale},set:function(e){this.isPetScale=!1;for(var t=0;t<this.node.children.length;t++)if(this.node.children[t].getChildByName("rw")&&Number(this.node.children[t].name.split("_")[1])%10==this.petOrder){var o=this.node.children[t].getChildByName("rw").scale.x*this.petScale;o=Math.floor(100*o)/100,this.node.children[t].getChildByName("rw").scale=c(o,o,o)}console.log("调整宠物大小")}}]),t}(y)).prototype,"sortInfo",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c(5,3,3)}}),t(A.prototype,"nodeSort",[g],Object.getOwnPropertyDescriptor(A.prototype,"nodeSort"),A.prototype),R=t(A.prototype,"aniName",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(A.prototype,"playAni",[N],Object.getOwnPropertyDescriptor(A.prototype,"playAni"),A.prototype),t(A.prototype,"creatPet",[P],Object.getOwnPropertyDescriptor(A.prototype,"creatPet"),A.prototype),t(A.prototype,"changeName",[b],Object.getOwnPropertyDescriptor(A.prototype,"changeName"),A.prototype),t(A.prototype,"addHpRoot",[w],Object.getOwnPropertyDescriptor(A.prototype,"addHpRoot"),A.prototype),k=t(A.prototype,"petOrder",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=t(A.prototype,"petScale",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),t(A.prototype,"changePetScale",[C],Object.getOwnPropertyDescriptor(A.prototype,"changePetScale"),A.prototype),O=A))||O));s._RF.pop()}}}));

System.register("chunks:///_virtual/EAniDefine.ts",["cc"],(function(e){"use strict";var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){var n;e("EAniDefine",void 0),i._RF.push({},"6be20XV8jxBOKmoEMGx3oja","EAniDefine",void 0),function(e){e.IDLE="idle",e.RUN="run",e.HIT="hit",e.ATTACK1="attackcycle",e.DIED="died",e.SUCC="success"}(n||(n=e("EAniDefine",{}))),i._RF.pop()}}}));

System.register("chunks:///_virtual/FreeFlightCamera.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./FLGloable.ts"],(function(e){"use strict";var t,o,i,n,r,s,a,c,h,p,l,u,y,d,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,r=e.defineProperty},function(e){s=e.cclegacy,a=e._decorator,c=e.math,h=e.KeyCode,p=e.CCFloat,l=e.systemEvent,u=e.SystemEvent,y=e.game,d=e.Component},function(e){v=e.FLGloable}],execute:function(){var f,_,S,m,E,T,C,g,w,z,F,b;s._RF.push({},"6c841mU+4JNvqwHy5tJsJh0","FreeFlightCamera",void 0);var k=a.ccclass,A=a.property,x=a.menu,L=c.Vec2,U=c.Vec3,D=c.Quat,O=new L,H=new L,K=new U,M=new D,P="W".charCodeAt(0),W="S".charCodeAt(0),N="A".charCodeAt(0),R="D".charCodeAt(0),Y="Q".charCodeAt(0),q="E".charCodeAt(0),Q=h.SHIFT_LEFT;e("FreeFlightCamera",(f=k("FreeFlightCamera"),_=x("game/camera/FreeFlightCamera"),S=A({type:p,tooltip:"移动速度"}),m=A({type:p,tooltip:"按Shift键后的速度"}),E=A({type:p,slide:!0,range:[.05,.5,.01],tooltip:"移动后惯性效果"}),T=A({type:p,tooltip:"旋转速度"}),f(C=_((w=t((g=function(e){function t(){for(var t,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,i(n(t),"moveSpeed",w,n(t)),i(n(t),"moveSpeedShiftScale",z,n(t)),i(n(t),"damp",F,n(t)),i(n(t),"rotateSpeed",b,n(t)),r(n(t),"_euler",new U),r(n(t),"_velocity",new U),r(n(t),"_position",new U),r(n(t),"_speedScale",1),t}o(t,e);var s=t.prototype;return s.onLoad=function(){l.on(u.EventType.MOUSE_WHEEL,this.onMouseWheel,this),l.on(u.EventType.KEY_DOWN,this.onKeyDown,this),l.on(u.EventType.KEY_UP,this.onKeyUp,this),l.on(u.EventType.TOUCH_START,this.onTouchStart,this),l.on(u.EventType.TOUCH_MOVE,this.onTouchMove,this),l.on(u.EventType.TOUCH_END,this.onTouchEnd,this),U.copy(this._euler,this.node.eulerAngles),U.copy(this._position,this.node.position)},s.onDestroy=function(){l.off(u.EventType.MOUSE_WHEEL,this.onMouseWheel,this),l.off(u.EventType.KEY_DOWN,this.onKeyDown,this),l.off(u.EventType.KEY_UP,this.onKeyUp,this),l.off(u.EventType.TOUCH_START,this.onTouchStart,this),l.off(u.EventType.TOUCH_MOVE,this.onTouchMove,this),l.off(u.EventType.TOUCH_END,this.onTouchEnd,this)},s.update=function(e){U.transformQuat(K,this._velocity,c.quat(-45.587,0,0,0)),U.scaleAndAdd(this._position,this._position,K,this.moveSpeed*this._speedScale),U.lerp(K,this.node.position,this._position,e/this.damp),this.node.setPosition(K),D.fromEuler(M,this._euler.x,this._euler.y,this._euler.z),D.slerp(M,this.node.rotation,M,e/this.damp),this.node.setRotation(M)},s.onMouseWheel=function(e){var t=-e.getScrollY()*this.moveSpeed*.1;U.transformQuat(K,U.UNIT_Z,this.node.rotation),U.scaleAndAdd(this._position,this.node.position,K,t)},s.onKeyDown=function(e){var t=this._velocity;e.keyCode===Q?this._speedScale=this.moveSpeedShiftScale:e.keyCode===P?0===t.z&&(t.z=-v.cameraSpeed):e.keyCode===W?0===t.z&&(t.z=v.cameraSpeed):e.keyCode===h.SPACE&&(v.player.active?v.player.active=!1:v.player.active=!0)},s.onKeyUp=function(e){var t=this._velocity;e.keyCode===Q?this._speedScale=1:e.keyCode===P?t.z<0&&(t.z=0):e.keyCode===W?t.z>0&&(t.z=0):e.keyCode===N?t.x<0&&(t.x=0):e.keyCode===R?t.x>0&&(t.x=0):e.keyCode===Y?t.y<0&&(t.y=0):e.keyCode===q&&t.y>0&&(t.y=0)},s.onTouchStart=function(e){y.canvas.requestPointerLock&&y.canvas.requestPointerLock()},s.onTouchMove=function(e){e.getStartLocation(O),O.x>.4*y.canvas.width?(e.getDelta(H),this._euler.y-=H.x*this.rotateSpeed*.1,this._euler.x+=H.y*this.rotateSpeed*.1):(e.getLocation(H),L.subtract(H,H,O),this._velocity.x=.01*H.x,this._velocity.z=.01*-H.y)},s.onTouchEnd=function(e){document.exitPointerLock&&document.exitPointerLock(),e.getStartLocation(O),O.x<.4*y.canvas.width&&(this._velocity.x=0,this._velocity.z=0)},t}(d)).prototype,"moveSpeed",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=t(g.prototype,"moveSpeedShiftScale",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),F=t(g.prototype,"damp",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),b=t(g.prototype,"rotateSpeed",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),C=g))||C)||C));s._RF.pop()}}}));

System.register("chunks:///_virtual/GamePanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Behavior3D.ts","./UIManager.ts","./GamePageEnum.ts"],(function(n){"use strict";var e,t,a,o,i,u;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,a=n._decorator},function(n){o=n.Behavior3D},function(n){i=n.uiManager},function(n){u=n.GamePageEnum}],execute:function(){var c;t._RF.push({},"6d84aKLi/BEKq6HRgciUmZZ","GamePanel",void 0);var s=a.ccclass;a.property,n("GamePanel",s("GamePanel")(c=function(n){function t(){return n.apply(this,arguments)||this}e(t,n);var a=t.prototype;return a.show=function(){},a.onEnabled=function(){},a.update=function(n){},a.showDebugPanel=function(){i.instance.showDialog(u.PAGE_DEBUG)},a.onDisabled=function(){this.unscheduleAllCallbacks()},t}(o))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/EBossState.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var s;t("EBossState",void 0),e._RF.push({},"6fdc4YkqZRK8a3A4wexSwIr","EBossState",void 0),function(t){t.IDLE="idle",t.HIT="hit",t.ATTACK="attack",t.DIED="died"}(s||(s=t("EBossState",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/NumberTool.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameState.ts"],(function(e){"use strict";var t,r,i,n,o,s,a,u,l,p,f,h,c,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.defineProperty},function(e){s=e.cclegacy,a=e._decorator,u=e.Prefab,l=e.Enum,p=e.v4,f=e.instantiate,h=e.MeshRenderer,c=e.Component},function(e){m=e.EBuffType}],execute:function(){var b,y,g,P,v,N,T,w;s._RF.push({},"70a443B9aNPIp+p/uhlebsf","NumberTool",void 0);var d=a.ccclass,M=a.property;e("NumberTool",(b=M({displayName:"设置数字"}),y=M({type:u,displayName:"数字面片预制体"}),g=M({type:l(m),displayName:"数字运算类型"}),d((N=t((v=function(e){function t(){for(var t,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,i(n(t),"showNumber",N,n(t)),i(n(t),"numPerfab",T,n(t)),i(n(t),"styleType",w,n(t)),o(n(t),"seperate",.32),o(n(t),"numTilingOffset",[p(1,1,0,0),p(1,1,0,.25),p(1,1,0,.5),p(1,1,0,.75),p(1,1,.25,0),p(1,1,.25,.25),p(1,1,.25,.5),p(1,1,.25,.75),p(1,1,.5,0),p(1,1,.5,.25),p(1,1,.5,.5),p(1,1,.5,.75),p(1,1,.75,0),p(1,1,.75,.25)]),t}r(t,e);var s=t.prototype;return s.start=function(){},s.setNumber=function(e,t,r){this.showNumber=t,this.numPerfab=r;for(var i=0,n=[];this.showNumber>0&&Math.floor(this.showNumber/10)>=0;){var o=this.showNumber%10;this.showNumber=Math.floor(this.showNumber/10);var s=f(this.numPerfab);s.parent=this.node,n.push(s),s.getComponent(h).material.setProperty("tilingOffset",this.numTilingOffset[o]),i++}var a=10;switch(e){case m.ADD:a=11;break;case m.CUT:a=12;break;case m.MULTIPLY:case m.MULTIPLY2:a=10;break;case m.EXCEPT:a=13}var u=f(this.numPerfab);u.parent=this.node,u.getComponent(h).material.setProperty("tilingOffset",this.numTilingOffset[a]),i++,console.log("加上运算符，总位数为:",i);for(var l=Math.floor(i%2)?0:this.seperate/2,p=0;p<n.length;p++){var c=(Math.floor(i/2)-p)*this.seperate-l,b=n[p].getPosition();b.x=c,n[p].setPosition(b)}var y=n[n.length-1].getPosition();y.x=y.x-this.seperate,u.setPosition(y)},t}(c)).prototype,"showNumber",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),T=t(v.prototype,"numPerfab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(v.prototype,"styleType",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.ADD}}),P=v))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/FLGloable.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./FLStore.ts","./EBossSkill.ts"],(function(l){"use strict";var e,n,o,t,u,r;return{setters:[function(l){e=l.createClass,n=l.defineProperty},function(l){o=l.cclegacy,t=l.color},function(l){u=l.FLStore},function(l){r=l.EBossSkill}],execute:function(){o._RF.push({},"92e4cRBjqlJ76piC+JF5hQQ","FLGloable",void 0);var a=l("FLGloable",function(){function l(){}return e(l,null,[{key:"level",get:function(){return null===l._level&&(l._level=u.get("_newLevel",1)),l._level},set:function(e){e>100||(e=Math.round(e),l._level=e,u.set("_newLevel",e))}}]),l}());n(a,"curGameState",null),n(a,"isWin",!1),n(a,"scene3D",null),n(a,"camera3D",null),n(a,"cameraCom",null),n(a,"cameraSpeed",1e-4),n(a,"effectRoot",null),n(a,"curMonster",null),n(a,"curGround",null),n(a,"mapRoot",null),n(a,"groundRoot",null),n(a,"ballRoot",null),n(a,"lineRoot",null),n(a,"autoDestroyRoot",null),n(a,"curStageNumDoor",[]),n(a,"ballCloneMaterial",null),n(a,"uiParent",null),n(a,"bloodPrefab",[]),n(a,"player",null),n(a,"playerScript",null),n(a,"ballCount",20),n(a,"showBallCount",10),n(a,"ballInterval",.15),n(a,"initBallColor",t(12,34,197.255)),n(a,"initPlayerHp",20),n(a,"boss",null),n(a,"curBossSkill",r.SKILL_FIRE),n(a,"ballPrefab",null),n(a,"closeEffect",!0),n(a,"playerIsInit",!1),n(a,"radians",null),n(a,"angle",null),n(a,"speedGrade",1),n(a,"gameIsStop",!1),n(a,"hasAddFLnative",!1),n(a,"maxLevel",10),n(a,"_level",null),o._RF.pop()}}}));

System.register("chunks:///_virtual/LevelToolBoss.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,s,r,i,n,a,p,l,c,u,y,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,s=e.defineProperty,r=e.assertThisInitialized,i=e.initializerDefineProperty,n=e.createClass},function(e){a=e.cclegacy,p=e._decorator,l=e.Enum,c=e.CCInteger,u=e.v3,y=e.instantiate,d=e.director,h=e.Component}],execute:function(){var m,b,v,f,g,T;a._RF.push({},"95d4e59uMBN3KjIOCg8OQgv","LevelToolBoss",void 0);var B=p.ccclass,_=p.property;e("LevelToolBoss",(m=B("LevelToolBoss"),b=_({type:l({"黑法师":1001,"木乃伊":1002,"蜘蛛":1003,"麒麟":1004}),displayName:"增加boss"}),v=_({type:c,displayName:"血量"}),m((t((g=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,s(r(t),"_bossType",1001),i(r(t),"bloodNum",T,r(t)),t}o(t,e);var a=t.prototype;return a.addBoss=function(){this.node.destroyAllChildren(),this.instantiateNd("boss_"+this._bossType).position=u()},a.instantiateNd=function(e,t){this.mapItem.getChildByName(e)||(console.warn("错误 在mapItem中找不到 "+e),console.error("error"));var o=y(this.mapItem.getChildByName(e));return o.parent=t||this.node,o},n(t,[{key:"bossType",get:function(){return this._bossType},set:function(e){this._bossType!=e&&(this._bossType=e,this.addBoss())}},{key:"mapItem",get:function(){var e;return null===(e=d.getScene())||void 0===e?void 0:e.getChildByName("mapItem")}}]),t}(h)).prototype,"bossType",[b],Object.getOwnPropertyDescriptor(g.prototype,"bossType"),g.prototype),T=t(g.prototype,"bloodNum",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),f=g))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/EEffectName.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var f;t("EEffectName",void 0),e._RF.push({},"a7f76UAoNJOEb/3fVQ8Z4MS","EEffectName",void 0),function(t){t.FIRE="fire",t.BOOM="boom",t.FIRE_HIT="fire-hit",t.LIGHTNING="lightning",t.LIGHTNING_HIT="lightning-hit",t.FLY_BALL="fly-ball",t.FLY_BALL_HIT="fly-ball-hit"}(f||(f=t("EEffectName",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/MapManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GamePrefabs.ts","./LocalConfig.ts","./Vec3Util.ts","./Behavior3D.ts","./PoolManager.ts","./UIManager.ts","./GamePageEnum.ts","./FLGloable.ts","./GameEvenEnum.ts","./MonsterBase.ts","./MapPrefabEnum.ts","./GameState.ts","./MainPlayer.ts","./NumberWall.ts"],(function(e){"use strict";var t,o,n,a,r,l,i,s,c,u,p,g,d,m,f,h,C,y,b,v,P,M,B,N,R,G,w,D,_;return{setters:[function(e){t=e.defineProperty,o=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){l=e.cclegacy,i=e._decorator,s=e.Material,c=e.setDisplayStats,u=e.sys,p=e.Camera,g=e.find,d=e.Node,m=e.BoxCollider,f=e.CapsuleCollider},function(e){h=e.GamePrefabs},function(e){C=e.LocalConfig},function(e){y=e.Vec3Util},function(e){b=e.Behavior3D},function(e){v=e.PoolManager},function(e){P=e.uiManager},function(e){M=e.GamePageEnum},function(e){B=e.FLGloable},function(e){N=e.GameEvenEnum},function(e){R=e.MonsterBase},function(e){G=e.MapPrefabEnum},function(e){w=e.EColliderGroup},function(e){D=e.MainPlayer},function(e){_=e.NumberWall}],execute:function(){var E,S,A,L,I,T,F;l._RF.push({},"c1219BAvEZKqbpsijwHeUDD","MapManager",void 0);var x=i.ccclass,k=i.property;e("MapManager",(E=x("MapManager"),S=k({type:s,displayName:"克隆材质球"}),E((F=T=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),l=0;l<o;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,a(r(t),"ballCloneMaterial",I,r(t)),t}n(t,e);var o=t.prototype;return o.onLoad=function(){if(c(!1),t.instance=this,this.initEvent(),this.initStart(),console.log("当前设备环境浏览器",u.isBrowser),u.isBrowser){var e=window.location.search.substring(1);if(e){for(var o={},n=e.split("&"),a=0;a<n.length;a++)if(!(n[a].indexOf("=")<=-1)){var r=n[a].split("=");o[r[0]]=r[1]}o.debug&&"true"==o.debug&&P.instance.showDialog(M.PAGE_DEBUG)}}B.curGameState=N.GAME_READY,P.instance.showDialog(M.PAGE_GAME)},o.initEvent=function(){this.registerEvent(N.CHANGE_BOSS,this.onChangeBoss,this),this.registerEvent(N.CHANGE_FLOOR,this.onChangeFloor,this)},o.initStart=function(){B.scene3D=this.node.parent,B.camera3D=B.scene3D.getChildByName("Main Camera"),B.cameraCom=B.camera3D.getComponent(p),B.player=B.scene3D.getChildByName("player"),B.effectRoot=g("effectManager"),B.mapRoot=new d("mapRoot"),B.mapRoot.parent=this.node,B.groundRoot=new d("groundRoot"),B.groundRoot.parent=this.node,B.ballRoot=new d("ballRoot"),B.ballRoot.parent=this.node,B.lineRoot=new d("lineRoot"),B.lineRoot.parent=this.node,B.uiParent=g("Canvas").getChildByName("normal"),B.ballCloneMaterial=this.ballCloneMaterial,this.initLevel()},o.initLevel=function(){this.onClear(),this.initMap()},o.onClear=function(){console.log("clear scene !!!"),B.isWin=!1,B.gameIsStop=!1,B.ballRoot.destroyAllChildren(),B.groundRoot.destroyAllChildren(),B.mapRoot.destroyAllChildren(),B.lineRoot.destroyAllChildren()},o.initMap=function(){var e=B.level;e>B.maxLevel&&(e=B.maxLevel),B.curStageNumDoor=[];var t=C.instance.getTable("map"+e);for(var o in t){var n=t[o],a=n.name,r=n.pos,l=n.other,i=void 0;switch(a){case G.map_player:y.setNdPosRotScaleByDate(B.player,r,!0),B.showBallCount=Number(l.split("|")[0]),B.initBallColor=y.stringToColor(l.split("|")[1]),B.ballPrefab=h.getInstance().res.ball_10001;break;case G.map_number_wall:i=v.getInstance().getPrefabNodeByPool(a,B.groundRoot);var s=y.stringToVec3(r.split("|")[0]),c=y.stringToVec3(r.split("|")[1]),u=y.stringToVec3(r.split("|")[2]);i.worldPosition=s,i.eulerAngles=c;var p=l.split("|"),g=y.stringToColor(p[0]),d=p[1],b=p.length>2?y.stringToColor(p[2]):null,P=p.length>2?Number(p[3]):null,M=i.getComponent(_);M||(M=i.addComponent(_)),M.init(u,g,d,b,P),B.curStageNumDoor.push(M);break;case G.map_boss:var N=Number(l.split("|")[0]),D=Number(l.split("|")[1]);i=v.getInstance().getPrefabNodeByPool("boss_"+N,B.groundRoot),y.setNdPosRotScaleByDate(i,r,!0),i.getComponent(f).setGroup(w.monster);var E=i.getComponent(R);E||(E=i.addComponent(R)),E.init(D),B.curMonster=i;break;case G.map_ground:if(i=v.getInstance().getPrefabNodeByPool(a,B.groundRoot),y.setNdPosRotScaleByDate(i,r,!0),B.curGround=i,i.getChildByName("Plane").getComponent(m).setGroup(w.plane),i.getChildByName("leftPlane").getComponent(m).setGroup(w.wall),i.getChildByName("rightPlane").getComponent(m).setGroup(w.wall),i.getChildByName("boss_wall").getComponent(m).setGroup(w.plane),i.getChildByName("boss_wall2").getComponent(m).setGroup(w.plane),l){var S=l.split("&");y.setNdPosRotScaleByDate(i.getChildByName("boss_wall"),S[0],!0),y.setNdPosRotScaleByDate(i.getChildByName("boss_wall2"),S[1],!0)}break;case G.map_wall:i=v.getInstance().getPrefabNodeByPool(a,B.groundRoot),y.setNdPosRotScaleByDate(i,r,!0),i.getComponent(m).setGroup(w.wall)}}this.initPlayer()},o.initPlayer=function(){B.player.active=!0,B.playerScript||(B.playerScript=B.player.addComponent(D)),B.playerScript.init()},o.onNextLevel=function(){this.initLevel()},o.onChangeBoss=function(e){var t=B.curMonster.getComponent(R).bossHealth,o=v.getInstance().getPrefabNodeByPool("boss_"+e,B.groundRoot);o.worldPosition=B.curMonster.worldPosition,o.rotation=B.curMonster.rotation,o.scale=B.curMonster.scale,o.getComponent(f).setGroup(w.monster);var n=o.getComponent(R);n||(n=o.addComponent(R)),n.init(t),B.curMonster.destroy(),B.curMonster=null,B.curMonster=o},o.onChangeFloor=function(e){var t=B.curGround.getChildByName("Plane");t.removeAllChildren(),v.getInstance().getPrefabNodeByPool("floor00"+e,t)},o.removeMapRoot=function(e){for(;e.children.length>0;)v.getInstance().putNode(e.children[0])},t}(b),t(T,"instance",void 0),I=o((L=F).prototype,"ballCloneMaterial",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=L))||A));l._RF.pop()}}}));

System.register("chunks:///_virtual/BallNum.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIEvenEnum.ts","./FLGloable.ts","./GameState.ts"],(function(t){"use strict";var e,i,n,l,r,a,o,s,c,u,p,h,y,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,l=t.assertThisInitialized,r=t.defineProperty},function(t){a=t.cclegacy,o=t._decorator,s=t.Label,c=t.CCInteger,u=t.systemEvent,p=t.Component},function(t){h=t.UIEvenEnum},function(t){y=t.FLGloable},function(t){f=t.EState}],execute:function(){var b,v,g,m,d,C,P;a._RF.push({},"c39afdHAgpCG4bSIhz+kG5o","BallNum",void 0);var A=o.ccclass,E=o.property;t("BallNum",(b=A("BallNum"),v=E({type:s,tooltip:"球数字体"}),g=E({type:c,tooltip:"高度"}),b((C=e((d=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(l(e),"ballText",C,l(e)),n(l(e),"high",P,l(e)),r(l(e),"playerActive",!0),r(l(e),"ballNum",0),e}i(e,t);var a=e.prototype;return a.onLoad=function(){var t=this;u.on(h.UPDATE_PLAYER_BALL,this.onChangePlayerball,this),this.scheduleOnce((function(){t.onChangePlayerball(y.showBallCount)}),.2)},a.onChangePlayerball=function(t){this.playerActive=!0,this.ballText.string="X"+t,this.ballNum=t},a.update=function(t){if(this.playerActive&&y.playerScript){if(y.playerScript.curState===f.DIED)return this.playerActive=!1,void(this.ballText.string="");if(y.player.active){this.ballText.string="X"+y.showBallCount;var e=y.cameraCom.convertToUINode(y.player.worldPosition,this.node.parent);this.node.setPosition(e.x,e.y+this.high)}else this.ballText.string=""}},e}(p)).prototype,"ballText",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(d.prototype,"high",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=d))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/joystick.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Behavior3D.ts","./UIEvenEnum.ts","./FLGloable.ts","./GameEvenEnum.ts"],(function(t){"use strict";var e,i,n,o,s,a,r,h,c,l,u,d,v,_,p,E,g,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.defineProperty,a=t.createClass},function(t){r=t.cclegacy,h=t._decorator,c=t.Enum,l=t.view,u=t.Node,d=t.Vec3,v=t.systemEvent,_=t.UITransformComponent},function(t){p=t.Behavior3D},function(t){E=t.UIEvenEnum},function(t){g=t.FLGloable},function(t){f=t.GameEvenEnum}],execute:function(){var T,y,m,S,b,R,C,D,L,O,A,P,M,U,w,F,N;r._RF.push({},"cb632XAFCxCrZeVvBnfx844","joystick",void 0);var G=h.ccclass,H=h.property,z=c({DEFAULT:0,FOLLOW:1,FOLLOW_ALWAYS:2,FOLLOW_DOT:3}),I=c({FOUR:4,EIGHT:8,ALL:0}),k=l.getVisibleSize().height;t("Joystick",(T=G("Joystick"),y=H({type:u,displayName:"摇杆背景节点"}),m=H({type:u,displayName:"摇杆节点"}),S=H({type:z,displayName:"触摸类型"}),b=H({type:I,displayName:"方向类型"}),R=H({displayName:"启动半透明"}),C=H({displayName:"点击跟随"}),D=H({displayName:"内圈大小"}),T((A=e((O=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(o(e),"ndRing",A,o(e)),n(o(e),"ndDot",P,o(e)),n(o(e),"touchType",M,o(e)),n(o(e),"directionType",U,o(e)),n(o(e),"isEnableTransparent",w,o(e)),n(o(e),"isFollowStart",F,o(e)),n(o(e),"innerSize",N,o(e)),s(o(e),"onClickCb",null),s(o(e),"onEndCb",null),s(o(e),"clearFECb",null),s(o(e),"onBeginFECb",null),s(o(e),"onSuccessFECb",null),s(o(e),"isMoving",!1),s(o(e),"_angle",0),s(o(e),"_stickPos",new d),s(o(e),"_oriRingPos",null),s(o(e),"_touchStartLocation",new d),s(o(e),"_touchMoveLocation",new d),s(o(e),"_distanceRate",0),s(o(e),"_oriDotPos",new d),s(o(e),"_movePos",new d),e}i(e,t);var r=e.prototype;return r.eventShow=function(){this.isMoving=!1,this.ndDot.setPosition(this._oriDotPos),this.ndRing.active=!1,g.radians=g.angle=null,this.node.off(u.EventType.TOUCH_START,this._touchStartEvent,this),this.node.off(u.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.off(u.EventType.TOUCH_END,this._touchEndEvent,this),this.node.off(u.EventType.TOUCH_CANCEL,this._touchEndEvent,this),this.onEnabled()},r.onEnabled=function(){this.node.on(u.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(u.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(u.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(u.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},r.onDisabled=function(){this.node.off(u.EventType.TOUCH_START,this._touchStartEvent,this),this.node.off(u.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.off(u.EventType.TOUCH_END,this._touchEndEvent,this),this.node.off(u.EventType.TOUCH_CANCEL,this._touchEndEvent,this),this.isMoving=!1,this.ndDot.setPosition(this._oriDotPos),this._oriRingPos&&this.ndRing.setPosition(this._oriRingPos)},r._touchStartEvent=function(t){var e;if(!g.gameIsStop){g.curGameState==f.GAME_READY&&(g.curGameState=f.GAME_STARTED,v.emit(f.GAME_STARTED)),v.emit(E.UI_TOUCH_START);var i=t.getUILocation();this._touchStartLocation.set(i.x,i.y,0);var n=null===(e=this.node.getComponent(_))||void 0===e?void 0:e.convertToNodeSpaceAR(this._touchStartLocation);if(this._oriRingPos||(this._oriRingPos=this.ndRing.getPosition().clone()),this._stickPos.set(n),!this.isFollowStart){var o,s;this.ndRing.active=!0;var a=(n=null===(o=this.ndRing.getComponent(_))||void 0===o?void 0:o.convertToNodeSpaceAR(this._touchStartLocation)).length();return(null===(s=this.ndRing.getComponent(_))||void 0===s?void 0:s.contentSize.width)/2>a&&(this.ndDot.setPosition(n),this._updateAngle(n),!0)}this.touchType===z.FOLLOW&&(n.y=n.y>=-k/6?-k/6:n.y),this.ndRing.active=!0,this.ndRing.setPosition(n)}},r._touchMoveEvent=function(t){var e,i;if(!g.gameIsStop&&g.curGameState==f.GAME_STARTED){var n=t.getUILocation();this._touchMoveLocation.set(n.x,n.y,0);var o=null===(e=this.ndRing.getComponent(_))||void 0===e?void 0:e.convertToNodeSpaceAR(this._touchMoveLocation),s=o.length();s>this.innerSize&&(this.isMoving=!0);var a=(null===(i=this.ndRing.getComponent(_))||void 0===i?void 0:i.contentSize.width)/2;if(g.speedGrade=0,a>s)g.speedGrade=Number((s/a).toFixed(3)),this.ndDot.setPosition(o);else if(this.touchType!==z.FOLLOW_DOT){g.speedGrade=1;var r=Math.atan2(o.y,o.x),h=Math.cos(r)*a,c=Math.sin(r)*a;this._movePos.set(h,c,0),this.ndDot.setPosition(this._movePos)}else this.ndDot.setPosition(o);this._updateAngle(o),this._distanceRate=g.speedGrade}},r._touchEndEvent=function(t){g.gameIsStop||g.curGameState==f.GAME_STARTED&&(v.emit(E.UI_TOUCH_END),this.isMoving=!1,this.ndDot.setPosition(this._oriDotPos),this.ndRing.active=!1,g.radians=g.angle=null)},r._updateAngle=function(t){var e=this._angle;if(this._angle=180*Math.atan2(t.y,t.x)/Math.PI,!(Math.abs(e-this.angle)<.1))return g.angle=this._angle,g.radians=Math.PI/180*g.angle,v.emit(E.UI_TOUCH_MOVE),this._angle},r.reset=function(){this.isMoving=!1,this.ndDot.setPosition(this._oriDotPos)},a(e,[{key:"distanceRate",get:function(){return this._distanceRate}},{key:"angle",get:function(){return this._angle},set:function(t){this._angle=t}}]),e}(p)).prototype,"ndRing",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(O.prototype,"ndDot",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(O.prototype,"touchType",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.DEFAULT}}),U=e(O.prototype,"directionType",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return I.ALL}}),w=e(O.prototype,"isEnableTransparent",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=e(O.prototype,"isFollowStart",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=e(O.prototype,"innerSize",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),L=O))||L));r._RF.pop()}}}));

System.register("chunks:///_virtual/DebugPanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GamePrefabs.ts","./PoolManager.ts","./UIManager.ts","./GamePageEnum.ts","./UIEvenEnum.ts","./FLGloable.ts","./GameEvenEnum.ts","./MapManager.ts"],(function(t){"use strict";var e,n,i,o,l,a,r,u,s,c,p,g,b,f,d,m,h,E,y,B,v,C,N;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,l=t.defineProperty},function(t){a=t.cclegacy,r=t._decorator,u=t.Node,s=t.Label,c=t.Prefab,p=t.EditBox,g=t.systemEvent,b=t.EventHandler,f=t.Button,d=t.Component},function(t){m=t.GamePrefabs},function(t){h=t.PoolManager},function(t){E=t.uiManager},function(t){y=t.GamePageEnum},function(t){B=t.UIEvenEnum},function(t){v=t.FLGloable},function(t){C=t.GameEvenEnum},function(t){N=t.MapManager}],execute:function(){var P,S,D,w,I,_,z,L,A,G,x,O,T,H,M,F,R,k,U,W,Y,j,J,X,q,K,Q,V,Z,$,tt,et,nt,it,ot,lt,at,rt,ut;a._RF.push({},"cd537XhEvpBiLocfJ0s9uai","DebugPanel",void 0);var st=r.ccclass,ct=r.property;t("DebugPanel",(P=st("DebugPanel"),S=ct({type:u,tooltip:"普通调试按钮"}),D=ct({type:u,tooltip:"关卡调试按钮"}),w=ct({type:s,tooltip:"切换面板按钮文字"}),I=ct({type:c,tooltip:"切换数字门调试预制体"}),_=ct({type:p,tooltip:"帽子输入框"}),z=ct({type:p,tooltip:"衣服输入框"}),L=ct({type:p,tooltip:"武器输入框"}),A=ct({type:p,tooltip:"BOSS输入框"}),G=ct({type:p,tooltip:"地面输入框"}),x=ct({type:p,tooltip:"关卡输入框"}),O=ct({type:p,tooltip:"BOSS血量输入框"}),T=ct({type:p,tooltip:"BOSS技能输入框"}),H=ct({type:p,tooltip:"玩家血量输入框"}),M=ct({type:p,tooltip:"球体颜色输入框"}),F=ct({type:p,tooltip:"球体数量输入框"}),R=ct({type:p,tooltip:"球体间隔输入框"}),k=ct({type:p,tooltip:"相机速度输入框"}),U=ct({type:s,tooltip:"切换特效文字"}),P((j=e((Y=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(o(e),"normalButton",j,o(e)),i(o(e),"stageButton",J,o(e)),i(o(e),"changeButtonText",X,o(e)),i(o(e),"numberDoorChange",q,o(e)),i(o(e),"capEdit",K,o(e)),i(o(e),"bodyEdit",Q,o(e)),i(o(e),"weaponEdit",V,o(e)),i(o(e),"bossEdit",Z,o(e)),i(o(e),"floorEdit",$,o(e)),i(o(e),"stageEdit",tt,o(e)),i(o(e),"bossBloodEdit",et,o(e)),i(o(e),"bossSkillEdit",nt,o(e)),i(o(e),"playerBloodEdit",it,o(e)),i(o(e),"ballColorEdit",ot,o(e)),i(o(e),"ballNumEdit",lt,o(e)),i(o(e),"ballIntervalEdit",at,o(e)),i(o(e),"cameraSpeedEdit",rt,o(e)),i(o(e),"closeEffectText",ut,o(e)),l(o(e),"isNormal",!1),l(o(e),"_debugPetLevel",1),e}n(e,t);var a=e.prototype;return a.onLoad=function(){this.onChangePanel()},a.onEnable=function(){console.log("打开调试")},a.show=function(){},a.onBtnClose=function(){E.instance.hideDialog(y.PAGE_DEBUG)},a.onChangePanel=function(){this.isNormal?(this.normalButton.active=!1,this.stageButton.active=!0,this.stageButton.destroyAllChildren(),this.initCurStageNumDoor(),this.changeButtonText.string="切换正常调试",this.isNormal=!1):this.isNormal||(this.normalButton.active=!0,this.stageButton.active=!1,this.changeButtonText.string="切换数字门调试",this.isNormal=!0)},a.changeCap=function(){g.emit(C.CHANGE_CAP,parseInt(this.capEdit.string))},a.changeBody=function(){g.emit(C.CHANGE_BODY,parseInt(this.bodyEdit.string))},a.changeWeapon=function(){g.emit(C.CHANGE_WEAPON,parseInt(this.weaponEdit.string))},a.changeBoss=function(){g.emit(C.CHANGE_BOSS,parseInt(this.bossEdit.string))},a.changeFloor=function(){console.log("xxx"),g.emit(C.CHANGE_FLOOR,parseInt(this.floorEdit.string))},a.changeStage=function(){v.level=parseInt(this.stageEdit.string),v.level>0&&v.level<5||(v.level=4),N.instance.onNextLevel()},a.changeBossBlood=function(){g.emit(C.CHANGE_BOSS_BLOOD,parseInt(this.bossBloodEdit.string))},a.changeBossSkill=function(){v.curBossSkill=parseInt(this.bossSkillEdit.string)},a.changePlayerBlood=function(){g.emit(C.CHANGE_PLAYER_HP,parseInt(this.playerBloodEdit.string))},a.changeBallColor=function(){v.ballPrefab=m.getInstance().res["ball_1000"+parseInt(this.ballColorEdit.string)]},a.changeBallNum=function(){v.ballCount=parseInt(this.ballNumEdit.string),g.emit(B.UPDATE_PLAYER_BALL,v.ballCount)},a.changeBalInterval=function(){v.ballInterval=parseFloat(this.ballIntervalEdit.string)},a.changeCameraSpeed=function(){v.cameraSpeed=parseFloat(this.cameraSpeedEdit.string)/1e4},a.closeEffect=function(){v.closeEffect?(this.closeEffectText.string="开启特效",v.closeEffect=!1):(this.closeEffectText.string="关闭特效",v.closeEffect=!0)},a.initStage=function(){N.instance.onNextLevel(),g.emit(C.GAME_RESET)},a.onBtnOpenDebug=function(){this.node.getChildByName("debugRoot").active=!this.node.getChildByName("debugRoot").active},a.initCurStageNumDoor=function(){for(var t=0;t<v.curStageNumDoor.length;t++){var e=h.getInstance().getNode(this.numberDoorChange,this.stageButton),n=v.curStageNumDoor[t].getNumberWallDate();e.getChildByName("name").getComponent(s).string="数字门"+t,e.getChildByName("number").getComponent(p).placeholder="当前为{"+n[0]+"}";var i=new b;i.target=this.node,i.component="DebugPanel",i.handler="onChangeNumDoor",i.customEventData=""+t,e.getChildByName("Button").getComponent(f).clickEvents.push(i)}},a.onChangeNumDoor=function(t,e){var n=parseInt(e),i=this.stageButton.children[n].getChildByName("number").getComponent(p).string;i&&v.curStageNumDoor[n].resetNumberWall(i)},a.onBtnAddCoin=function(){},a.onBtnAddCoin2=function(){},a.debugPetLevelChang=function(t,e,n){this._debugPetLevel=Number(t)},a.lvDebug=function(){v.level=this._debugPetLevel,N.instance.onNextLevel()},e}(d)).prototype,"normalButton",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(Y.prototype,"stageButton",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(Y.prototype,"changeButtonText",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(Y.prototype,"numberDoorChange",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(Y.prototype,"capEdit",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(Y.prototype,"bodyEdit",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(Y.prototype,"weaponEdit",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(Y.prototype,"bossEdit",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(Y.prototype,"floorEdit",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(Y.prototype,"stageEdit",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(Y.prototype,"bossBloodEdit",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(Y.prototype,"bossSkillEdit",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(Y.prototype,"playerBloodEdit",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(Y.prototype,"ballColorEdit",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(Y.prototype,"ballNumEdit",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(Y.prototype,"ballIntervalEdit",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(Y.prototype,"cameraSpeedEdit",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=e(Y.prototype,"closeEffectText",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=Y))||W));a._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvenEnum.ts",["cc"],(function(E){"use strict";var A;return{setters:[function(E){A=E.cclegacy}],execute:function(){var _;E("GameEvenEnum",void 0),A._RF.push({},"cd654nDqwZK/pXT4Y8GITxS","GameEvenEnum",void 0),function(E){E.GAME_READY="GAME_READY",E.GAME_STARTED="GAME_STARTED",E.GAME_ENDED="GAME_ENDED",E.GAME_RESET="GAME_RESET",E.CAMERA_CHANGE_STATE="CAMERA_CHANGE_STATE",E.CHANGE_CAP="CHANGE_CAP",E.CHANGE_BODY="CHANGE_BODY",E.CHANGE_WEAPON="CHANGE_WEAPON",E.CHANGE_BOSS="CHANGE_BOSS",E.CHANGE_FLOOR="CHANGE_FLOOR",E.CHANGE_BOSS_BLOOD="CHANGE_BOSS_BLOOD",E.CHANGE_BOSS_SKILL="CHANGE_BOSS_SKILL",E.CHANGE_STAGE="CHANGE_STAGE",E.CHANGE_BALL_COLOR="CHANGE_BALL_COLOR",E.CHANGE_PLAYER_HP="CHANGE_PLAYER_HP",E.BOSS_DEAD="BOSS_DEAD",E.PLAYER_DEAD="PLAYER_DEAD",E.FIRE_BALL="FIRE_BALL",E.MONSTER_ATTACK_SATRT="MONSTER_ATTACK_SATRT",E.E_MonsterHit="m1010",E.E_Combo="m1009",E.E_BallAction="m1030",E.E_DoorAction="m1040"}(_||(_=E("GameEvenEnum",{}))),A._RF.pop()}}}));

System.register("chunks:///_virtual/LevelBlockVo.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,c;return{setters:[function(e){t=e.defineProperty},function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"e410dxN/C1F9qSXjmzhPP84","LevelBlockVo",void 0);e("default",(function(){t(this,"level",1),t(this,"isLinkUpScene",0),t(this,"unlocks",{})}));c._RF.pop()}}}));

System.register("chunks:///_virtual/BallBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Vec3Util.ts","./RotateUtil.ts","./Behavior3D.ts","./RandomUtil.ts","./FlMath.ts","./FLGloable.ts","./GameEvenEnum.ts","./GameState.ts"],(function(t){"use strict";var i,o,e,l,n,s,a,r,d,h,c,u,y,m,p,f,v,g,B,M,S,A,R,b;return{setters:[function(t){i=t.defineProperty,o=t.inheritsLoose,e=t.assertThisInitialized,l=t.createClass},function(t){n=t.cclegacy,s=t._decorator,a=t.v3,r=t.geometry,d=t.RigidBody,h=t.ERigidBodyType,c=t.SphereCollider,u=t.PhysicsSystem,y=t.math,m=t.instantiate,p=t.tween},function(t){f=t.Vec3Util},function(t){v=t.RotateUtil},function(t){g=t.Behavior3D},function(t){B=t.RandomUtil},function(t){M=t.default},function(t){S=t.FLGloable},function(t){A=t.GameEvenEnum},function(t){R=t.EColliderGroup,b=t.EBuffType}],execute:function(){var k,D,w;n._RF.push({},"e7ebcIXf5pCrIOJrH45Vgor","BallBase",void 0);var P=s.ccclass;s.property,t("BallBase",P((w=D=function(t){function n(){for(var o,l=arguments.length,s=new Array(l),d=0;d<l;d++)s[d]=arguments[d];return o=t.call.apply(t,[this].concat(s))||this,i(e(o),"moveSpeed",n.initSpeed),i(e(o),"_atkMul",1),i(e(o),"skill",null),i(e(o),"moveDir",a()),i(e(o),"isMove",!1),i(e(o),"rigidBody",null),i(e(o),"isCopy",!1),i(e(o),"multiplyNum",0),i(e(o),"numberWallUUID",[]),i(e(o),"ray",new r.Ray),i(e(o),"shutOutUUID",""),i(e(o),"isRayStart",!1),i(e(o),"multiplyAng",5),i(e(o),"multiplyAdd",.5),i(e(o),"passMultiplyAdd",.25),i(e(o),"multiplyAng2",10),o}o(n,t);var s=n.prototype;return s.onLoad=function(){this.rigidBody=this.getComponent(d),this.rigidBody.setGroup(R.ball),this.rigidBody.setMask(this.ballRayMask),this.rigidBody.type=h.STATIC,this.node.on(A.E_BallAction,this.onBallAction,this);this.node.getComponent(c)},s.update=function(t){if(this.isMove){t=M.getMinMax(t,.016,.018);var i=this.moveSpeed*t;if(this.node.worldPosition.z>S.player.worldPosition.z+3||this.node.worldPosition.x<-4||this.node.worldPosition.x>4)this.recovery();else if(this.node.worldPosition.z<S.curGround.getChildByName("boss_wall").worldPosition.z)this.addImpulse2(),this.isMove=!1;else{var o=this.moveDir.clone().multiplyScalar(i);this.node.translate(o,1),this.isRayStart&&this.castRay(this.node.worldPosition,this.moveDir)}}},s.castRay=function(t,i){if(this.ray.o=t,this.ray.d=i,u.instance.raycast(this.ray,this.ballRayMask,10),u.instance.raycastResults&&u.instance.raycastResults.length>0){for(var o=1e10,e=null,l=0;l<u.instance.raycastResults.length;l++){var n=u.instance.raycastResults[l].distance;n<=o&&(o=n,e=u.instance.raycastResults[l])}if(e&&o<=.5){if(this.shutOutUUID==e.collider.node.uuid)return;if(e.collider.getGroup()==R.number_wall&&i.z<0)-1==this.numberWallUUID.indexOf(e.collider.node.uuid)&&(this.numberWallUUID.push(e.collider.node.uuid),e.collider.node.emit(A.E_DoorAction,this.node));else if(e.collider.getGroup()==R.monster)this.hitMonster(e.collider.node,e.hitPoint.clone(),this.atk);else{var s=e.hitPoint.clone(),a=e.hitNormal.clone(),r=f.getReflectedDir(i,a);if(this.multiplyNum>0){var d=s.clone().subtract(i.clone().normalize().multiplyScalar(.25));this.multiplyBall(this.multiplyNum,r,d),this.multiplyNum=0,this.recovery()}else this.changeDir(r)}}}},s.onCollision=function(t){},s.hitMonster=function(t,i,o){void 0===o&&(o=this.atk),t.emit(A.E_MonsterHit,o,i),this.isMove=!1,this.node.off(A.E_BallAction,this.onBallAction,this),this.addImpulse()},s.addImpulse=function(){var t=this;this.rigidBody.clearState(),this.rigidBody.setMask(this.ballMonsterMask),this.rigidBody.type=h.DYNAMIC,this.rigidBody.clearState();var i=y.random()>.5?B.randomFloat(-5,-3):B.randomFloat(3,5);this.rigidBody.applyImpulse(a(i,B.randomFloat(40,30),B.randomFloat(8,5))),this.rigidBody.applyTorque(a(B.randomFloat(-6,6),B.randomFloat(20,30),B.randomFloat(3,1))),this.scheduleOnce((function(){t.recovery()}),5)},s.addImpulse2=function(){var t=this;this.rigidBody.clearState(),this.rigidBody.setMask(this.ballMonsterMask),this.rigidBody.type=h.DYNAMIC,this.rigidBody.clearState();var i=y.random()>.5?B.randomFloat(-5,-3):B.randomFloat(3,5);this.rigidBody.applyImpulse(a(i,B.randomFloat(40,30),B.randomFloat(8,5))),this.rigidBody.applyTorque(a(B.randomFloat(-6,6),B.randomFloat(5,10),B.randomFloat(3,1))),this.scheduleOnce((function(){t.recovery()}),5)},s.recovery=function(){this.stop(),this.node.destroy(),this.rigidBody.clearState()},s.launch=function(t,i,o,e){void 0===o&&(o=!1),void 0===e&&(e=""),this.moveSpeed=n.initSpeed,this.node.active=!0,this.node.worldPosition=i,this.changeDir(t),this.isMove=!0,this.shutOutUUID=e,this.isCopy=o,this.isRayStart=!0},s.enterDoorCallBack=function(t,i,o){switch(void 0===i&&(i=!1),t){case b.ADD:this.addBuffBall(o[0],o[1],o[2],o[3]);break;case b.CUT:break;case b.MULTIPLY:this.multiplyNum=o,this.multiplyNum=this.multiplyNum>10?10:this.multiplyNum;break;case b.MULTIPLY2:this.multiplyBuffBall(o[0],o[1]);break;case b.EXCEPT:}i&&this.recovery()},s.multiplyBall=function(t,i,o){for(var e=-Math.floor(t/2)*this.multiplyAng,l=0;l<t;l++){var n=e;e+=this.multiplyAng,this.node.rotation=f.lockPos(a(),i,!1),v.rotateAround(this.node,a(0,1,0),y.toRadian(n));var s=this.node.forward.clone(),r=m(this.node);r.parent=S.ballRoot,r.emit(A.E_BallAction,"launch",s,o)}},s.addBuffBall=function(t,i,o,e){for(var l=-Math.floor(i/2)*this.multiplyAdd,n=0;n<i;n++){var s=l;l+=this.multiplyAdd;var a=this.node.worldPosition.clone().add3f(s,0,0);a.x>=o-.5?a=this.node.worldPosition.clone().add3f(-this.passMultiplyAdd,0,0):a.x<=e+.5&&(a=this.node.worldPosition.clone().add3f(this.passMultiplyAdd,0,0));var r=m(this.node);r.parent=S.ballRoot,r.emit(A.E_BallAction,"launch",this.moveDir.clone(),a,!0,t)}this.recovery()},s.multiplyBuffBall=function(t,i){for(var o=-Math.floor(i/2)*this.multiplyAng2,e=0;e<i;e++){var l=o;o+=this.multiplyAng2,this.node.rotation=f.lockPos(a(),this.moveDir,!1),v.rotateAround(this.node,a(0,1,0),y.toRadian(l));var n=this.node.forward.clone(),s=m(this.node);s.parent=S.ballRoot,s.emit(A.E_BallAction,"launch",n,this.node.worldPosition.clone(),!0,t)}this.recovery()},s.setSpeed=function(){var t=this;if(this.moveSpeed!=n.fastSpeed){var i=.1*this.node.getSiblingIndex();p(this).delay(i).call((function(){t.moveSpeed=n.fastSpeed})).start()}},s.stop=function(){this.isMove=!1,this.rigidBody.setLinearVelocity(a())},s.changeDir=function(t){this.moveDir=t,this.node.rotation=f.lockPos(a(),this.moveDir)},s.onBallAction=function(t){var i=this[t];if(i){for(var o=arguments.length,e=new Array(o>1?o-1:0),l=1;l<o;l++)e[l-1]=arguments[l];i.call.apply(i,[this].concat(e))}},s.playWallSound=function(){},s.onDestroyed=function(){},l(n,[{key:"atk",get:function(){return 1}},{key:"ballRayMask",get:function(){return R.wall+R.number_wall+R.monster}},{key:"ballMonsterMask",get:function(){return R.ball+R.monster+R.plane+R.wall}}]),n}(g),i(D,"initSpeed",12),i(D,"fastSpeed",2200),i(D,"moveSpeed",10),k=w))||k);n._RF.pop()}}}));

System.register("chunks:///_virtual/CameraLock.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,o,r,n,a,s,c,p,l,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,n=t.defineProperty},function(t){a=t.cclegacy,s=t._decorator,c=t.Node,p=t.Vec3,l=t.v3,u=t.Component}],execute:function(){var d,h,y,f,m;a._RF.push({},"f3d026j5G5OC6vSRYLCeUsu","CameraLock",void 0);var C=s.ccclass,g=s.property;t("CameraLock",(d=C("CameraLock"),h=g({type:c,displayName:"跟随目标节点"}),d((m=i((f=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a))||this,o(r(i),"targetNd",m,r(i)),n(r(i),"initPosition",void 0),n(r(i),"subCameraAndPlayer",void 0),i}e(i,t);var a=i.prototype;return a.onLoad=function(){this.initPosition=this.node.position.clone(),this.subCameraAndPlayer=this.initPosition.subtract(this.targetNd.position)},a.update=function(){this.node.position=p.lerp(l(),this.node.position,l(this.targetNd.position.x+this.subCameraAndPlayer.x,this.targetNd.position.y+this.subCameraAndPlayer.y,this.targetNd.position.z+this.subCameraAndPlayer.z),.8)},i}(u)).prototype,"targetNd",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=f))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/BossBlood.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIEvenEnum.ts","./FLGloable.ts","./GameEvenEnum.ts"],(function(t){"use strict";var e,o,n,i,s,r,l,a,c,u,h,d,p,f,v,B,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,s=t.defineProperty},function(t){r=t.cclegacy,l=t._decorator,a=t.Label,c=t.CCInteger,u=t.systemEvent,h=t.Tween,d=t.tween,p=t.v3,f=t.Component},function(t){v=t.UIEvenEnum},function(t){B=t.FLGloable},function(t){g=t.GameEvenEnum}],execute:function(){var b,y,m,w,T,E,D;r._RF.push({},"f5ed6nDgJlCLr64ujQVGq5V","BossBlood",void 0);var I=l.ccclass,A=l.property;t("BossBlood",(b=I("BossBlood"),y=A({type:a,tooltip:"血量字体"}),m=A({type:c,tooltip:"高度"}),b((E=e((T=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,n(i(e),"bloodText",E,i(e)),n(i(e),"high",D,i(e)),s(i(e),"bossActive",!0),s(i(e),"tweenInterval",0),e}o(e,t);var r=e.prototype;return r.onLoad=function(){u.on(v.UPDATE_BOSS_BLOOD,this.onChangeBossBlood,this),u.on(g.BOSS_DEAD,this.onBossDead,this)},r.start=function(){},r.onChangeBossBlood=function(t){this.bossActive=!0,this.bloodText.string=t.toString(),this.changeBossBloodTween()},r.changeBossBloodTween=function(){this.tweenInterval>0||(this.tweenInterval=.125,h.stopAllByTarget(this.node),d(this.node).to(.06,{scale:p(1.6,1.6,1.6)}).to(.07,{scale:p(1,1,1)}).start())},r.onBossDead=function(){this.bossActive=!1,this.bloodText.string=""},r.update=function(t){if(this.bossActive)if(this.tweenInterval>0&&(this.tweenInterval-=t),B.curMonster){var e=B.cameraCom.convertToUINode(B.curMonster.worldPosition,this.node.parent);this.node.setPosition(e.x,e.y+this.high)}else this.bloodText.string=""},e}(f)).prototype,"bloodText",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(T.prototype,"high",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=T))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/ball-magic",["./UIEvenEnum.ts","./LevelToolPlayer.ts","./EBossState.ts","./EEffectName.ts","./EBossSkill.ts","./FLGloable.ts","./GameEvenEnum.ts","./MonsterBase.ts","./MapPrefabEnum.ts","./EAniDefine.ts","./GameState.ts","./MainPlayer.ts","./LevelToolBoss.ts","./LevelToolNumWall.ts","./MapLoader.ts","./NumberTool.ts","./NumberWall.ts","./MapLevelVo.ts","./BallBase.ts","./Ball_10001.ts","./CameraScript.ts","./FollowMovement.ts","./MonsterTool.ts","./FreeFlightCamera.ts","./GamePanel.ts","./MapManager.ts","./BallNum.ts","./joystick.ts","./DebugPanel.ts","./LevelBlockVo.ts","./CameraLock.ts","./BossBlood.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/ball-magic', 'chunks:///_virtual/ball-magic'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});