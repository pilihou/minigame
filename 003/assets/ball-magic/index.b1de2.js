System.register("chunks:///_virtual/UIEvenEnum.ts",["cc"],(function(_){"use strict";var E;return{setters:[function(_){E=_.cclegacy}],execute:function(){var A;_("UIEvenEnum",void 0),E._RF.push({},"059d8sJE4hPZYh2x+k1CuA6","UIEvenEnum",void 0),function(_){_.SHOW_GAME_TIP="SHOW_GAME_TIP",_.UPDATE_DATA_COIN="UPDATE_DATA_COIN",_.UI_TOUCH_START="UI_TOUCH_START",_.UI_TOUCH_MOVE="UI_TOUCH_MOVE",_.UI_TOUCH_END="UI_TOUCH_END",_.GAME_PAGE_VIDEO_BACK="GAME_PAGE_VIDEO_BACK",_.SHOW_WARNING="SHOW_WARNING",_.SHOW_INTERSTITIAL_VIDEO="SHOW_INTERSTITIAL_VIDEO",_.CHANGE_SKIN="CHANGE_SKIN",_.SHOW_SKIN_BTN="SHOW_SKIN_BTN",_.BOOST_CHANGE="BOOST_CHANGE",_.HAND_ENERGY_CHANGE="HAND_ENERGY_CAHNGE",_.TRADE_MONEY_CHANGE="TRADE_MONEY_CHANGE",_.UPDATE_BOSS_BLOOD="UPDATE_BOSS_BLOOD",_.UPDATE_PLAYER_BLOOD="UPDATE_PLAYER_BLOOD",_.UPDATE_PLAYER_BALL="UPDATE_PLAYER_BALL"}(A||(A=_("UIEvenEnum",{}))),E._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerData.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,i,a,s,r,o;return{setters:[function(t){e=t.defineProperty,n=t.inheritsLoose,i=t.assertThisInitialized,a=t.createClass},function(t){s=t.cclegacy,r=t._decorator,o=t.Component}],execute:function(){var c,l,h;s._RF.push({},"07eb7cA3MhFWZH8xotyvi8X","PlayerData",void 0);var f=r.ccclass;r.property,t("PlayerData",f("PlayerData")((h=l=function(t){function s(){for(var n,a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return n=t.call.apply(t,[this].concat(s))||this,e(i(n),"serverTime",0),e(i(n),"localTime",0),e(i(n),"_userId",""),e(i(n),"_playerInfo",null),e(i(n),"_history",null),e(i(n),"_settings",null),e(i(n),"_isNewBee",!1),e(i(n),"_dataVersion",""),n}n(s,t);var r=s.prototype;return r.loadFromCache=function(){this._playerInfo=this._loadDataByKey(constant.LOCAL_CACHE.PLAYER),this._history=this._loadDataByKey(constant.LOCAL_CACHE.HISTORY),this._settings=this._loadDataByKey(constant.LOCAL_CACHE.SETTINGS)},r._loadDataByKey=function(t){var e={},n=StorageManager.instance.getConfigData(t);if(n)try{e=JSON.parse(n)}catch(t){e={}}return e},r.createPlayerInfo=function(t){if(this._playerInfo={diamond:0,gold:0,key:0,level:1,highestLevel:1,arrSkill:[],createDate:new Date},this._isNewBee=!0,t)for(var e in t)this._playerInfo[e]=t[e];this.savePlayerInfoToLocalCache()},r.generateRandomAccount=function(){this.userId=""+Date.now()+util.getRandomInt(0,1e3),StorageManager.instance.setUserId(this._userId)},r.saveAccount=function(t){this._userId=t,StorageManager.instance.setUserId(t)},r.savePlayerInfoToLocalCache=function(){StorageManager.instance.setConfigData(constant.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo))},r.saveSettingsToLocalCache=function(){StorageManager.instance.setConfigData(constant.LOCAL_CACHE.SETTINGS,JSON.stringify(this._settings))},r.saveAll=function(){StorageManager.instance.setConfigDataWithoutSave(constant.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo)),StorageManager.instance.setConfigDataWithoutSave(constant.LOCAL_CACHE.HISTORY,JSON.stringify(this._history)),StorageManager.instance.setConfigDataWithoutSave(constant.LOCAL_CACHE.SETTINGS,JSON.stringify(this._settings)),StorageManager.instance.setConfigData(constant.LOCAL_CACHE.DATA_VERSION,this._dataVersion)},r.updatePlayerInfo=function(t,e){var n=!1;this._playerInfo.hasOwnProperty(t)&&("number"==typeof e?(n=!0,this._playerInfo[t]+=e,this._playerInfo[t]<0&&(this._playerInfo[t]=0)):"boolean"!=typeof e&&"string"!=typeof e||(n=!0,this._playerInfo[t]=e)),n&&StorageManager.instance.setConfigData(constant.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo))},r.getSetting=function(t){return this._settings&&this._settings.hasOwnProperty(t)?this._settings[t]:null},r.setSetting=function(t,e){this._settings||(this._settings={}),this._settings[t]=e,this.saveSettingsToLocalCache()},r.clear=function(){this._playerInfo={},this._settings={},this.saveAll()},r.addFightTimes=function(t){var e=this.getFightTimes();e+=1,this.setSetting(constant.SETTINGS_KEY.FIGHT_TIMES,e)},r.getFightTimes=function(){var t=this.getSetting(constant.SETTINGS_KEY.FIGHT_TIMES);return t||(t=0,this.setSetting(constant.SETTINGS_KEY.FIGHT_TIMES,0)),t},r.getLockPlyerSkill=function(){var t=this;return localConfig.instance.getTableArr("playerSkill").filter((function(e){return!t.playerInfo.arrSkill.includes(e.ID)&&e.ID!==constant.PLAYER_SKILL.RECOVERY}))},r.addPlayerSkill=function(t){this.playerInfo.arrSkill.includes(t.ID)||(this.playerInfo.arrSkill.push(t.ID),this.savePlayerInfoToLocalCache(),clientEvent.dispatchEvent(constant.EVENT_TYPE.PARSE_PLAYER_SKILL))},r.reducePlayerSkill=function(t){if(this.playerInfo.arrSkill.includes(t.ID)){var e=this.playerInfo.arrSkill.findIndex((function(e){return e===t.ID}));this.playerInfo.arrSkill.splice(e,1),this.savePlayerInfoToLocalCache(),clientEvent.dispatchEvent(constant.EVENT_TYPE.PARSE_PLAYER_SKILL)}},a(s,[{key:"userId",get:function(){return this._userId},set:function(t){this._userId=t}},{key:"settings",get:function(){return this._settings},set:function(t){this._settings=t}},{key:"playerInfo",get:function(){return this._playerInfo},set:function(t){this._playerInfo=t}},{key:"history",get:function(){return this._history},set:function(t){this._history=t}},{key:"isNewBee",get:function(){return this._isNewBee},set:function(t){this._isNewBee=t}}],[{key:"instance",get:function(){return this._instance||(this._instance=new s),this._instance}}]),s}(o),e(l,"_instance",void 0),c=h))||c);s._RF.pop()}}}));

System.register("chunks:///_virtual/LevelToolPlayer.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,o,t,l,i,n,a,c,u,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,o=e.inheritsLoose,t=e.initializerDefineProperty,l=e.assertThisInitialized},function(e){i=e.cclegacy,n=e._decorator,a=e.CCInteger,c=e.Color,u=e.color,p=e.Component}],execute:function(){var s,y,f,v,b,d,g;i._RF.push({},"0ed82OXEedEBo/PZgiXYkFT","LevelToolPlayer",void 0);var C=n.ccclass,h=n.property;e("LevelToolPlayer",(s=C("LevelToolPlayer"),y=h({type:a,displayName:"数字"}),f=h({type:c,displayName:"初始球颜色"}),s((d=r((b=function(e){function r(){for(var r,o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return r=e.call.apply(e,[this].concat(i))||this,t(l(r),"playerCount",d,l(r)),t(l(r),"ballColor",g,l(r)),r}return o(r,e),r}(p)).prototype,"playerCount",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),g=r(b.prototype,"ballColor",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return u(12,34,197,255)}}),v=b))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/EAniDefine.ts",["cc"],(function(e){"use strict";var i;return{setters:[function(e){i=e.cclegacy}],execute:function(){var n;e("EAniDefine",void 0),i._RF.push({},"18b1cLf8PVKBaJwassTU8Aw","EAniDefine",void 0),function(e){e.IDLE="idle",e.RUN="run",e.HIT="hit",e.ATTACK1="attackcycle",e.DIED="died",e.SUCC="success"}(n||(n=e("EAniDefine",{}))),i._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts","./EffectManager.ts","./UIEvenEnum.ts","./GameEvents.ts","./EBossState.ts","./EEffectName.ts","./EBossSkill.ts","./FLGloable.ts","./GameEvenEnum.ts","./Behavior3D.ts"],(function(t){"use strict";var e,i,s,n,o,a,r,l,h,c,u,A,f,S,d,m,E,k,I,D,B,v;return{setters:[function(t){e=t.inheritsLoose,i=t.defineProperty,s=t.assertThisInitialized,n=t.asyncToGenerator},function(t){o=t.cclegacy,a=t._decorator,r=t.SkeletalAnimation,l=t.systemEvent,h=t.SystemEvent,c=t.KeyCode,u=t.Node,A=t.v3},function(t){f=t.PoolManager},function(t){S=t.EffectManager},function(t){d=t.UIEvenEnum},function(t){m=t.GameEvents},function(t){E=t.EBossState},function(t){k=t.EEffectName},function(t){I=t.EBossSkill},function(t){D=t.FLGloable},function(t){B=t.GameEvenEnum},function(t){v=t.Behavior3D}],execute:function(){var T;o._RF.push({},"2412ew5jq9DPa4GGIVsm+lh","MonsterBase",void 0);var p=a.ccclass;a.property,t("MonsterBase",p("MonsterBase")(T=function(t){function o(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,i(s(e),"isInit",!1),i(s(e),"isDie",!1),i(s(e),"bossHealth",0),i(s(e),"curState",E.IDLE),i(s(e),"animationState",null),i(s(e),"skeAni",null),i(s(e),"hitInterval",0),i(s(e),"isAttack",!1),i(s(e),"lineRoot",null),i(s(e),"fireInterval",0),e}e(o,t);var a=o.prototype;return a.onLoad=function(){this.skeAni||(this.skeAni=this.node.getChildByName("rw").getComponent(r),this.skeAni.crossFade(E.IDLE))},a.onEnabled=function(){this.node.on(m.E_MonsterHit,this.onHit,this),l.on(B.MONSTER_ATTACK_SATRT,this.startAttack,this),l.on(B.CHANGE_BOSS_BLOOD,this.onChangeBlood,this),l.on(B.KILL_BOSS,this.onBossDead,this),l.on(h.EventType.KEY_DOWN,this.onKeyDown,this)},a.onKeyDown=function(t){switch(t.keyCode){case c.SPACE:this.isAttack?(this.skeAni.crossFade(E.IDLE,0),this.isAttack=!1):"boss_1004"===this.node.name?(this.skeAni.crossFade(E.ATTACK,0),this.animationState=this.skeAni.getState(E.ATTACK)):this.isAttack=!0;break;case c.ARROW_LEFT:this.lineRoot.eulerAngles=this.lineRoot.eulerAngles.clone().add3f(0,-3,0);break;case c.ARROW_RIGHT:this.lineRoot.eulerAngles=this.lineRoot.eulerAngles.clone().add3f(0,3,0)}},a.startAttack=function(){this.setAnimalState(E.ATTACK)},a.init=function(t){this.bossHealth=t,l.emit(d.UPDATE_BOSS_BLOOD,this.bossHealth),this.lineRoot=this.node.getChildByName("lineRoot"),this.lineRoot||(this.lineRoot=new u("lineRoot"),this.lineRoot.setParent(this.node)),this.lineRoot.setPosition(0,0,0),this.lineRoot.eulerAngles=A(0,-180,0)},a.setAnimalState=function(t){if(!this.isDie)switch(this.curState=t,t){case E.IDLE:this.skeAni.crossFade(E.IDLE,0),this.animationState=null;break;case E.HIT:if(this.skeAni.getState(E.HIT).isPlaying&&this.skeAni.getState(E.HIT).ratio<.2)return;this.skeAni.stop(),this.skeAni.crossFade(E.HIT,0),this.animationState=this.skeAni.getState(E.HIT);break;case E.ATTACK:this.skeAni.crossFade(E.ATTACK,0),this.useSkillAttack(),this.animationState=this.skeAni.getState(E.ATTACK);break;case E.DIED:this.skeAni.crossFade(E.DIED,0),this.animationState=null}},a.useSkillAttack=function(){var t=this;switch(D.curBossSkill){case I.SKILL_FIRE:case I.SKILL_LIGHTNING:case I.SKILL_BALL:this.scheduleOnce((function(){S.instance.playParticleByNode(k.FIRE,D.curMonster,!0),t.scheduleOnce((function(){D.playerScript.onHit(),S.instance.playParticleByNode(k.FIRE_HIT,D.player,!0,A(0,1.5,1))}),.6)}),.5)}},a.checkCurAnimationPlayOver=function(){!this.animationState&&this.isDie||this.animationState&&this.animationState.isMotionless&&(this.animationState=null,this.skeAni.crossFade(E.CONTINUOUS),this.isAttack=!0)},a.onChangeBlood=function(t){this.bossHealth=t,l.emit(d.UPDATE_BOSS_BLOOD,this.bossHealth)},a.actionEmitBalls=function(){if(this.isAttack&&!(this.fireInterval>0)){this.fireInterval=D.ballInterval;var t=this.node.worldPosition.clone().add3f(0,.25,0);"boss_1004"===this.node.name&&(t=this.node.worldPosition.clone().add3f(0,.5,2)),f.getInstance().getNode(D.bossBallPrefab,D.ballRoot).emit(m.E_BallAction,"launch",this.lineRoot.forward.clone(),t)}},a.onHit=function(t,e){if(!this.isDie){this.bossHealth-=t,this.setAnimalState(E.HIT);var i=A(1-2*Math.random(),1.5*Math.random()+1,2);this.hitInterval<=0&&(S.instance.playParticleByNode(k.BOOM,D.curMonster,!0,i),this.hitInterval=.2),l.emit(d.UPDATE_BOSS_BLOOD,this.bossHealth),this.bossHealth<=0&&(this.setAnimalState(E.DIED),D.playerScript.onGameOver(!0),this.isDie=!0,l.emit(B.BOSS_DEAD))}},a.onBossDead=function(){this.setAnimalState(E.DIED),D.playerScript.onGameOver(!0),this.isDie=!0,l.emit(B.BOSS_DEAD)},a.onSubBloodNum=function(){var t=n(regeneratorRuntime.mark((function t(e,i){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e,i){return t.apply(this,arguments)}}(),a.onDisabled=function(){this.node.off(m.E_MonsterHit,this.onHit,this)},a.update=function(t){this.fireInterval>0&&(this.fireInterval-=t),this.isDie||(this.actionEmitBalls(),this.checkCurAnimationPlayOver())},o}(v))||T);o._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerBlood.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./FLGloable.ts"],(function(e){"use strict";var t,o,n,r,i,l,a,c,u,p,s,y,d,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,i=e.defineProperty},function(e){l=e.cclegacy,a=e._decorator,c=e.Label,u=e.CCInteger,p=e.systemEvent,s=e.SystemEvent,y=e.KeyCode,d=e.Component},function(e){f=e.FLGloable}],execute:function(){var b,h,v,g,m,B,P;l._RF.push({},"25c91H/N7FDwq7u2y69mzv9","PlayerBlood",void 0);var _=a.ccclass,C=a.property;e("PlayerBlood",(b=_("PlayerBlood"),h=C({type:c,tooltip:"血量字体"}),v=C({type:u,tooltip:"高度"}),b((B=t((m=function(e){function t(){for(var t,o=arguments.length,l=new Array(o),a=0;a<o;a++)l[a]=arguments[a];return t=e.call.apply(e,[this].concat(l))||this,n(r(t),"bloodText",B,r(t)),n(r(t),"high",P,r(t)),i(r(t),"playerActive",!0),t}o(t,e);var l=t.prototype;return l.onLoad=function(){p.on(s.EventType.KEY_DOWN,this.onAddBlood,this)},l.onEnable=function(){},l.onDisable=function(){},l.start=function(){},l.onAddBlood=function(e){e.keyCode===y.KEY_W&&f.playerScript.onChangeHp(100)},l.update=function(e){},t}(d)).prototype,"bloodText",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(m.prototype,"high",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=m))||g));l._RF.pop()}}}));

System.register("chunks:///_virtual/TouchCtrl.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./FLGloable.ts","./GameEvenEnum.ts","./Behavior3D.ts"],(function(t){"use strict";var e,n,o,i,s,a,c,h,r,u,v,_,E,l,d;return{setters:[function(t){e=t.inheritsLoose,n=t.defineProperty,o=t.assertThisInitialized,i=t.createClass},function(t){s=t.cclegacy,a=t._decorator,c=t.view,h=t.Vec3,r=t.Node,u=t.systemEvent,v=t.UITransformComponent,_=t.UITransform},function(t){E=t.FLGloable},function(t){l=t.GameEvenEnum},function(t){d=t.Behavior3D}],execute:function(){var T;s._RF.push({},"2d6ca4kdi5CD5jGbBU6vKGW","TouchCtrl",void 0);var p=a.ccclass;a.property,c.getVisibleSize().height,t("TouchCtrl",p("TouchCtrl")(T=function(t){function s(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,n(o(e),"isMoving",!1),n(o(e),"_angle",0),n(o(e),"_stickPos",new h),n(o(e),"_oriRingPos",null),n(o(e),"_touchStartLocation",new h),n(o(e),"_touchMoveLocation",new h),n(o(e),"_touchEndLocation",new h),n(o(e),"_distanceRate",0),n(o(e),"_oriDotPos",new h),n(o(e),"_movePos",new h),e}e(s,t);var a=s.prototype;return a.onEnabled=function(){this.node.on(r.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(r.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(r.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(r.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},a.onDisabled=function(){this.node.off(r.EventType.TOUCH_START,this._touchStartEvent,this),this.node.off(r.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.off(r.EventType.TOUCH_END,this._touchEndEvent,this),this.node.off(r.EventType.TOUCH_CANCEL,this._touchEndEvent,this),this.isMoving=!1},a._touchStartEvent=function(t){var e;if(E.playerIsInit&&!E.gameIsStop&&(E.curGameState==l.GAME_READY&&(E.curGameState=l.GAME_STARTED,u.emit(l.GAME_STARTED)),E.curGameState==l.GAME_STARTED)){var n=t.getUILocation();this._touchStartLocation.set(n.x,n.y,0);var o=null===(e=this.node.getComponent(v))||void 0===e?void 0:e.convertToNodeSpaceAR(this._touchStartLocation);this._stickPos.set(o)}},a._touchMoveEvent=function(t){var e;if(E.playerIsInit&&!E.gameIsStop&&E.curGameState==l.GAME_STARTED){var n=t.getUILocation();this._touchMoveLocation.set(n.x,n.y,0);var o=null===(e=this.node.getComponent(_))||void 0===e?void 0:e.convertToNodeSpaceAR(this._touchMoveLocation);this._updateAngle(o),this._distanceRate=E.speedGrade}},a._touchEndEvent=function(t){E.playerIsInit&&!E.gameIsStop&&E.curGameState==l.GAME_STARTED&&(this.isMoving=!1,E.radians=E.angle=null)},a._updateAngle=function(t){return this._angle=180*Math.atan2(t.y,t.x)/Math.PI,E.angle=this._angle,E.radians=Math.PI/180*E.angle,this._angle},a.reset=function(){this.isMoving=!1},i(s,[{key:"distanceRate",get:function(){return this._distanceRate}},{key:"angle",get:function(){return this._angle},set:function(t){this._angle=t}}]),s}(d))||T);s._RF.pop()}}}));

System.register("chunks:///_virtual/GameBannerTip.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts","./UIEvenEnum.ts","./Behavior3D.ts","./TbConfig.ts"],(function(t){"use strict";var n,e,i,o,a,r,s,p,c,u,l,f,g,h,y,d,v;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.defineProperty},function(t){r=t.cclegacy,s=t._decorator,p=t.Prefab,c=t.v3,u=t.systemEvent,l=t.UIOpacity,f=t.Label,g=t.tween},function(t){h=t.PoolManager},function(t){y=t.UIEvenEnum},function(t){d=t.Behavior3D},function(t){v=t.TbConfig}],execute:function(){var m,P,T,_,w;r._RF.push({},"2e64dSCwSdNfb9AC9TDCGXE","GameBannerTip",void 0);var C=s.ccclass,I=s.property;t("GameBannerTip",(m=C("GameBannerTip"),P=I({type:p,tooltip:"横幅提示预设"}),m((w=n((_=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return n=t.call.apply(t,[this].concat(r))||this,i(o(n),"tipView",w,o(n)),a(o(n),"_tipStartPos",c(0,150,0)),a(o(n),"_tipEndPos",c(0,350,0)),n}e(n,t);var r=n.prototype;return r.show=function(){},r.onLoad=function(){u.on(y.SHOW_GAME_TIP,this.onShowTip,this)},r.onShowTip=function(t,n){void 0===n&&(n=null);var e=h.getInstance().getNode(this.tipView,this.node),i=null==n?v.getInstance().getLanguageValueByID(t):v.getInstance().formatContent(t,n);e.position=this._tipStartPos,e.getComponent(l).opacity=255,e.getChildByName("text").getComponent(f).string=i,g(e).to(.7,{position:this._tipEndPos}).start(),g(e.getComponent(l)).delay(1.2).to(.5,{opacity:50}).call((function(){h.getInstance().putNode(e)})).union().start()},n}(d)).prototype,"tipView",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=_))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/FlyImgUtil.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts"],(function(t){"use strict";var o,e,i,a,n,r,s;return{setters:[function(t){o=t.defineProperty},function(t){e=t.cclegacy,i=t.tween,a=t.v3,n=t.Label,r=t.view},function(t){s=t.PoolManager}],execute:function(){e._RF.push({},"304cdQlLKhCH7anQ0wlRtCP","FlyImgUtil",void 0);var c=t("default",function(){function t(){}return t.playTweenImg=function(t,o,e,n,r,s,c,l){var f=this;this.fkyRoot=s,this.createImg(t,o,n);var d=0,g=0,u=this.imgList.length,h=r.clone();if(3!=t)for(var v=u-1;v>=0;v--){var m=this.imgList[v];i(m).delay(.02*u+.01).to(.02*g+.2,{scale:a(.3,.3,.3)}).to(.03*g+.4,{worldPosition:h,scale:a(.3,.3,.3)}).call((function(){++d==u&&(f.clearImg(),f.flyOver(c,h,e),l&&l())})).start(),g++}else for(var y=u-1;y>=0;y--){var P=this.imgList[y];i(P).to(.6,{worldPosition:h,scale:a(.3,.3,.3)}).call((function(){++d==u&&(f.clearImg(),f.flyOver(c,h,e),l&&l())})).start()}},t.createImg=function(t,o,e){var i=this;return new Promise((function(n,r){switch(t){case 0:for(var c=0;c<10;c++){var l=s.instance.getNode(o,i.fkyRoot),f=Math.random()<.5?1:-1,d=a();d.x=Math.random()*f*120+e.x,d.y=Math.random()*f*120+e.y,l.worldPosition=d,i.imgList.push(l),l.setScale(0,0,0)}break;case 1:for(var g=0;g<10;g++){var u=s.instance.getNode(o,i.fkyRoot);i.imgList.push(u),u.setScale(0,0,0),i.getPoint(u,g)}break;case 2:for(var h=0;h<10;h++){var v=s.instance.getNode(o,i.fkyRoot);i.imgList.push(v),v.setScale(0,0,0);var m=i.isOdd(h)?1:-1,y=a();y.x=Math.random()*m*80-10+e.x,y.y=Math.random()*m*80-60+e.y,v.worldPosition=y}break;case 3:for(var P=0;P<1;P++){var M=s.instance.getNode(o,i.fkyRoot);i.imgList.push(M),M.setScale(1,1,1);var p=a();p.x=-1+Math.random()+e.x,p.y=-1+Math.random()+e.y,M.worldPosition=p}break;case 4:for(var L=0;L<1;L++){var k=s.instance.getNode(o,i.fkyRoot),w=Math.random()<.5?1:-1,R=a();R.x=Math.random()*w*120+e.x,R.y=Math.random()*w*120+e.y,k.worldPosition=R,i.imgList.push(k),k.setScale(0,0,0)}}}))},t.flyOver=function(t,o,e){if(t){var a=s.instance.getNode(e,this.fkyRoot);a.getComponent(n).string="+"+t,a.worldPosition=o.clone().add3f(50,-40,0),i(this.fkyRoot).delay(1.5).call((function(){s.instance.putNode(a)})).start()}},t.clearImg=function(){for(var t=0;t<this.imgList.length;t++){var o=this.imgList[t];s.instance.putNode(o),o=null}this.imgList=[]},t.getPoint=function(t,o,e){void 0===e&&(e=1);var i=140;2==e&&(i=180);var n=i*Math.cos(360*o/Math.PI/180),s=i*Math.sin(360*o/Math.PI/180),c=a();c.x=n+r.getVisibleSize().x/2,c.y=s+r.getVisibleSize().y/2,t.worldPosition=c},t.isOdd=function(t){return t%2!=0},t}());o(c,"fkyRoot",null),o(c,"imgList",[]),e._RF.pop()}}}));

System.register("chunks:///_virtual/MapPrefabEnum.ts",["cc"],(function(a){"use strict";var e;return{setters:[function(a){e=a.cclegacy}],execute:function(){var n;a("MapPrefabEnum",void 0),e._RF.push({},"332e11z0WNIiqb7O0kLptB7","MapPrefabEnum",void 0),function(a){a.map_ground="map_ground",a.map_number_wall="map_number_wall",a.map_wall="map_wall",a.map_player="map_player",a.map_boss="map_boss",a.boss_wall="boss_wall",a.line_circle="line_circle",a.line_point="line_point"}(n||(n=a("MapPrefabEnum",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/ESoundEnum.ts",["cc"],(function(s){"use strict";var e;return{setters:[function(s){e=s.cclegacy}],execute:function(){var n;s("ESoundEnum",void 0),e._RF.push({},"339a7eiU2VFUaT5lElJ9c9/","ESoundEnum",void 0),function(s){s.BASE="res/snd/",s.BGM="res/snd/bgm",s.WALK="res/snd/walk",s.CAR_COME="res/snd/car_come",s.CAR_LEAVE="res/snd/car_leave",s.BTN_CLICK="res/snd/btn_click",s.BTN_CLOSE="res/snd/btn_close",s.SLAP="res/snd/slap",s.COLLECT_ITEM="res/snd/collect_item",s.COLLECT_MONEY="res/snd/collect_money",s.SLEEP="res/snd/sleep",s.DOOR_OPEN="res/snd/door_open",s.COST="res/snd/cost"}(n||(n=s("ESoundEnum",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/MainPlayer.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Vec3Util.ts","./PoolManager.ts","./UIEvenEnum.ts","./EAniDefine.ts","./GameEvents.ts","./FLGloable.ts","./GameEvenEnum.ts","./Behavior3D.ts","./MapPrefabEnum.ts","./GameState.ts"],(function(t){"use strict";var e,i,n,a,s,r,o,h,l,c,u,d,y,p,A,m,g,f,C,v,E,w,N,_,B;return{setters:[function(t){e=t.inheritsLoose,i=t.defineProperty,n=t.assertThisInitialized,a=t.createClass},function(t){s=t.cclegacy,r=t._decorator,o=t.geometry,h=t.SkeletalAnimation,l=t.SystemEvent,c=t.systemEvent,u=t.v3,d=t.Vec3,y=t.PhysicsSystem,p=t.KeyCode},function(t){A=t.Vec3Util},function(t){m=t.PoolManager},function(t){g=t.UIEvenEnum},function(t){f=t.EAniDefine},function(t){C=t.GameEvents},function(t){v=t.FLGloable},function(t){E=t.GameEvenEnum},function(t){w=t.Behavior3D},function(t){N=t.MapPrefabEnum},function(t){_=t.EState,B=t.EColliderGroup}],execute:function(){var P;s._RF.push({},"3573bqMr2dNCJ/8MowiUd+H","MainPlayer",void 0);var b=r.ccclass;r.property,t("MainPlayer",b("MainPlayer")(P=function(t){function s(){for(var e,a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,i(n(e),"isInit",!1),i(n(e),"rw",null),i(n(e),"rwAni",null),i(n(e),"speed",.09),i(n(e),"isMove",!1),i(n(e),"lineRoot",null),i(n(e),"capArr",[]),i(n(e),"clothesArr",[]),i(n(e),"bodyArr",[]),i(n(e),"weaponArr",[]),i(n(e),"curHp",1),i(n(e),"_curState",-1),i(n(e),"attack",null),i(n(e),"lineNum",0),i(n(e),"ray",new o.Ray),i(n(e),"hitPoints",[]),i(n(e),"ballR",.25),i(n(e),"curAniName",""),e}e(s,t);var r=s.prototype;return r.booState=function(t){return t==this.curState},r.onLoad=function(){this.rw=this.node.getChildByName("rw"),this.rwAni=this.rw.getComponent(h),this.lineRoot=this.node.getChildByName("lineRoot"),this.initAllClothes()},r.onEnabled=function(){this.registerEvent(l.EventType.KEY_DOWN,this.onKeyDown,this),this.registerEvent(g.UI_TOUCH_START,this.onTouchStart,this),this.registerEvent(g.UI_TOUCH_MOVE,this.onTouchMove,this),this.registerEvent(g.UI_TOUCH_END,this.onTouchEnd,this),this.registerEvent(E.CHANGE_CAP,this.onChangeCap,this),this.registerEvent(E.CHANGE_BODY,this.onChangeClothes,this),this.registerEvent(E.CHANGE_WEAPON,this.onChangeWeapon,this),this.registerEvent(E.CHANGE_PLAYER_HP,this.onChangeHp,this),this.registerEvent(E.GAME_RESET,this.resetPlayerState,this)},r.onChangeHp=function(t){this.curHp=t,c.emit(g.UPDATE_PLAYER_BLOOD,this.curHp)},r.init=function(){var t=this;this.rest(),this.scheduleOnce((function(){t.playAni(f.IDLE,1,!0)}),.001),this.curState=_.DAIJI,this.isInit=!0},r.rest=function(){this.curHp=v.initPlayerHp,c.emit(g.UPDATE_PLAYER_BLOOD,this.curHp),this.isMove=!1},r.update=function(){this.isInit&&v.curGameState==E.GAME_STARTED&&this.updateState()},r.updateState=function(){switch(this.curState){case _.HIT:}},r.onHit=function(t){var e=this;void 0===t&&(t=1),this.playAni(f.HIT),this.curHp-=t,c.emit(g.UPDATE_PLAYER_BLOOD,this.curHp),this.curHp<=0?this.onGameOver(!1):this.scheduleOnce((function(){e.curState=_.DAIJI,e.playAni(f.IDLE,1,!0),v.gameIsStop=!1,e.lineRoot.active=!0}),1.5)},r.onGameOver=function(t){this.curState!==_.DIED&&(this.isInit=!1,this.curState=_.DIED,v.curGameState=E.GAME_ENDED,this.unscheduleAllCallbacks(),t?this.playAni(f.SUCC):this.playAni(f.DIED))},r.onTouchStart=function(){this.isMove=!0,this.lineRoot.active=!0},r.onTouchMove=function(){if(null!==v.angle){var t=(v.angle-90+v.camera3D.eulerAngles.y)%360,e=u(0,t,0);this.lineRoot.eulerAngles=e,this.rw.rotation=A.lockPos(u(),this.lineRoot.forward);var i=d.add(u(),this.lineRoot.worldPosition,this.lineRoot.forward.clone().multiplyScalar(1));this.hitPoints=[i],this.castRay(i,this.lineRoot.forward),this.lineNum%1==0&&(v.lineRoot.destroyAllChildren(),this.drawAimLine()),this.lineNum+=1}},r.onTouchEnd=function(){this.lineRoot.active=!1,this.isMove=!1,v.lineRoot.destroyAllChildren(),this.curState!=_.ATTACK&&(this.curState=_.ATTACK,this.actionEmitBalls())},r.castRay=function(t,e){if(this.ray.o=t,this.ray.d=e,y.instance.raycast(this.ray,this.ballRayMask),y.instance.raycastResults&&y.instance.raycastResults.length>0){for(var i=1e8,n=null,a=0;a<y.instance.raycastResults.length;a++){var s=y.instance.raycastResults[a].distance;s<=i&&(i=s,n=y.instance.raycastResults[a])}var r=n.hitPoint.clone();if(r.z>this.node.worldPosition.z)return;r.subtract(e.clone().normalize().multiplyScalar(this.ballR));var o=n.hitNormal.clone();this.hitPoints.push(r);var h=n.collider,l=A.getReflectedDir(e,o),c=A.dirAngle(o,l);h.getGroup()!==B.monster&&Math.abs(c)>20&&this.hitPoints.length<5&&this.castRay(r,l)}},r.drawAimLine=function(){this.hitPoints.length<=1&&this.hitPoints.push(d.add(u(),this.hitPoints[0],this.lineRoot.forward.clone().multiplyScalar(4)));for(var t=0;t<this.hitPoints.length-1;t++){var e=this.hitPoints[t],i=this.hitPoints[t+1];if(0==t)m.getInstance().getPrefabNodeByPool(N.line_circle,v.lineRoot).worldPosition=u(i.x,0,i.z);this.drawLine(e,i)}},r.drawLine=function(t,e){for(var i=d.subtract(u(),e,t).normalize(),n=d.distance(t,e),a=.6,s=Math.ceil(n/a),r=0;r<s;r++){var o=d.add(u(),t,i.clone().multiplyScalar(r*a)),h=m.getInstance().getPrefabNodeByPool(N.line_point,v.lineRoot);h.position=o.clone().add3f(0,.5,0);var l=.3;r==s-1&&(l=n-a*r),h.scale=u(1,1,l),h.rotation=A.lockPos(t,e,!1)}},r.actionEmitBalls=function(){var t=this;if(this.booState(_.ATTACK)){this.playAni(f.ATTACK1);var e=this.node.worldPosition.clone().add3f(0,.25,0);this.attack=function(){v.curGameState==E.GAME_STARTED&&m.getInstance().getNode(v.ballPrefab,v.ballRoot).emit(C.E_BallAction,"launch",t.lineRoot.forward.clone(),e)},this.schedule(this.attack,v.ballInterval)}},r.resetPlayerState=function(){var t=u(0,0,0);this.lineRoot.eulerAngles=t,this.rw.rotation=A.lockPos(u(),this.lineRoot.forward),this.playAni(f.IDLE),this.curState=_.DAIJI,v.curGameState=E.GAME_READY,this.unschedule(this.attack)},r.initAllClothes=function(){for(var t=1;t<=6;t++)this.node.parent.getChildByName("player").getChildByName("rw").getChildByName("Zomball_zj"+t+"_head")?this.capArr.push(this.node.parent.getChildByName("player").getChildByName("rw").getChildByName("Zomball_zj"+t+"_head")):this.node.parent.getChildByName("player").getChildByName("rw").getChildByName("Zomball_zj"+t+"_head")||this.capArr.push(null),this.node.parent.getChildByName("player").getChildByName("rw").getChildByName("Zomball_zj"+t+"_clothes")?this.clothesArr.push(this.node.parent.getChildByName("player").getChildByName("rw").getChildByName("Zomball_zj"+t+"_clothes")):this.node.parent.getChildByName("player").getChildByName("rw").getChildByName("Zomball_zj"+t+"_clothes")||this.clothesArr.push(null),this.node.parent.getChildByName("player").getChildByName("rw").getChildByName("Zomball_zj"+t+"_body")?this.bodyArr.push(this.node.parent.getChildByName("player").getChildByName("rw").getChildByName("Zomball_zj"+t+"_body")):this.node.parent.getChildByName("player").getChildByName("rw").getChildByName("Zomball_zj"+t+"_body")||this.bodyArr.push(null),this.node.parent.getChildByName("player").getChildByName("rw").getChildByName("wq Socket").getChildByName("Zomball_wp"+t)?this.weaponArr.push(this.node.parent.getChildByName("player").getChildByName("rw").getChildByName("wq Socket").getChildByName("Zomball_wp"+t)):this.node.parent.getChildByName("player").getChildByName("rw").getChildByName("wq Socket").getChildByName("Zomball_wp"+t)||this.weaponArr.push(null);console.log(this.capArr,this.weaponArr)},r.onChangeCap=function(t){if(t>0&&t<7)for(var e=0;e<this.capArr.length;e++)e===t-1&&this.capArr[e]?this.capArr[e].active=!0:this.capArr[e]&&(this.capArr[e].active=!1)},r.onChangeClothes=function(t){if(t>0&&t<7)for(var e=0;e<this.clothesArr.length;e++)e===t-1&&this.clothesArr[e]?this.clothesArr[e].active=!0:this.clothesArr[e]&&(this.clothesArr[e].active=!1),e===t-1&&this.bodyArr[e]?this.bodyArr[e].active=!0:e!==t-1||this.bodyArr[e]?this.bodyArr[e]&&(this.bodyArr[e].active=!1):this.bodyArr[0].active=!0},r.onChangeWeapon=function(t){if(t>0&&t<6)for(var e=0;e<this.weaponArr.length;e++)e===t-1&&this.weaponArr[e]?this.weaponArr[e].active=!0:this.weaponArr[e]&&(this.weaponArr[e].active=!1)},r.playAni=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=!1),i&&(this.curAniName=""),this.curAniName!==t&&(this.rwAni&&this.rwAni.play(t),this.rwAni&&this.rwAni.getState(t)&&(this.rwAni.getState(t).speed=e),this.curAniName=t)},r.getAniPro=function(t){return this.rwAni.getState(t).isPlaying?this.rwAni.getState(t).ratio:-1},r.onDisabled=function(){},r.onKeyDown=function(t){switch(t.keyCode){case p.KEY_A:}},a(s,[{key:"curState",get:function(){return this._curState},set:function(t){this._curState=t}},{key:"ballRayMask",get:function(){return B.wall+B.monster+B.push_wall}}]),s}(w))||P);s._RF.pop()}}}));

System.register("chunks:///_virtual/MapLoader.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./LevelToolPlayer.ts","./MapPrefabEnum.ts","./LevelToolBoss.ts","./LevelToolNumWall.ts"],(function(t){"use strict";var e,o,i,r,a,n,s,l,p,c,u,m,d,h,g,y,b,f,N,v,_,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.defineProperty,n=t.createClass},function(t){s=t.cclegacy,l=t._decorator,p=t.CCInteger,c=t.systemEvent,u=t.SystemEvent,m=t.KeyCode,d=t.Vec3,h=t.color,g=t.instantiate,y=t.v3,b=t.director,f=t.Component},function(t){N=t.LevelToolPlayer},function(t){v=t.MapPrefabEnum},function(t){_=t.LevelToolBoss},function(t){w=t.LevelToolNumWall}],execute:function(){var C,S,D,T,P,B,L,M,k,F,O,z,R,j,x,E,I,V,A,W,K,U;s._RF.push({},"38bbdzZyqVAXo6lB18DB+W7","MapLoader",void 0);var q=l.ccclass,Y=l.property,H="assets/bundles/ball-magic/res/config/";t("MapLoader",(C=q("MapLoader"),S=Y({displayName:" "}),D=Y({type:p,min:1,step:1,displayName:"导出关卡数"}),T=Y({displayName:"保存关卡数据"}),P=Y({displayName:" "}),B=Y({type:p,min:1,step:1,displayName:"加载关卡数"}),L=Y({displayName:"加载关卡数据"}),M=Y({displayName:" "}),k=Y({displayName:" "}),F=Y({displayName:"添加地板"}),O=Y({displayName:"添加主角"}),z=Y({displayName:"添加boss"}),R=Y({displayName:"添加数字墙"}),j=Y({displayName:"添加障碍墙壁"}),C((I=e((E=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,i(r(e),"test1",I,r(e)),i(r(e),"mapNameSave",V,r(e)),a(r(e),"_isFinish1",!1),i(r(e),"test2",A,r(e)),i(r(e),"mapNameLoad",W,r(e)),a(r(e),"_isFinish2",!1),i(r(e),"test3",K,r(e)),i(r(e),"test4",U,r(e)),a(r(e),"_t1",!1),a(r(e),"_t4",!1),a(r(e),"_t5",!1),a(r(e),"_t2",!1),a(r(e),"_t3",!1),e}o(e,t);var s=e.prototype;return s.onLoad=function(){c.on(u.EventType.KEY_DOWN,this.keyDown,this)},s.keyDown=function(t){switch(t.keyCode){case m.KEY_E:this._saveMap();break;case m.KEY_R:this.readMap()}},s._saveMap=function(){var t=this,e="id,预设,位置旋转缩放,其他\nnumber,string,string,string\nid,name,pos,other\n";e+=this.writeMapInfo(this.node);var o=window.cce.project;o.replace("\\"," / ");var i=o+"/"+H,r=require("fs"),a=function(){r.writeFile(i+"map"+t.mapNameSave+".csv",e,(function(e){e?(console.warn("失败 关卡解锁: "+t.mapNameSave),console.error("error",e)):console.warn("成功 关卡解锁: "+t.mapNameSave),t._isFinish1=!0}))};r.exists(i,(function(t){t?a():r.mkdir(i,(function(t){t?console.log("创建目录 失败 "+t):(console.log("创建目录 成功 "+i),a())}))}))},s.writeMapInfo=function(t){for(var e="",o=0;o<t.children.length;o++){var i=t.children[o],r=i.name;r=r.split("-")[0];var a=this.getPosRotScal(i,!0),n="";switch(r){case v.map_boss:var s=i.getComponent(_);n=s.bossType+"|"+s.bloodNum;break;case v.map_number_wall:var l=i.getComponent(w);n=this.colorToString(l.wallColor)+"|"+l.wallValue,l.isChangeBall&&(n+="|"+this.colorToString(l.ballColor)+"|"+l.ballScale);break;case v.map_player:var p=i.getComponent(N);n=p.playerCount+"|"+this.colorToString(p.ballColor);break;case v.map_ground:n=this.getPosRotScal(i.getChildByName("player_dead"),!0)+"&"+this.getPosRotScal(i.getChildByName("enemy_dead"),!0)}e+=o+1+',"'+r+'","'+a+'","'+n+'"\n'}return e},s.getPosRotScal=function(t,e,o){return void 0===e&&(e=!0),e?this.vec3ToString(t.getWorldPosition())+"|"+this.vec3ToString(t.eulerAngles)+"|"+this.vec3ToString(t.getWorldScale()):this.vec3ToString(t.getPosition())+"|"+this.vec3ToString(t.eulerAngles)+"|"+this.vec3ToString(t.getScale())},s.readMap=function(){var t=this;this.mapNameSave=this.mapNameLoad,this.node.destroyAllChildren();var e=window.cce.project;e.replace("\\"," / ");var o=e+"/"+H+"map"+this.mapNameLoad+".csv";require("fs").readFile(o,"utf-8",(function(e,o){if(e)return console.error("失败 关卡-解锁："+t.mapNameLoad+" error:"+e);console.warn("成功 关卡-解锁："+t.mapNameLoad+" error:"+t.mapNameLoad),t.readMapData(o),t._isFinish2=!0}))},s.readMapData=function(t){var e=t.split("\n");e=this.deleteUselessData(e),console.log("场景元素数据dataList-1",e);for(var o=3;e[o];){var i=e[o].split("''")[0];console.log("场景元素数据dataList-2",i),i=i.split('"'),i=this.deleteUselessData2(i),console.log("场景元素数据dataList-3",i);var r=i[1],a=i[2],n=i[3],s=this.instantiateNd(r);switch(s.parent=this.node,this.setNdPosRotScaleByDate(s,a,!0),r){case v.map_boss:var l=s.getComponent(_);l.bossType=Number(n.split("|")[0]),l.bloodNum=Number(n.split("|")[1]),s.getComponent(_).addBoss();break;case v.map_number_wall:var p=s.getComponent(w);p.wallColor=this.stringToColor(n.split("|")[0]),p.wallValue=n.split("|")[1],n.split("|")[2]&&(p.isChangeBall=!0,p.ballColor=this.stringToColor(n.split("|")[2]),p.ballScale=Number(n.split("|")[3]));break;case v.map_player:var c=s.getComponent(N);c.playerCount=Number(n.split("|")[0]),c.ballColor=this.stringToColor(n.split("|")[1]);break;case v.map_ground:if(n){var u=n.split("&");this.setNdPosRotScaleByDate(s.getChildByName("player_dead"),u[0],!0),this.setNdPosRotScaleByDate(s.getChildByName("enemy_dead"),u[1],!0)}}o++}},s.deleteUselessData=function(t){for(var e=t.length-1;e>-1;e--)0!==t[e].length&&","!==t[e]||t.splice(e,1);return t},s.deleteUselessData2=function(t){for(var e=t.length-1;e>-1;e--)","!==t[e]&&(0!==t[e].length||e!=t.length-1&&0!=e)||t.splice(e,1);return t},s.stringToVec3=function(t){var e=t.split(",");return e.length<=2?new d(Number(e[0]),0,Number(e[1])):new d(Number(e[0]),Number(e[1]),Number(e[2]))},s.vec3ToString=function(t,e,o){return void 0===e&&(e=!1),void 0===o&&(o=3),e?Number(t.x.toFixed(o))+","+Number(t.z.toFixed(o)):Number(t.x.toFixed(o))+","+Number(t.y.toFixed(o))+","+Number(t.z.toFixed(o))},s.colorToString=function(t){return t.r+","+t.g+","+t.b+","+t.a},s.stringToColor=function(t){var e=t.split(",");return h(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3]))},s.setNdPosRotScaleByDate=function(t,e,o){void 0===o&&(o=!0);var i=e.split("|"),r=this.stringToVec3(i[0]),a=this.stringToVec3(i[1]),n=this.stringToVec3(i[2]);o?(t.worldPosition=r,t.eulerAngles=a,t.worldScale=n):(t.position=r,t.eulerAngles=a,t.scale=n)},s.instantiateNd=function(t,e){this.mapItem.getChildByName(t)||(console.warn("错误 在mapItem中找不到 "+t),console.error("error"));var o=g(this.mapItem.getChildByName(t));return o.parent=e||this.node,o},n(e,[{key:"getMapData",get:function(){return this._isFinish1},set:function(t){this._isFinish1!=t&&(this._isFinish1=t,console.log("开始计算"),this._saveMap())}},{key:"setMapData",get:function(){return this._isFinish2},set:function(t){this._isFinish2!=t&&(this._isFinish2=t,console.log("开始计算"),this.readMap())}},{key:"t1",get:function(){return this._t1},set:function(t){this._t1!=t&&(this._t1=t,this.node.getChildByName(v.map_ground)||(this.instantiateNd(v.map_ground).position=y()))}},{key:"t4",get:function(){return this._t4},set:function(t){this._t4!=t&&(this._t4=t,this.node.getChildByName(v.map_player)||(this.instantiateNd(v.map_player).position=y()))}},{key:"t5",get:function(){return this._t5},set:function(t){if(this._t5!=t&&(this._t5=t,!this.node.getChildByName(v.map_boss))){var e=this.instantiateNd(v.map_boss);e.position=y(),e.getComponent(_).addBoss()}}},{key:"t2",get:function(){return this._t2},set:function(t){this._t2!=t&&(this._t2=t,this.instantiateNd(v.map_number_wall).position=y())}},{key:"t3",get:function(){return this._t3},set:function(t){this._t3!=t&&(this._t3=t,this.instantiateNd(v.map_wall).position=y())}},{key:"mapItem",get:function(){var t;return null===(t=b.getScene())||void 0===t?void 0:t.getChildByName("mapItem")}}]),e}(f)).prototype,"test1",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"导出关卡——关卡分栏"}}),V=e(E.prototype,"mapNameSave",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(E.prototype,"getMapData",[T],Object.getOwnPropertyDescriptor(E.prototype,"getMapData"),E.prototype),A=e(E.prototype,"test2",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"加载关卡——关卡分栏"}}),W=e(E.prototype,"mapNameLoad",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),e(E.prototype,"setMapData",[L],Object.getOwnPropertyDescriptor(E.prototype,"setMapData"),E.prototype),K=e(E.prototype,"test3",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"创建节点——关卡分栏"}}),U=e(E.prototype,"test4",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"----------------------"}}),e(E.prototype,"t1",[F],Object.getOwnPropertyDescriptor(E.prototype,"t1"),E.prototype),e(E.prototype,"t4",[O],Object.getOwnPropertyDescriptor(E.prototype,"t4"),E.prototype),e(E.prototype,"t5",[z],Object.getOwnPropertyDescriptor(E.prototype,"t5"),E.prototype),e(E.prototype,"t2",[R],Object.getOwnPropertyDescriptor(E.prototype,"t2"),E.prototype),e(E.prototype,"t3",[j],Object.getOwnPropertyDescriptor(E.prototype,"t3"),E.prototype),x=E))||x));s._RF.pop()}}}));

System.register("chunks:///_virtual/NumberWall.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GamePrefabs.ts","./FlMath.ts","./GameEvents.ts","./FLGloable.ts","./Behavior3D.ts","./GameState.ts","./NumberTool.ts"],(function(e){"use strict";var t,l,i,a,s,r,o,n,u,c,h,b,f,m,p,y,T;return{setters:[function(e){t=e.defineProperty,l=e.inheritsLoose,i=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,r=e.MeshRenderer,o=e.BoxCollider,n=e.Node,u=e.v3},function(e){c=e.GamePrefabs},function(e){h=e.default},function(e){b=e.GameEvents},function(e){f=e.FLGloable},function(e){m=e.Behavior3D},function(e){p=e.EColliderGroup,y=e.EBuffType},function(e){T=e.NumberTool}],execute:function(){var d,C,B;a._RF.push({},"3e008JbyX5MPa6PPO/CafcW","NumberWall",void 0);var P=s.ccclass;s.property,e("NumberWall",P("NumberWall")((B=C=function(e){function a(){for(var l,a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return l=e.call.apply(e,[this].concat(s))||this,t(i(l),"isInit",!1),t(i(l),"centerBlock",null),t(i(l),"centerMat",null),t(i(l),"numberRoot",null),t(i(l),"isChangeBall",!1),t(i(l),"ballColor",null),t(i(l),"ballScale",null),t(i(l),"boxCom",null),t(i(l),"buffType",0),t(i(l),"buffValue",0),t(i(l),"throughNum",0),t(i(l),"curNumText",null),t(i(l),"numberScript",null),t(i(l),"isPlayerWall",!0),l}l(a,e);var s=a.prototype;return s.onLoad=function(){this.centerBlock=this.node.getChildByName("centerBlock"),this.centerMat=this.centerBlock.children[0].getComponent(r).material,this.numberRoot=this.node.getChildByName("numberRoot"),this.boxCom=this.centerBlock.getComponent(o),this.boxCom.setGroup(p.number_wall),this.centerBlock.on(b.E_DoorAction,this.onEnterDoor,this),this.node.worldPosition.z<-10?this.isPlayerWall=!1:this.isPlayerWall=!0},s.init=function(e,t,l,i,a){this.centerBlock.scale=e,this.centerMat.setProperty("mainColor",t),this.isChangeBall=!!i,this.ballColor=i,this.ballScale=a;var s=h.deepClone_SlapKing_(l);this.curNumText=s;var r=s.substring(0,1);switch(this.buffValue=Number(s.slice(1)),r){case"+":this.buffType=y.ADD;break;case"-":this.buffType=y.CUT;break;case"x":this.buffType=y.MULTIPLY;break;case"*":this.buffType=y.MULTIPLY2;break;case"/":this.buffType=y.EXCEPT}this.isInit=!0;var o=new n;o.parent=this.node;var u=o.addComponent(T);u.setNumber(this.buffType,this.buffValue,c.getInstance().res.dj4_number),this.numberScript=u},s.getNumberWallDate=function(){var e=[];return e.push(this.curNumText),e.push(this.ballColor),e.push(this.ballScale),e},s.resetNumberWall=function(e,t,l){var i=e.substring(0,1);switch(this.buffValue=Number(e.slice(1)),i){case"+":this.buffType=y.ADD;break;case"-":this.buffType=y.CUT;break;case"x":this.buffType=y.MULTIPLY;break;case"*":this.buffType=y.MULTIPLY2;break;case"/":this.buffType=y.EXCEPT}this.numberScript.node.destroyAllChildren(),this.numberScript.setNumber(this.buffType,this.buffValue,c.getInstance().res.dj4_number)},s.onEnterDoor=function(e){if(!(this.isPlayerWall&&e.worldPosition.z<this.node.worldPosition.z)&&(this.isPlayerWall||!(e.worldPosition.z>this.node.worldPosition.z)))switch(this.throughNum+=1,this.ballScale&&(e.scale=u(this.ballScale,this.ballScale,this.ballScale)),this.ballColor&&(f.ballCloneMaterial.setProperty("mainColor",this.ballColor),f.ballCloneMaterial.setProperty("emissive",this.ballColor),e.children[0].getComponent(r).material=f.ballCloneMaterial),this.buffType){case y.ADD:e.emit(b.E_BallAction,"enterDoorCallBack",this.buffType,!1,[this.centerBlock.uuid,Math.ceil(this.buffValue/100)]);break;case y.CUT:this.buffValue-=1,e.emit(b.E_BallAction,"enterDoorCallBack",this.buffType,this.buffValue>0);break;case y.MULTIPLY:e.emit(b.E_BallAction,"enterDoorCallBack",this.buffType,!1,this.buffValue);break;case y.MULTIPLY2:e.emit(b.E_BallAction,"enterDoorCallBack",this.buffType,!1,[this.centerBlock.uuid,this.buffValue]);break;case y.EXCEPT:e.emit(b.E_BallAction,"enterDoorCallBack",this.buffType,this.throughNum%this.buffType!=0)}},s.onDisabled=function(){},s.update=function(){},a}(m),t(C,"newBallMaterial",null),d=B))||d);a._RF.pop()}}}));

System.register("chunks:///_virtual/MapLevelVo.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"3e06cv8yAFAkp4dOOt8Cl6z","MapLevelVo",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Ball_10001.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./BallBase.ts"],(function(t){"use strict";var e,r,n,s;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator},function(t){s=t.BallBase}],execute:function(){var c;r._RF.push({},"42bb83fIQRDeJQzrSzFmuG3","Ball_10001",void 0);var l=n.ccclass;n.property,t("ball_10001",l(c=function(t){function r(){return t.apply(this,arguments)||this}return e(r,t),r}(s))||c);r._RF.pop()}}}));

System.register("chunks:///_virtual/CameraScript.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Vec3Util.ts","./UIEvenEnum.ts","./FLGloable.ts","./GameEvenEnum.ts","./Behavior3D.ts","./GameState.ts"],(function(t){"use strict";var i,e,n,o,s,a,r,c,l,h,d,u,p,f,m,g;return{setters:[function(t){i=t.inheritsLoose,e=t.defineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,a=t.Camera,r=t.Vec3,c=t.v3,l=t.systemEvent,h=t.tween},function(t){d=t.Vec3Util},function(t){u=t.UIEvenEnum},function(t){p=t.FLGloable},function(t){f=t.GameEvenEnum},function(t){m=t.Behavior3D},function(t){g=t.ECameraState}],execute:function(){var v;o._RF.push({},"558219OtYhEY6ILHsW4pQPT","CameraScript",void 0);var C=s.ccclass;s.property,t("CameraScript",C("CameraScript")(v=function(t){function o(){for(var i,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return i=t.call.apply(t,[this].concat(s))||this,e(n(i),"curState",1),e(n(i),"initPosition",void 0),e(n(i),"initAngle",void 0),e(n(i),"subCameraAndPlayer",void 0),e(n(i),"initFieldOfView",void 0),e(n(i),"lockTargetNd",void 0),e(n(i),"isInit",!1),i}i(o,t);var s=o.prototype;return s.onLoad=function(){this.lockTargetNd=p.player,this.initPosition=this.node.position.clone(),this.initAngle=this.node.eulerAngles.clone(),this.initFieldOfView=this.node.getComponent(a).fov,this.subCameraAndPlayer=r.subtract(c(),this.node.worldPosition,this.lockTargetNd.position)},s.onEnabled=function(){this.registerEvent(f.CAMERA_CHANGE_STATE,this.onStateChange,this)},s.onStateChange=function(t,i){switch(this.curState=t,t){case g.DAIJI:this.isInit=!1;break;case g.FLOOW:this.isInit=!0;break;case g.UNLOCK:this.isInit=!1,l.emit(u.GAME_PAGE_VIDEO_BACK),p.gameIsStop=!0,this.unlockCamera(i[0],i[1],i[2]);break;case g.STOP:this.isInit=!1}},s.resetCamera=function(){this.curState==g.DAIJI&&(this.node.worldPosition=r.add(c(),p.player.worldPosition,this.subCameraAndPlayer))},s.init=function(){this.node.position=this.initPosition,this.node.eulerAngles=this.initAngle,this.node.getComponent(a).fov=this.initFieldOfView,this.curState=g.DAIJI},s.update=function(){if(this.isInit)switch(this.curState){case g.DAIJI:break;case g.FLOOW:if(!this.lockTargetNd||!this.lockTargetNd.parent)return;this.flowTarget(this.lockTargetNd,this.subCameraAndPlayer);break;case g.STOP:}},s.flowTarget=function(t,i,e){void 0===e&&(e=.8),this.node.position=d.lerpVec3(this.node.position,c(t.position.x+i.x,t.position.y+i.y,t.position.z+i.z),e)},s.unlockCamera=function(t,i,e){var n=this;console.log("解锁缓动");var o=r.add(c(),t,this.subCameraAndPlayer),s=r.add(c(),p.player.worldPosition,this.subCameraAndPlayer);h(this.node).delay(1).to(i,{worldPosition:o}).delay(e).to(i,{worldPosition:s}).call((function(){p.gameIsStop=!1,n.onStateChange(g.FLOOW)})).start()},s.onDisabled=function(){},o}(m))||v);o._RF.pop()}}}));

System.register("chunks:///_virtual/GameState.ts",["cc"],(function(E){"use strict";var e;return{setters:[function(E){e=E.cclegacy}],execute:function(){var t,o,l,n,a,I;E({EBloodType:void 0,EBuffType:void 0,ECameraState:void 0,ECanColliderGroup:void 0,EColliderGroup:void 0,EState:void 0}),e._RF.push({},"55f98YfSWFJn6pd7scjZTN9","GameState",void 0),function(E){E[E.DAIJI=0]="DAIJI",E[E.ATTACK=1]="ATTACK",E[E.HIT=2]="HIT",E[E.DIED=3]="DIED"}(t||(t=E("EState",{}))),function(E){E[E.DAIJI=0]="DAIJI",E[E.FLOOW=1]="FLOOW",E[E.UNLOCK=2]="UNLOCK",E[E.STOP=3]="STOP"}(o||(o=E("ECameraState",{}))),function(E){E[E.PLAYER=0]="PLAYER",E[E.GREEN=1]="GREEN",E[E.RED=2]="RED"}(l||(l=E("EBloodType",{}))),function(E){E[E.ball=1]="ball",E[E.plane=2]="plane",E[E.wall=4]="wall",E[E.number_wall=8]="number_wall",E[E.monster=16]="monster",E[E.push_wall=32]="push_wall"}(n||(n=E("EColliderGroup",{}))),function(E){E[E.PLAYER=16]="PLAYER",E[E.PLAYER_SOLDIER=18]="PLAYER_SOLDIER",E[E.ENEMY_SOLDIER=28]="ENEMY_SOLDIER",E[E.ENEMY_LIMIT=8]="ENEMY_LIMIT",E[E.OUT_LIMIT=16]="OUT_LIMIT"}(a||(a=E("ECanColliderGroup",{}))),function(E){E[E.ADD=1]="ADD",E[E.CUT=2]="CUT",E[E.MULTIPLY=3]="MULTIPLY",E[E.MULTIPLY2=4]="MULTIPLY2",E[E.EXCEPT=5]="EXCEPT"}(I||(I=E("EBuffType",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/EEffectEnum.ts",["cc"],(function(e){"use strict";var f;return{setters:[function(e){f=e.cclegacy}],execute:function(){var n;e("EffectEnum",void 0),f._RF.push({},"5610bz4MqhJ+5AcVubdh0qf","EEffectEnum",void 0),function(e){e.jianzaoyanwu="jianzaoyanwu",e.effWorkHit="effWorkHit",e.effWorkAngry="effWorkAngry",e.effWorkSleep="effWorkSleep",e.effHandSmoke="effHandSmoke",e.effBoxSmoke="effBoxSmoke",e.effMoneyFly="effMoneyFly"}(n||(n=e("EffectEnum",{}))),f._RF.pop()}}}));

System.register("chunks:///_virtual/EBossSkill.ts",["cc"],(function(L){"use strict";var s;return{setters:[function(L){s=L.cclegacy}],execute:function(){var t;L("EBossSkill",void 0),s._RF.push({},"566f8LnV99DvKEt7oja0n+L","EBossSkill",void 0),function(L){L[L.SKILL_FIRE=1]="SKILL_FIRE",L[L.SKILL_LIGHTNING=2]="SKILL_LIGHTNING",L[L.SKILL_BALL=3]="SKILL_BALL"}(t||(t=L("EBossSkill",{}))),s._RF.pop()}}}));

System.register("chunks:///_virtual/LevelToolNumWall.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,l,r,a,i,n,o,u,s,c,p,y,m,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,l=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized,i=e.defineProperty,n=e.createClass},function(e){o=e.cclegacy,u=e._decorator,s=e.Color,c=e.CCString,p=e.CCInteger,y=e.color,m=e.instantiate,f=e.director,h=e.Component}],execute:function(){var b,g,d,v,C,w,N,B,I,V,_,z;o._RF.push({},"5ce42dkqQBEIb9GIvtTaz5J","LevelToolNumWall",void 0);var L=u.ccclass,T=u.property;e("LevelToolNumWall",(b=L("LevelToolNumWall"),g=T({type:s,displayName:"面片颜色"}),d=T({type:c,displayName:"数字"}),v=T({type:Boolean,displayName:"是否改变球颜色"}),C=T({type:s,displayName:"穿过-球颜色",visible:function(){return this.isChangeBall}}),w=T({type:p,displayName:"穿过-球缩放",visible:function(){return this.isChangeBall}}),b((I=t((B=function(e){function t(){for(var t,l=arguments.length,n=new Array(l),o=0;o<l;o++)n[o]=arguments[o];return t=e.call.apply(e,[this].concat(n))||this,r(a(t),"wallColor",I,a(t)),i(a(t),"_wallValue","+100"),r(a(t),"isChangeBall",V,a(t)),r(a(t),"ballColor",_,a(t)),r(a(t),"ballScale",z,a(t)),t}l(t,e);var o=t.prototype;return o.setValue=function(){},o.instantiateNd=function(e,t){this.mapItem.getChildByName(e)||(console.warn("错误 在mapItem中找不到 "+e),console.error("error"));var l=m(this.mapItem.getChildByName(e));return l.parent=t||this.node,l},n(t,[{key:"wallValue",get:function(){return this._wallValue},set:function(e){this._wallValue!=e&&(this._wallValue=e,this.setValue())}},{key:"mapItem",get:function(){var e;return null===(e=f.getScene())||void 0===e?void 0:e.getChildByName("mapItem")}}]),t}(h)).prototype,"wallColor",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y()}}),t(B.prototype,"wallValue",[d],Object.getOwnPropertyDescriptor(B.prototype,"wallValue"),B.prototype),V=t(B.prototype,"isChangeBall",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=t(B.prototype,"ballColor",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y()}}),z=t(B.prototype,"ballScale",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),N=B))||N));o._RF.pop()}}}));

System.register("chunks:///_virtual/TweenUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,i,o,r,a,c,l,s,u,p,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.defineProperty},function(e){a=e.cclegacy,c=e._decorator,l=e.CCInteger,s=e.tween,u=e.Tween,p=e.v3,h=e.Component}],execute:function(){var f,w,y,b,d,g,v;a._RF.push({},"60e85QEr5hFupfYofCKbbDf","TweenUI",void 0);var P,T=c.ccclass,S=c.property;!function(e){e[e.BREATHE=1]="BREATHE",e[e.POPUP=2]="POPUP"}(P||(P={}));e("TweenUI",(f=T("TweenUI"),w=S({type:l,tooltip:"缓动类型"}),y=S({type:l,tooltip:"缓动变化值"}),f((g=t((d=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return t=e.call.apply(e,[this].concat(a))||this,i(o(t),"tweenNum",g,o(t)),i(o(t),"tweenRatio",v,o(t)),r(o(t),"initScale",void 0),r(o(t),"targetScale",void 0),t}n(t,e);var a=t.prototype;return a.onLoad=function(){this.initScale=this.node.scale.clone(),this.targetScale=this.initScale.clone().multiplyScalar(this.tweenRatio)},a.onEnable=function(){switch(this.tweenNum){case P.BREATHE:this.breathe(this.node);break;case P.POPUP:this.popUp(this.node)}},a.breathe=function(e){var t=this;s(e).delay(1).to(1,{scale:this.targetScale}).call((function(){s(e).to(1,{scale:t.initScale}).start()})).union().repeatForever().start()},a.onDisable=function(){u.stopAllByTarget(this.node)},a.popUp=function(e){s(e).to(2,{position:p(0,90,0)},{easing:"backIn"}).start()},t}(h)).prototype,"tweenNum",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=t(d.prototype,"tweenRatio",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.2}}),b=d))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/TbCommodityVo.ts",["cc"],(function(){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"6129ee4mgRP1pfMeNrFaI3U","TbCommodityVo",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/FollowMovement.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,o,n,r,s,a,l,p,u,c,d,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized,r=t.defineProperty,s=t.createClass},function(t){a=t.cclegacy,l=t._decorator,p=t.Node,u=t.CCFloat,c=t.v3,d=t.Vec3,h=t.Component}],execute:function(){var y,f,b,g,m,w,L,v,z,N,R,C,P,F,S,k,x;a._RF.push({},"62c6bYOT19FwoeFRC6pb+RK","FollowMovement",void 0);var M=l.ccclass,_=l.property;t("FollowMovement",(y=M("FollowMovement"),f=_({type:p,displayName:"跟随目标节点"}),b=_({type:u,displayName:"目标移动多远记录一次距离"}),g=_({type:u,displayName:"记录还剩多少时停止移动"}),m=_({type:u,displayName:"走速度"}),w=_({type:u,displayName:"跑速度"}),L=_({type:u,displayName:"速度变化的缓动率"}),v=_({type:u,displayName:"距离目标多远后开始跑（单位是List的Item数）"}),y((R=e((N=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,o(n(e),"targetNd",R,n(e)),o(n(e),"recordGap",C,n(e)),o(n(e),"stopCount",P,n(e)),o(n(e),"walkSpeed",F,n(e)),o(n(e),"runSpeed",S,n(e)),o(n(e),"speedLerpRant",k,n(e)),o(n(e),"startRunCount",x,n(e)),r(n(e),"posList",[]),r(n(e),"velocity",c()),e}i(e,t);var a=e.prototype;return a.onLoad=function(){},a.update=function(){if(this.targetNd){for(;this.posList.length>0&&d.distance(c(this.node.worldPosition.x,0,this.node.worldPosition.z),c(this.posList[0].x,0,this.posList[0].z))<this.recordGap;)this.posList.shift();this.posList.length>0?(d.distance(this.targetNd.worldPosition,this.posList[this.posList.length-1])>this.recordGap&&this.posList.push(this.targetNd.worldPosition.clone()),this.posList.length>this.stopCount?this.velocity=c(this.posList[0].x-this.node.worldPosition.x,0,this.posList[0].z-this.node.worldPosition.z).normalize().multiplyScalar(this.walkSpeed):this.velocity=d.lerp(c(),this.velocity,d.ZERO,this.speedLerpRant),this.node.translate(this.velocity,1)):this.posList.push(this.targetNd.worldPosition.clone())}},a.onDisable=function(){this.posList=[]},s(e,[{key:"isRunning",get:function(){return this.posList.length>this.startRunCount}}]),e}(h)).prototype,"targetNd",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(N.prototype,"recordGap",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),P=e(N.prototype,"stopCount",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),F=e(N.prototype,"walkSpeed",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),S=e(N.prototype,"runSpeed",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),k=e(N.prototype,"speedLerpRant",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),x=e(N.prototype,"startRunCount",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),z=N))||z));a._RF.pop()}}}));

System.register("chunks:///_virtual/MonsterTool.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,r,i,n,a,s,l,p,c,d,h,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,r=e.defineProperty,i=e.assertThisInitialized,n=e.initializerDefineProperty,a=e.createClass},function(e){s=e.cclegacy,l=e._decorator,p=e.Vec3,c=e.v3,d=e.SkeletalAnimation,h=e.Node,y=e.Component}],execute:function(){var u,f,g,m,N,P,b,w,S,v,C,O,A,D,R,k,z;s._RF.push({},"64416bYTsRFKrQQtnfuHrwm","MonsterTool",void 0);var H=l.ccclass,I=l.property;e("MonsterTool",(u=H("MonsterTool"),f=I({type:p,displayName:"排布属性"}),g=I({displayName:"当前节点下宠物节点排布"}),m=I({tooltip:"播放动作名称,不填则播放默认动作"}),N=I({displayName:"当前节点下宠物动作"}),P=I({displayName:"创建宠物节点1-20"}),b=I({displayName:"更改子节点名字为rw"}),w=I({displayName:"增加血量节点"}),S=I({displayName:"宠物阶数"}),v=I({displayName:"宠物缩放倍数"}),C=I({displayName:"调整宠物大小"}),u((D=t((A=function(e){function t(){for(var t,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,r(i(t),"isSort",!0),r(i(t),"isPlayAni",!0),r(i(t),"isCreatPet",!0),r(i(t),"isChangeName",!0),r(i(t),"isAddHpRoot",!0),r(i(t),"isPetScale",!0),n(i(t),"sortInfo",D,i(t)),n(i(t),"aniName",R,i(t)),n(i(t),"petOrder",k,i(t)),n(i(t),"petScale",z,i(t)),t}o(t,e);var s=t.prototype;return s.updateNodeSort=function(){for(var e=0;e<this.node.children.length;e++){this.node.children[e].position=c(e%this.sortInfo.z*this.sortInfo.x,0,Math.floor(e/this.sortInfo.z)*this.sortInfo.y)}},s.playNdAni=function(){for(var e=0;e<this.node.children.length;e++){var t=this.node.children[e].getComponentsInChildren(d);if(t&&t[0]){var o=this.aniName;""==o&&(o=t[0].defaultClip.name),console.log("播放成功",o),t[0].play(o)}}},s.start=function(){},a(t,[{key:"nodeSort",get:function(){return!this.isSort},set:function(e){this.isSort=!1,this.updateNodeSort()}},{key:"playAni",get:function(){return!this.isPlayAni},set:function(e){this.isPlayAni=!1,this.playNdAni(),console.log("当前节点下宠物动作")}},{key:"creatPet",get:function(){return!this.isCreatPet},set:function(e){this.isCreatPet=!1;for(var t=1;t<=20;t++)for(var o=1;o<=3;o++){var r=100*(1e3+t)+o;this.node.addChild(new h(r.toString()))}console.log("创建宠物节点1-20")}},{key:"changeName",get:function(){return!this.isChangeName},set:function(e){this.isChangeName=!1;for(var t=0;t<this.node.children.length;t++)this.node.children[t].children[0].name="rw",this.node.children[t].children[0].position=c();console.log("更改子节点名字为rw")}},{key:"addHpRoot",get:function(){return!this.isAddHpRoot},set:function(e){this.isAddHpRoot=!1;for(var t=0;t<this.node.children.length;t++)this.node.children[t].getChildByName("blood")||this.node.children[t].addChild(new h("blood"));console.log("增加血量节点")}},{key:"changePetScale",get:function(){return!this.isPetScale},set:function(e){this.isPetScale=!1;for(var t=0;t<this.node.children.length;t++)if(this.node.children[t].getChildByName("rw")&&Number(this.node.children[t].name.split("_")[1])%10==this.petOrder){var o=this.node.children[t].getChildByName("rw").scale.x*this.petScale;o=Math.floor(100*o)/100,this.node.children[t].getChildByName("rw").scale=c(o,o,o)}console.log("调整宠物大小")}}]),t}(y)).prototype,"sortInfo",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return c(5,3,3)}}),t(A.prototype,"nodeSort",[g],Object.getOwnPropertyDescriptor(A.prototype,"nodeSort"),A.prototype),R=t(A.prototype,"aniName",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),t(A.prototype,"playAni",[N],Object.getOwnPropertyDescriptor(A.prototype,"playAni"),A.prototype),t(A.prototype,"creatPet",[P],Object.getOwnPropertyDescriptor(A.prototype,"creatPet"),A.prototype),t(A.prototype,"changeName",[b],Object.getOwnPropertyDescriptor(A.prototype,"changeName"),A.prototype),t(A.prototype,"addHpRoot",[w],Object.getOwnPropertyDescriptor(A.prototype,"addHpRoot"),A.prototype),k=t(A.prototype,"petOrder",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),z=t(A.prototype,"petScale",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),t(A.prototype,"changePetScale",[C],Object.getOwnPropertyDescriptor(A.prototype,"changePetScale"),A.prototype),O=A))||O));s._RF.pop()}}}));

System.register("chunks:///_virtual/FreeFlightCamera.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,i,n,r,s,a,h,c,p,l,y,u,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,r=e.defineProperty},function(e){s=e.cclegacy,a=e._decorator,h=e.math,c=e.KeyCode,p=e.CCFloat,l=e.systemEvent,y=e.SystemEvent,u=e.game,d=e.Component}],execute:function(){var v,f,_,S,m,C,T,E,g,k,x,w;s._RF.push({},"6c841mU+4JNvqwHy5tJsJh0","FreeFlightCamera",void 0);var z=a.ccclass,A=a.property,F=a.menu,U=h.Vec2,b=h.Vec3,D=h.Quat,L=new U,O=new U,H=new b,K=new D,M="W".charCodeAt(0),P="S".charCodeAt(0),W="A".charCodeAt(0),N="D".charCodeAt(0),R="Q".charCodeAt(0),Y="E".charCodeAt(0),Q=c.SHIFT_LEFT;e("FreeFlightCamera",(v=z("FreeFlightCamera"),f=F("game/camera/FreeFlightCamera"),_=A({type:p,tooltip:"移动速度"}),S=A({type:p,tooltip:"按Shift键后的速度"}),m=A({type:p,slide:!0,range:[.05,.5,.01],tooltip:"移动后惯性效果"}),C=A({type:p,tooltip:"旋转速度"}),v(T=f((g=t((E=function(e){function t(){for(var t,o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,i(n(t),"moveSpeed",g,n(t)),i(n(t),"moveSpeedShiftScale",k,n(t)),i(n(t),"damp",x,n(t)),i(n(t),"rotateSpeed",w,n(t)),r(n(t),"_euler",new b),r(n(t),"_velocity",new b),r(n(t),"_position",new b),r(n(t),"_speedScale",1),t}o(t,e);var s=t.prototype;return s.onLoad=function(){l.on(y.EventType.MOUSE_WHEEL,this.onMouseWheel,this),l.on(y.EventType.KEY_DOWN,this.onKeyDown,this),l.on(y.EventType.KEY_UP,this.onKeyUp,this),l.on(y.EventType.TOUCH_START,this.onTouchStart,this),l.on(y.EventType.TOUCH_MOVE,this.onTouchMove,this),l.on(y.EventType.TOUCH_END,this.onTouchEnd,this),b.copy(this._euler,this.node.eulerAngles),b.copy(this._position,this.node.position)},s.onDestroy=function(){l.off(y.EventType.MOUSE_WHEEL,this.onMouseWheel,this),l.off(y.EventType.KEY_DOWN,this.onKeyDown,this),l.off(y.EventType.KEY_UP,this.onKeyUp,this),l.off(y.EventType.TOUCH_START,this.onTouchStart,this),l.off(y.EventType.TOUCH_MOVE,this.onTouchMove,this),l.off(y.EventType.TOUCH_END,this.onTouchEnd,this)},s.update=function(e){b.transformQuat(H,this._velocity,this.node.rotation),b.scaleAndAdd(this._position,this._position,H,this.moveSpeed*this._speedScale),b.lerp(H,this.node.position,this._position,e/this.damp),this.node.setPosition(H),D.fromEuler(K,this._euler.x,this._euler.y,this._euler.z),D.slerp(K,this.node.rotation,K,e/this.damp),this.node.setRotation(K)},s.onMouseWheel=function(e){var t=-e.getScrollY()*this.moveSpeed*.1;b.transformQuat(H,b.UNIT_Z,this.node.rotation),b.scaleAndAdd(this._position,this.node.position,H,t)},s.onKeyDown=function(e){var t=this._velocity;e.keyCode===Q?this._speedScale=this.moveSpeedShiftScale:e.keyCode===M?0===t.z&&(t.z=-1):e.keyCode===P?0===t.z&&(t.z=1):e.keyCode===W?0===t.x&&(t.x=-1):e.keyCode===N?0===t.x&&(t.x=1):e.keyCode===R?0===t.y&&(t.y=-1):e.keyCode===Y&&0===t.y&&(t.y=1)},s.onKeyUp=function(e){var t=this._velocity;e.keyCode===Q?this._speedScale=1:e.keyCode===M?t.z<0&&(t.z=0):e.keyCode===P?t.z>0&&(t.z=0):e.keyCode===W?t.x<0&&(t.x=0):e.keyCode===N?t.x>0&&(t.x=0):e.keyCode===R?t.y<0&&(t.y=0):e.keyCode===Y&&t.y>0&&(t.y=0)},s.onTouchStart=function(e){u.canvas.requestPointerLock&&u.canvas.requestPointerLock()},s.onTouchMove=function(e){e.getStartLocation(L),L.x>.4*u.canvas.width?(e.getDelta(O),this._euler.y-=O.x*this.rotateSpeed*.1,this._euler.x+=O.y*this.rotateSpeed*.1):(e.getLocation(O),U.subtract(O,O,L),this._velocity.x=.01*O.x,this._velocity.z=.01*-O.y)},s.onTouchEnd=function(e){document.exitPointerLock&&document.exitPointerLock(),e.getStartLocation(L),L.x<.4*u.canvas.width&&(this._velocity.x=0,this._velocity.z=0)},t}(d)).prototype,"moveSpeed",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),k=t(E.prototype,"moveSpeedShiftScale",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),x=t(E.prototype,"damp",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),w=t(E.prototype,"rotateSpeed",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),T=E))||T)||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/GamePanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIManager.ts","./GamePageEnum.ts","./Behavior3D.ts"],(function(n){"use strict";var e,t,a,i,o,c,r,u;return{setters:[function(n){e=n.inheritsLoose,t=n.defineProperty,a=n.assertThisInitialized},function(n){i=n.cclegacy,o=n._decorator},function(n){c=n.uiManager},function(n){r=n.GamePageEnum},function(n){u=n.Behavior3D}],execute:function(){var s;i._RF.push({},"6d84aKLi/BEKq6HRgciUmZZ","GamePanel",void 0);var l=o.ccclass;o.property,n("GamePanel",l("GamePanel")(s=function(n){function i(){for(var e,i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=n.call.apply(n,[this].concat(o))||this,t(a(e),"clickNum",0),e}e(i,n);var o=i.prototype;return o.show=function(){},o.onEnabled=function(){},o.update=function(n){},o.showDebugPanel=function(){c.instance.showDialog(r.PAGE_DEBUG)},o.onDisabled=function(){this.unscheduleAllCallbacks()},i}(u))||s);i._RF.pop()}}}));

System.register("chunks:///_virtual/EBossState.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){var s;t("EBossState",void 0),e._RF.push({},"6fdc4YkqZRK8a3A4wexSwIr","EBossState",void 0),function(t){t.IDLE="idle",t.HIT="hit",t.ATTACK="attack",t.DIED="died",t.CONTINUOUS="continuous"}(s||(s=t("EBossState",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/NumberTool.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameState.ts"],(function(e){"use strict";var t,r,i,n,o,s,a,u,l,p,f,c,h,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.defineProperty},function(e){s=e.cclegacy,a=e._decorator,u=e.Prefab,l=e.Enum,p=e.v4,f=e.instantiate,c=e.MeshRenderer,h=e.Component},function(e){m=e.EBuffType}],execute:function(){var b,y,g,P,N,v,T,w;s._RF.push({},"70a443B9aNPIp+p/uhlebsf","NumberTool",void 0);var d=a.ccclass,M=a.property;e("NumberTool",(b=M({type:Number,displayName:"设置数字"}),y=M({type:u,displayName:"数字面片预制体"}),g=M({type:l(m),displayName:"数字运算类型"}),d((v=t((N=function(e){function t(){for(var t,r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,i(n(t),"showNumber",v,n(t)),i(n(t),"numPerfab",T,n(t)),i(n(t),"styleType",w,n(t)),o(n(t),"seperate",.45),o(n(t),"numTilingOffset",[p(1,1,0,0),p(1,1,0,.25),p(1,1,0,.5),p(1,1,0,.75),p(1,1,.25,0),p(1,1,.25,.25),p(1,1,.25,.5),p(1,1,.25,.75),p(1,1,.5,0),p(1,1,.5,.25),p(1,1,.5,.5),p(1,1,.5,.75),p(1,1,.75,0),p(1,1,.75,.25)]),t}r(t,e);var s=t.prototype;return s.start=function(){},s.setNumber=function(e,t,r){this.showNumber=t,this.numPerfab=r;for(var i=0,n=[];this.showNumber>0&&Math.floor(this.showNumber/10)>=0;){var o=this.showNumber%10;this.showNumber=Math.floor(this.showNumber/10);var s=f(this.numPerfab);s.parent=this.node,n.push(s),s.getComponent(c).material.setProperty("tilingOffset",this.numTilingOffset[o]),i++}var a=10;switch(e){case m.ADD:a=11;break;case m.CUT:a=12;break;case m.MULTIPLY:case m.MULTIPLY2:a=10;break;case m.EXCEPT:a=13}var u=f(this.numPerfab);u.parent=this.node,u.getComponent(c).material.setProperty("tilingOffset",this.numTilingOffset[a]),i++,console.log("加上运算符，总位数为:",i);for(var l=Math.floor(i%2)?0:this.seperate/2,p=0;p<n.length;p++){var h=(Math.floor(i/2)-p)*this.seperate-l,b=n[p].getPosition();b.x=h,b.y-=.2,n[p].setPosition(b),n[p].setScale(.75,1,.75)}var y=n[n.length-1].getPosition();y.x=y.x-this.seperate,u.setPosition(y),u.setScale(.75,1,.75)},t}(h)).prototype,"showNumber",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),T=t(N.prototype,"numPerfab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(N.prototype,"styleType",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return m.ADD}}),P=N))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/light.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,o,r,i,c,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.tween,i=t.Vec3,c=t.Tween,s=t.Component}],execute:function(){var u;n._RF.push({},"7e2ccEfNzhPb4zApJrc03Zv","light",void 0);var l=o.ccclass;o.property,t("Light",l("Light")(u=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.onEnable=function(){var t=this;r(this.node).to(4,{eulerAngles:new i(0,0,-360)}).call((function(){t.node.setRotationFromEuler(0,0,0)})).union().repeatForever().start()},o.onDisable=function(){c.stopAllByTarget(this.node)},n}(s))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/FLGloable.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./FLStore.ts","./EBossSkill.ts"],(function(l){"use strict";var e,n,o,u,t,r;return{setters:[function(l){e=l.createClass,n=l.defineProperty},function(l){o=l.cclegacy,u=l.color},function(l){t=l.FLStore},function(l){r=l.EBossSkill}],execute:function(){o._RF.push({},"92e4cRBjqlJ76piC+JF5hQQ","FLGloable",void 0);var a=l("FLGloable",function(){function l(){}return e(l,null,[{key:"level",get:function(){return null===l._level&&(l._level=t.get("_newLevel",1)),l._level},set:function(e){e>100||(e=Math.round(e),l._level=e,t.set("_newLevel",e))}}]),l}());n(a,"curGameState",null),n(a,"isWin",!1),n(a,"scene3D",null),n(a,"camera3D",null),n(a,"cameraCom",null),n(a,"effectRoot",null),n(a,"curMonster",null),n(a,"curGround",null),n(a,"mapRoot",null),n(a,"groundRoot",null),n(a,"ballRoot",null),n(a,"lineRoot",null),n(a,"autoDestroyRoot",null),n(a,"curStageNumDoor",[]),n(a,"numDoorZ",[]),n(a,"ballCloneMaterial",null),n(a,"uiParent",null),n(a,"bloodPrefab",[]),n(a,"player",null),n(a,"playerScript",null),n(a,"ballCount",20),n(a,"showBallCount",10),n(a,"ballInterval",.15),n(a,"initBallColor",u(12,34,197.255)),n(a,"initPlayerHp",20),n(a,"boss",null),n(a,"curBossSkill",r.SKILL_FIRE),n(a,"isAutoControll",!1),n(a,"ballPrefab",null),n(a,"bossBallPrefab",null),n(a,"bossDeadLine",null),n(a,"playerDeadLine",null),n(a,"playerIsInit",!1),n(a,"radians",null),n(a,"angle",null),n(a,"speedGrade",1),n(a,"gameIsStop",!1),n(a,"hasAddFLnative",!1),n(a,"maxLevel",10),n(a,"_level",null),o._RF.pop()}}}));

System.register("chunks:///_virtual/GameMgr.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GameEvents.ts","./Behavior3D.ts"],(function(e){"use strict";var t,o,n,r,c,s,i,u;return{setters:[function(e){t=e.defineProperty,o=e.inheritsLoose,n=e.createClass},function(e){r=e.cclegacy,c=e._decorator,s=e.systemEvent},function(e){i=e.GameEvents},function(e){u=e.Behavior3D}],execute:function(){var a,l,m;r._RF.push({},"95bdc1AWlFJdZ+RBA+39mOd","GameMgr",void 0);var g=c.ccclass;c.property,e("GameMgr",g((m=l=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t.addCombo=function(e){t.combo++,t.emit(i.E_Combo,t.combo)},t.emit=function(e,t){s.emit(e,t)},n(t,null,[{key:"recoverPosY",get:function(){return t.Edge.DOWN-20}}]),t}(u),t(l,"gameBallCount",0),t(l,"combo",0),t(l,"Tags",{edgeLeft:1,edgeUp:2,edgeRight:3,edgeDown:4,monster:1001,ball:1002,skillbox:1003}),t(l,"Edge",{UP:500,DOWN:-500,LEFT:-300,RIGHT:300}),t(l,"recoverPos",null),a=m))||a);r._RF.pop()}}}));

System.register("chunks:///_virtual/LevelToolBoss.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,o,s,r,i,n,a,p,l,c,u,y,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,s=e.defineProperty,r=e.assertThisInitialized,i=e.initializerDefineProperty,n=e.createClass},function(e){a=e.cclegacy,p=e._decorator,l=e.Enum,c=e.CCInteger,u=e.v3,y=e.instantiate,d=e.director,h=e.Component}],execute:function(){var m,b,f,v,g,T;a._RF.push({},"95d4e59uMBN3KjIOCg8OQgv","LevelToolBoss",void 0);var B=p.ccclass,_=p.property;e("LevelToolBoss",(m=B("LevelToolBoss"),b=_({type:l({"怪物1":1001,"怪物2":1002}),displayName:"增加boss"}),f=_({type:c,displayName:"血量"}),m((t((g=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return t=e.call.apply(e,[this].concat(n))||this,s(r(t),"_bossType",1001),i(r(t),"bloodNum",T,r(t)),t}o(t,e);var a=t.prototype;return a.addBoss=function(){for(;this.node.children[0];)this.node.children[0].destroy();this.instantiateNd("boss_"+this._bossType).position=u()},a.instantiateNd=function(e,t){this.mapItem.getChildByName(e)||(console.warn("错误 在mapItem中找不到 "+e),console.error("error"));var o=y(this.mapItem.getChildByName(e));return o.parent=t||this.node,o},n(t,[{key:"bossType",get:function(){return this._bossType},set:function(e){this._bossType!=e&&(this._bossType=e,this.addBoss())}},{key:"mapItem",get:function(){var e;return null===(e=d.getScene())||void 0===e?void 0:e.getChildByName("mapItem")}}]),t}(h)).prototype,"bossType",[b],Object.getOwnPropertyDescriptor(g.prototype,"bossType"),g.prototype),T=t(g.prototype,"bloodNum",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),v=g))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/LevelBlockVo.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,c;return{setters:[function(e){t=e.defineProperty},function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"96f596kGy5CyKwOXWP6bB+P","LevelBlockVo",void 0);e("default",(function(){t(this,"level",1),t(this,"isLinkUpScene",0),t(this,"unlocks",{})}));c._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageKeyEnum.ts",["cc"],(function(n){"use strict";var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){var u;n("LanguageKeyEnum",void 0),e._RF.push({},"9b037mMP6lAnZrdHhgzS8KD","LanguageKeyEnum",void 0),function(n){n.FIRST_NOENOUGH="first_Noenough",n.BARRACKS_MAX="Barracksmax",n.COMMANDER_MAX="Commandermax",n.UNLOCK_THE_INFANTRY="unlockTheInfantry",n.NO_ATTACK="noAttack",n.UNLOCK_TITLE="unlock_title",n.UNLOCK_SOLDIER1="unlock_soldier1",n.UNLOCK_SOLDIER2="unlock_soldier2",n.UNLOCK_SOLDIER3="unlock_soldier3",n.UNLOCK_SOLDIER4="unlock_soldier4",n.UNLOCK_SOLDIER5="unlock_soldier5"}(u||(u=n("LanguageKeyEnum",{}))),e._RF.pop()}}}));

System.register("chunks:///_virtual/TbShopItemVo.ts",["cc"],(function(){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"9e514pkUO9I7anSlqD6ZEON","TbShopItemVo",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/EEffectName.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var c;e("EEffectName",void 0),t._RF.push({},"a7f76UAoNJOEb/3fVQ8Z4MS","EEffectName",void 0),function(e){e.FIRE="fire",e.BOOM="boom",e.FIRE_HIT="fire-hit",e.PLAYER_WATER="player-water",e.ENEMY_WATER="enemy-water"}(c||(c=e("EEffectName",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/Wall.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./EffectManager.ts","./GameEvents.ts","./EEffectName.ts","./FLGloable.ts","./GameEvenEnum.ts"],(function(t){"use strict";var e,i,l,n,s,o,a,h,r,c,p,d,u,f,y,E,v;return{setters:[function(t){e=t.inheritsLoose,i=t.defineProperty,l=t.assertThisInitialized},function(t){n=t.cclegacy,s=t._decorator,o=t.KeyCode,a=t.systemEvent,h=t.SystemEvent,r=t.v3,c=t.Tween,p=t.tween,d=t.Component},function(t){u=t.EffectManager},function(t){f=t.GameEvents},function(t){y=t.EEffectName},function(t){E=t.FLGloable},function(t){v=t.GameEvenEnum}],execute:function(){var m;n._RF.push({},"ac377xQ/p1O3Yvg5Nt/S95f","Wall",void 0);var B=s.ccclass;s.property,t("Wall",B("Wall")(m=function(t){function n(){for(var e,n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return e=t.call.apply(t,[this].concat(s))||this,i(l(e),"wallChild",null),i(l(e),"hitInterval",0),i(l(e),"pushSpeed",0),i(l(e),"quickTime",0),i(l(e),"playerHitBall",0),i(l(e),"enemyHitBall",0),i(l(e),"differBall",0),i(l(e),"ballInterval",0),e}e(n,t);var s=n.prototype;return s.start=function(){this.wallChild=this.node.getChildByName("wall")},s.onKeyDown=function(t){switch(t.keyCode){case o.ARROW_UP:this.pushSpeed>0&&(this.pushSpeed=0),this.pushSpeed-=.01;break;case o.ARROW_DOWN:this.pushSpeed<0&&(this.pushSpeed=0),this.pushSpeed+=.01;break;case o.KEY_S:this.pushSpeed+=.01;break;case o.KEY_W:this.pushSpeed-=.01}},s.onEnable=function(){a.on(h.EventType.KEY_DOWN,this.onKeyDown,this),this.node.on(f.E_WallHit,this.onGetHit,this)},s.onDisable=function(){},s.update=function(t){this.hitInterval>0&&(this.hitInterval-=t),this.ballInterval>0&&(this.ballInterval-=t),E.isAutoControll&&this.checkDifferBall(),E.curGameState!==v.GAME_ENDED&&(this.checkKillEnemy(),this.checkKillPlayer(),this.node.setPosition(this.node.position.clone().add3f(0,0,this.pushSpeed)))},s.onGetHit=function(t,e){t.z>this.node.worldPosition.z?(this.playerHitBall+=1,u.instance.playParticleByNode(y.PLAYER_WATER+"00"+e,this.node,!0,r(t.x,.5,0))):t.z<this.node.worldPosition.z&&(this.enemyHitBall+=1,u.instance.playParticleByNode(y.ENEMY_WATER,this.node,!0,r(t.x,.5,-1))),this.hitInterval>0||(this.hitInterval=.2,c.stopAllByTarget(this.wallChild),p(this.wallChild).to(.05,{position:r(-.07,.05,0)}).to(.05,{position:r(-.03,-.05,0)}).to(.05,{position:r(.03,.05,0)}).to(.05,{position:r(.07,-.05,0)}).to(.05,{position:r(-.07,.05,0)}).to(.05,{position:r(.03,-.05,0)}).to(.05,{position:r(0,0,0)}).start())},s.checkDifferBall=function(){this.ballInterval<=0&&(this.ballInterval=E.ballInterval,this.differBall=this.playerHitBall-this.enemyHitBall,this.playerHitBall=0,this.enemyHitBall=0,console.log(this.differBall),this.differBall>0?this.pushSpeed=Math.max(-.03,-this.differBall/1e3):this.pushSpeed=Math.min(.03,-this.differBall/1e3))},s.checkKillPlayer=function(){this.node.worldPosition.z>E.playerDeadLine.worldPosition.z&&E.playerScript.onGameOver(!1)},s.checkKillEnemy=function(){this.node.worldPosition.z<E.bossDeadLine.worldPosition.z&&a.emit(v.KILL_BOSS)},n}(d))||m);n._RF.pop()}}}));

System.register("chunks:///_virtual/TableNameEnum.ts",["cc"],(function(e){"use strict";var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var a;e("TableNameEnum",void 0),t._RF.push({},"adf781xdcRFkIvpsYsj+6+S","TableNameEnum",void 0),function(e){e.TbCommodity="TbCommodity",e.LANGUAGE="TbLanguage",e.TbShopItem="TbShop"}(a||(a=e("TableNameEnum",{}))),t._RF.pop()}}}));

System.register("chunks:///_virtual/TbConfig.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts","./LocalConfig.ts","./TableNameEnum.ts"],(function(n){"use strict";var t,o,e,i,a,r,f,s,u;return{setters:[function(n){t=n.defineProperty,o=n.inheritsLoose,e=n.assertThisInitialized,i=n.createClass},function(n){a=n.cclegacy,r=n._decorator},function(n){f=n.default},function(n){s=n.LocalConfig},function(n){u=n.TableNameEnum}],execute:function(){var c,g,l;a._RF.push({},"b413dVrm5RFDqK3Y/SZAfmr","TbConfig",void 0);var I=r.ccclass;r.property,n("TbConfig",I("TbConfig")((l=g=function(n){function a(){for(var o,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return o=n.call.apply(n,[this].concat(a))||this,t(e(o),"_commodityInfo",null),t(e(o),"_shopItemInfo",null),t(e(o),"_languageInfo",null),t(e(o),"pattern",/\{(.*?)\}/g),o}o(a,n);var r=a.prototype;return r.getCommodityInfoByID=function(n){return this.commodityInfo[n]||console.log("表格============获取商品信息表信息错误",n),this.commodityInfo[n]},r.getShopItemInfoInfoByID=function(n){return this.shopItemInfo[n]||console.log("表格============获取商品信息表信息错误",n),this.shopItemInfo[n]},r.getLanguageInInfoByID=function(n){var t=this.languageInfo[n];if(t)return t;console.log("表格============获取语言表失败",n)},r.getLanguageValueByID=function(n){return this.getLanguageInInfoByID(n)?this.getLanguageInInfoByID(n).zh:""},r.formatContent=function(n,t){if(t&&t.length>0){var o=n.match(this.pattern);o.length!=t.length&&console.error("填充的参数个数不匹配："+n);for(var e=0;e<o.length;e+=1)o[e],n=n.replace(o[e],t[e])}return n},r.getItemValue=function(n){return 1},i(a,[{key:"commodityInfo",get:function(){return this._commodityInfo||(this._commodityInfo=s.instance.getTable(u.TbCommodity)),this._commodityInfo}},{key:"shopItemInfo",get:function(){return this._shopItemInfo||(this._shopItemInfo=s.instance.getTable(u.TbShopItem)),this._shopItemInfo}},{key:"languageInfo",get:function(){return this._languageInfo||(this._languageInfo=s.instance.getTable(u.LANGUAGE)),this._languageInfo}}]),a}(f),t(g,"maxPetLv",20),c=l))||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/MapManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GamePrefabs.ts","./LocalConfig.ts","./Vec3Util.ts","./PoolManager.ts","./UIManager.ts","./GamePageEnum.ts","./FLGloable.ts","./GameEvenEnum.ts","./Behavior3D.ts","./MonsterBase.ts","./MapPrefabEnum.ts","./GameState.ts","./MainPlayer.ts","./NumberWall.ts"],(function(e){"use strict";var t,o,n,a,r,l,i,s,c,u,p,d,g,m,h,f,y,C,b,P,v,N,B,M,R,w,D,E,G,_,S;return{setters:[function(e){t=e.defineProperty,o=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){l=e.cclegacy,i=e._decorator,s=e.Material,c=e.Prefab,u=e.sys,p=e.SystemEvent,d=e.KeyCode,g=e.Camera,m=e.find,h=e.Node,f=e.BoxCollider,y=e.CapsuleCollider},function(e){C=e.GamePrefabs},function(e){b=e.LocalConfig},function(e){P=e.Vec3Util},function(e){v=e.PoolManager},function(e){N=e.uiManager},function(e){B=e.GamePageEnum},function(e){M=e.FLGloable},function(e){R=e.GameEvenEnum},function(e){w=e.Behavior3D},function(e){D=e.MonsterBase},function(e){E=e.MapPrefabEnum},function(e){G=e.EColliderGroup},function(e){_=e.MainPlayer},function(e){S=e.NumberWall}],execute:function(){var L,A,I,T,W,k,x,z,F;l._RF.push({},"c1219BAvEZKqbpsijwHeUDD","MapManager",void 0);var U=i.ccclass,V=i.property;e("MapManager",(L=U("MapManager"),A=V({type:s,displayName:"克隆材质球"}),I=V({type:c,displayName:"墙预制体"}),L((F=z=function(e){function o(){for(var o,n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return o=e.call.apply(e,[this].concat(l))||this,a(r(o),"ballCloneMaterial",k,r(o)),a(r(o),"pushWall",x,r(o)),t(r(o),"curUnlockData",null),o}n(o,e);var l=o.prototype;return l.onLoad=function(){if(o.instance=this,this.initEvent(),this.initStart(),console.log("当前设备环境浏览器",u.isBrowser),u.isBrowser){var e=window.location.search.substring(1);if(e){for(var t={},n=e.split("&"),a=0;a<n.length;a++)if(!(n[a].indexOf("=")<=-1)){var r=n[a].split("=");t[r[0]]=r[1]}t.debug&&"true"==t.debug&&N.instance.showDialog(B.PAGE_DEBUG)}}M.curGameState=R.GAME_READY,N.instance.showDialog(B.PAGE_GAME)},l.initEvent=function(){this.registerEvent(R.NEXT_LEVEL,this.onNextLevel,this),this.registerEvent(R.CHANGE_BOSS,this.onChangeBoss,this),this.registerEvent(R.CHANGE_FLOOR,this.onChangeFloor,this),this.registerEvent(p.EventType.KEY_DOWN,(function(e){switch(e.keyCode){case d.KEY_W:case d.DIGIT_1:}}),this)},l.initStart=function(){M.scene3D=this.node.parent,M.camera3D=M.scene3D.getChildByName("Main Camera"),M.cameraCom=M.camera3D.getComponent(g),M.player=M.scene3D.getChildByName("player"),M.effectRoot=m("effectManager"),M.mapRoot=new h("mapRoot"),M.mapRoot.parent=this.node,M.groundRoot=new h("groundRoot"),M.groundRoot.parent=this.node,M.ballRoot=new h("ballRoot"),M.ballRoot.parent=this.node,M.lineRoot=new h("lineRoot"),M.lineRoot.parent=this.node,M.uiParent=m("Canvas").getChildByName("normal"),M.ballCloneMaterial=this.ballCloneMaterial,this.initLevel()},l.initLevel=function(){this.onClear(),this.initMap()},l.onClear=function(){console.log("clear scene !!!"),M.isWin=!1,M.gameIsStop=!1,M.ballRoot.destroyAllChildren(),M.groundRoot.destroyAllChildren(),M.mapRoot.destroyAllChildren(),M.lineRoot.destroyAllChildren()},l.initMap=function(){var e=M.level;e>M.maxLevel&&(e=M.maxLevel),M.curStageNumDoor=[],M.numDoorZ=[];var t=b.instance.getTable("map"+e);for(var o in t){var n=t[o],a=n.name,r=n.pos,l=n.other,i=void 0;switch(a){case E.map_player:P.setNdPosRotScaleByDate(M.player,r,!0),M.showBallCount=Number(l.split("|")[0]),M.initBallColor=P.stringToColor(l.split("|")[1]),M.ballPrefab=C.getInstance().res.ball_10001;break;case E.map_number_wall:i=v.getInstance().getPrefabNodeByPool(a,M.groundRoot);var s=P.stringToVec3(r.split("|")[0]),c=P.stringToVec3(r.split("|")[1]),u=P.stringToVec3(r.split("|")[2]);i.worldPosition=s,i.eulerAngles=c;var p=l.split("|"),d=P.stringToColor(p[0]),g=p[1],m=p.length>2?P.stringToColor(p[2]):null,N=p.length>2?Number(p[3]):null,B=i.getComponent(S);B||(B=i.addComponent(S)),B.init(u,d,g,m,N),M.curStageNumDoor.push(B),M.numDoorZ.push(i.worldPosition.z);break;case E.map_boss:var R=Number(l.split("|")[0]),w=Number(l.split("|")[1]);i=v.getInstance().getPrefabNodeByPool("boss_"+R,M.groundRoot),P.setNdPosRotScaleByDate(i,r,!0),i.getComponent(y).setGroup(G.monster);var _=i.getComponent(D);_||(_=i.addComponent(D)),new h("lineRoot").setParent(i),_.init(w),M.curMonster=i,M.bossBallPrefab=C.getInstance().res.ball_10003;break;case E.map_ground:if(i=v.getInstance().getPrefabNodeByPool(a,M.groundRoot),P.setNdPosRotScaleByDate(i,r,!0),M.curGround=i,i.getChildByName("Plane").getComponent(f).setGroup(G.plane),i.getChildByName("leftPlane").getComponent(f).setGroup(G.wall),i.getChildByName("rightPlane").getComponent(f).setGroup(G.wall),i.getChildByName("upSide").getComponent(f).setGroup(G.wall),i.getChildByName("downSide").getComponent(f).setGroup(G.wall),l){var L=l.split("&");P.setNdPosRotScaleByDate(i.getChildByName("player_dead"),L[0],!0),P.setNdPosRotScaleByDate(i.getChildByName("enemy_dead"),L[1],!0)}M.bossDeadLine=i.getChildByName("enemy_dead"),M.playerDeadLine=i.getChildByName("player_dead");break;case E.map_wall:i=v.getInstance().getPrefabNodeByPool(a,M.groundRoot),P.setNdPosRotScaleByDate(i,r,!0),i.getComponent(f).setGroup(G.wall)}}var A=v.getInstance().getNode(this.pushWall,M.groundRoot);A.setWorldPosition(0,0,(M.curMonster.worldPosition.z+M.player.worldPosition.z)/2),A.getComponent(f).setGroup(G.push_wall),this.initPlayer()},l.initPlayer=function(){M.player.active=!0,M.playerScript||(M.playerScript=M.player.addComponent(_)),M.playerScript.init()},l.onNextLevel=function(){this.initLevel()},l.onChangeBoss=function(e){var t=M.curMonster.getComponent(D).bossHealth,o=v.getInstance().getPrefabNodeByPool("boss_"+e,M.groundRoot);o.worldPosition=M.curMonster.worldPosition,o.rotation=M.curMonster.rotation,o.scale=M.curMonster.scale,o.getComponent(y).setGroup(G.monster);var n=o.getComponent(D);n||(n=o.addComponent(D)),n.init(t),M.curMonster.destroy(),M.curMonster=null,M.curMonster=o},l.onChangeFloor=function(e){var t=M.curGround.getChildByName("Plane");t.removeAllChildren(),v.getInstance().getPrefabNodeByPool("floor00"+e,t)},l.removeMapRoot=function(e){for(;e.children.length>0;)v.getInstance().putNode(e.children[0])},o}(w),t(z,"instance",void 0),k=o((W=F).prototype,"ballCloneMaterial",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=o(W.prototype,"pushWall",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=W))||T));l._RF.pop()}}}));

System.register("chunks:///_virtual/BallNum.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIEvenEnum.ts","./FLGloable.ts","./GameState.ts"],(function(t){"use strict";var e,i,n,l,r,a,o,s,u,c,p,h,y,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,l=t.assertThisInitialized,r=t.defineProperty},function(t){a=t.cclegacy,o=t._decorator,s=t.Label,u=t.CCInteger,c=t.systemEvent,p=t.Component},function(t){h=t.UIEvenEnum},function(t){y=t.FLGloable},function(t){f=t.EState}],execute:function(){var b,v,g,m,d,P,A;a._RF.push({},"c39afdHAgpCG4bSIhz+kG5o","BallNum",void 0);var C=o.ccclass,E=o.property;t("BallNum",(b=C("BallNum"),v=E({type:s,tooltip:"球数字体"}),g=E({type:u,tooltip:"高度"}),b((P=e((d=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,n(l(e),"ballText",P,l(e)),n(l(e),"high",A,l(e)),r(l(e),"playerActive",!0),r(l(e),"ballNum",0),e}i(e,t);var a=e.prototype;return a.onLoad=function(){var t=this;c.on(h.UPDATE_PLAYER_BALL,this.onChangePlayerball,this),this.scheduleOnce((function(){t.onChangePlayerball(y.showBallCount)}),.2)},a.onChangePlayerball=function(t){this.playerActive=!0,this.ballText.string="X"+t,this.ballNum=t},a.update=function(t){if(this.playerActive){if(y.playerScript.curState===f.DIED)return this.playerActive=!1,void(this.ballText.string="");if(y.player){var e=y.cameraCom.convertToUINode(y.player.worldPosition,this.node.parent);this.node.setPosition(e.x,e.y+this.high)}else this.ballText.string=""}},e}(p)).prototype,"ballText",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(d.prototype,"high",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=d))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/joystick.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIEvenEnum.ts","./FLGloable.ts","./GameEvenEnum.ts","./Behavior3D.ts"],(function(t){"use strict";var e,i,n,o,s,a,r,h,c,l,u,d,v,_,E,p,g,f;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,s=t.defineProperty,a=t.createClass},function(t){r=t.cclegacy,h=t._decorator,c=t.Enum,l=t.view,u=t.Node,d=t.Vec3,v=t.systemEvent,_=t.UITransformComponent},function(t){E=t.UIEvenEnum},function(t){p=t.FLGloable},function(t){g=t.GameEvenEnum},function(t){f=t.Behavior3D}],execute:function(){var T,y,m,S,A,C,b,D,R,O,P,L,M,U,G,w,F;r._RF.push({},"cb632XAFCxCrZeVvBnfx844","joystick",void 0);var N=h.ccclass,I=h.property,H=c({DEFAULT:0,FOLLOW:1,FOLLOW_ALWAYS:2,FOLLOW_DOT:3}),z=c({FOUR:4,EIGHT:8,ALL:0}),k=l.getVisibleSize().height;t("Joystick",(T=N("Joystick"),y=I({type:u,displayName:"摇杆背景节点"}),m=I({type:u,displayName:"摇杆节点"}),S=I({type:H,displayName:"触摸类型"}),A=I({type:z,displayName:"方向类型"}),C=I({displayName:"启动半透明"}),b=I({displayName:"点击跟随"}),D=I({displayName:"内圈大小"}),T((P=e((O=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,n(o(e),"ndRing",P,o(e)),n(o(e),"ndDot",L,o(e)),n(o(e),"touchType",M,o(e)),n(o(e),"directionType",U,o(e)),n(o(e),"isEnableTransparent",G,o(e)),n(o(e),"isFollowStart",w,o(e)),n(o(e),"innerSize",F,o(e)),s(o(e),"onClickCb",null),s(o(e),"onEndCb",null),s(o(e),"clearFECb",null),s(o(e),"onBeginFECb",null),s(o(e),"onSuccessFECb",null),s(o(e),"isMoving",!1),s(o(e),"_angle",0),s(o(e),"_stickPos",new d),s(o(e),"_oriRingPos",null),s(o(e),"_touchStartLocation",new d),s(o(e),"_touchMoveLocation",new d),s(o(e),"_distanceRate",0),s(o(e),"_oriDotPos",new d),s(o(e),"_movePos",new d),e}i(e,t);var r=e.prototype;return r.eventShow=function(){this.isMoving=!1,this.ndDot.setPosition(this._oriDotPos),this.ndRing.active=!1,p.radians=p.angle=null,this.node.off(u.EventType.TOUCH_START,this._touchStartEvent,this),this.node.off(u.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.off(u.EventType.TOUCH_END,this._touchEndEvent,this),this.node.off(u.EventType.TOUCH_CANCEL,this._touchEndEvent,this),v.off(E.GAME_PAGE_VIDEO_BACK,this.eventShow,this),this.onEnabled()},r.onEnabled=function(){v.on(E.GAME_PAGE_VIDEO_BACK,this.eventShow,this),this.node.on(u.EventType.TOUCH_START,this._touchStartEvent,this),this.node.on(u.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(u.EventType.TOUCH_END,this._touchEndEvent,this),this.node.on(u.EventType.TOUCH_CANCEL,this._touchEndEvent,this)},r.onDisabled=function(){this.node.off(u.EventType.TOUCH_START,this._touchStartEvent,this),this.node.off(u.EventType.TOUCH_MOVE,this._touchMoveEvent,this),this.node.off(u.EventType.TOUCH_END,this._touchEndEvent,this),this.node.off(u.EventType.TOUCH_CANCEL,this._touchEndEvent,this),v.off(E.GAME_PAGE_VIDEO_BACK,this.eventShow,this),this.isMoving=!1,this.ndDot.setPosition(this._oriDotPos),this._oriRingPos&&this.ndRing.setPosition(this._oriRingPos)},r._touchStartEvent=function(t){var e;if(!p.gameIsStop){p.curGameState==g.GAME_READY&&(p.curGameState=g.GAME_STARTED,v.emit(g.GAME_STARTED)),v.emit(E.UI_TOUCH_START);var i=t.getUILocation();this._touchStartLocation.set(i.x,i.y,0);var n=null===(e=this.node.getComponent(_))||void 0===e?void 0:e.convertToNodeSpaceAR(this._touchStartLocation);if(this._oriRingPos||(this._oriRingPos=this.ndRing.getPosition().clone()),this._stickPos.set(n),!this.isFollowStart){var o,s;this.ndRing.active=!0;var a=(n=null===(o=this.ndRing.getComponent(_))||void 0===o?void 0:o.convertToNodeSpaceAR(this._touchStartLocation)).length();return(null===(s=this.ndRing.getComponent(_))||void 0===s?void 0:s.contentSize.width)/2>a&&(this.ndDot.setPosition(n),this._updateAngle(n),!0)}this.touchType===H.FOLLOW&&(n.y=n.y>=-k/6?-k/6:n.y),this.ndRing.active=!0,this.ndRing.setPosition(n)}},r._touchMoveEvent=function(t){var e,i;if(!p.gameIsStop&&p.curGameState==g.GAME_STARTED){var n=t.getUILocation();this._touchMoveLocation.set(n.x,n.y,0);var o=null===(e=this.ndRing.getComponent(_))||void 0===e?void 0:e.convertToNodeSpaceAR(this._touchMoveLocation),s=o.length();s>this.innerSize&&(this.isMoving=!0);var a=(null===(i=this.ndRing.getComponent(_))||void 0===i?void 0:i.contentSize.width)/2;if(p.speedGrade=0,a>s)p.speedGrade=Number((s/a).toFixed(3)),this.ndDot.setPosition(o);else if(this.touchType!==H.FOLLOW_DOT){p.speedGrade=1;var r=Math.atan2(o.y,o.x),h=Math.cos(r)*a,c=Math.sin(r)*a;this._movePos.set(h,c,0),this.ndDot.setPosition(this._movePos)}else this.ndDot.setPosition(o);this._updateAngle(o),this._distanceRate=p.speedGrade}},r._touchEndEvent=function(t){p.gameIsStop||p.curGameState==g.GAME_STARTED&&(v.emit(E.UI_TOUCH_END),this.isMoving=!1,this.ndDot.setPosition(this._oriDotPos),this.ndRing.active=!1,p.radians=p.angle=null)},r._updateAngle=function(t){var e=this._angle;if(this._angle=180*Math.atan2(t.y,t.x)/Math.PI,!(Math.abs(e-this.angle)<.1))return p.angle=this._angle,p.radians=Math.PI/180*p.angle,v.emit(E.UI_TOUCH_MOVE),this._angle},r.reset=function(){this.isMoving=!1,this.ndDot.setPosition(this._oriDotPos)},a(e,[{key:"distanceRate",get:function(){return this._distanceRate}},{key:"angle",get:function(){return this._angle},set:function(t){this._angle=t}}]),e}(f)).prototype,"ndRing",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(O.prototype,"ndDot",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(O.prototype,"touchType",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return H.DEFAULT}}),U=e(O.prototype,"directionType",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.ALL}}),G=e(O.prototype,"isEnableTransparent",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=e(O.prototype,"isFollowStart",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=e(O.prototype,"innerSize",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),R=O))||R));r._RF.pop()}}}));

System.register("chunks:///_virtual/TableModel.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Singleton.ts","./GamePrefabs.ts","./LanguageVo.ts"],(function(t){"use strict";var e,n,i,o,r,s,a,c;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass,i=t.defineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy},function(t){s=t.default},function(t){a=t.GamePrefabs},function(t){c=t.LanguageVo}],execute:function(){r._RF.push({},"cc5aaSo0t5CMZVMblnShGHc","TableModel",void 0);t("GlobalTable",function(t){function r(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,i(o(e),"_tipVos",void 0),e}return e(r,t),r.prototype.getZhuanshengLv=function(t){return this.tipVos[t]},r.tableToObject=function(t,e,n,i){void 0===n&&(n="id"),void 0===i&&(i="_");var o={},r=a.getInstance().tableObjects[t],s=n.split(i);for(var c in r){var l=new e;if(l.readFromByte(r[c]),s.length>1){for(var u="",f=0;f<s.length;f++)f>=s.length-1?u+=l[s[f]]:u+=l[s[f]]+i;o[u]=l}else o[l[c]]=l}return o},n(r,[{key:"tipVos",get:function(){return this._tipVos||(this._tipVos=r.tableToObject("tip_1",c,"id")),this._tipVos}}]),r}(s));r._RF.pop()}}}));

System.register("chunks:///_virtual/DebugPanel.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./GamePrefabs.ts","./PoolManager.ts","./UIManager.ts","./GamePageEnum.ts","./UIEvenEnum.ts","./FLGloable.ts","./GameEvenEnum.ts","./MapManager.ts"],(function(t){"use strict";var n,e,o,i,l,r,a,u,s,c,g,p,b,d,m,h,f,E,y,B,C,N,v;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,l=t.defineProperty},function(t){r=t.cclegacy,a=t._decorator,u=t.Node,s=t.Label,c=t.Prefab,g=t.EditBox,p=t.systemEvent,b=t.EventHandler,d=t.Button,m=t.Component},function(t){h=t.GamePrefabs},function(t){f=t.PoolManager},function(t){E=t.uiManager},function(t){y=t.GamePageEnum},function(t){B=t.UIEvenEnum},function(t){C=t.FLGloable},function(t){N=t.GameEvenEnum},function(t){v=t.MapManager}],execute:function(){var D,P,I,w,A,S,z,_,L,G,x,O,H,M,R,F,k,T,U,W,Y,j,J,X,q,K,Q,V,Z,$,tt,nt,et,ot,it,lt,rt;r._RF.push({},"cd537XhEvpBiLocfJ0s9uai","DebugPanel",void 0);var at=a.ccclass,ut=a.property;t("DebugPanel",(D=at("DebugPanel"),P=ut({type:u,tooltip:"普通调试按钮"}),I=ut({type:u,tooltip:"关卡调试按钮"}),w=ut({type:s,tooltip:"切换面板按钮文字"}),A=ut({type:c,tooltip:"切换数字门调试预制体"}),S=ut({type:u,tooltip:"切换数字门节点"}),z=ut({type:g,tooltip:"帽子输入框"}),_=ut({type:g,tooltip:"衣服输入框"}),L=ut({type:g,tooltip:"武器输入框"}),G=ut({type:g,tooltip:"BOSS输入框"}),x=ut({type:g,tooltip:"Floor输入框"}),O=ut({type:g,tooltip:"关卡输入框"}),H=ut({type:g,tooltip:"BOSS血量输入框"}),M=ut({type:g,tooltip:"BOSS技能输入框"}),R=ut({type:g,tooltip:"玩家血量输入框"}),F=ut({type:g,tooltip:"球体颜色输入框"}),k=ut({type:g,tooltip:"球体数量输入框"}),T=ut({type:g,tooltip:"球体间隔输入框"}),D((Y=n((W=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return n=t.call.apply(t,[this].concat(r))||this,o(i(n),"normalButton",Y,i(n)),o(i(n),"stageButton",j,i(n)),o(i(n),"changeButtonText",J,i(n)),o(i(n),"numberDoorChange",X,i(n)),o(i(n),"numberDoorParent",q,i(n)),o(i(n),"capEdit",K,i(n)),o(i(n),"bodyEdit",Q,i(n)),o(i(n),"weaponEdit",V,i(n)),o(i(n),"bossEdit",Z,i(n)),o(i(n),"floorEdit",$,i(n)),o(i(n),"stageEdit",tt,i(n)),o(i(n),"bossBloodEdit",nt,i(n)),o(i(n),"bossSkillEdit",et,i(n)),o(i(n),"playerBloodEdit",ot,i(n)),o(i(n),"ballColorEdit",it,i(n)),o(i(n),"ballNumEdit",lt,i(n)),o(i(n),"ballIntervalEdit",rt,i(n)),l(i(n),"isNormal",!1),l(i(n),"lang",["zh","en"]),l(i(n),"langIndex",0),n}e(n,t);var r=n.prototype;return r.onLoad=function(){this.onChangePanel()},r.onEnable=function(){console.log("打开调试")},r.show=function(){},r.onBtnClose=function(){E.instance.hideDialog(y.PAGE_DEBUG)},r.onChangePanel=function(){this.isNormal?(this.normalButton.active=!1,this.stageButton.active=!0,this.numberDoorParent.destroyAllChildren(),this.initCurStageNumDoor(),this.changeButtonText.string="切换正常调试",this.isNormal=!1):this.isNormal||(this.normalButton.active=!0,this.stageButton.active=!1,this.changeButtonText.string="切换数字门调试",this.isNormal=!0)},r.changeCap=function(){p.emit(N.CHANGE_CAP,parseInt(this.capEdit.string))},r.changeBody=function(){p.emit(N.CHANGE_BODY,parseInt(this.bodyEdit.string))},r.changeWeapon=function(){p.emit(N.CHANGE_WEAPON,parseInt(this.weaponEdit.string))},r.changeBoss=function(){p.emit(N.CHANGE_BOSS,parseInt(this.bossEdit.string))},r.changeFloor=function(){p.emit(N.CHANGE_FLOOR,parseInt(this.floorEdit.string))},r.changeStage=function(){C.level=parseInt(this.stageEdit.string),v.instance.onNextLevel()},r.changeBossBlood=function(){p.emit(N.CHANGE_BOSS_BLOOD,parseInt(this.bossBloodEdit.string))},r.changeBossSkill=function(){C.curBossSkill=parseInt(this.bossSkillEdit.string),v.instance.onNextLevel()},r.changePlayerBlood=function(){p.emit(N.CHANGE_PLAYER_HP,parseInt(this.playerBloodEdit.string))},r.changeBallColor=function(){C.ballPrefab=h.getInstance().res["ball_1000"+parseInt(this.ballColorEdit.string)]},r.changeBallNum=function(){C.ballCount=parseInt(this.ballNumEdit.string),p.emit(B.UPDATE_PLAYER_BALL,C.ballCount)},r.changeBalInterval=function(){C.ballInterval=parseFloat(this.ballIntervalEdit.string)},r.initStage=function(){v.instance.onNextLevel(),p.emit(N.GAME_RESET)},r.isAuto=function(){console.log(C.isAutoControll),C.isAutoControll?C.isAutoControll=!1:C.isAutoControll=!0},r.onBtnOpenDebug=function(){this.node.getChildByName("debugRoot").active=!this.node.getChildByName("debugRoot").active},r.initCurStageNumDoor=function(){for(var t=0;t<C.curStageNumDoor.length;t++){var n=f.getInstance().getNode(this.numberDoorChange,this.numberDoorParent),e=C.curStageNumDoor[t].getNumberWallDate();n.getChildByName("name").getComponent(s).string="数字门"+t,n.getChildByName("number").getComponent(g).placeholder="当前为{"+e[0]+"}";var o=new b;o.target=this.node,o.component="DebugPanel",o.handler="onChangeNumDoor",o.customEventData=""+t,n.getChildByName("Button").getComponent(d).clickEvents.push(o)}},r.onChangeNumDoor=function(t,n){var e=parseInt(n),o=this.numberDoorParent.children[e].getChildByName("number").getComponent(g).string;o&&C.curStageNumDoor[e].resetNumberWall(o)},r.onBtnAddCoin=function(){},r.onBtnAddCoin2=function(){},r.onBtnLang=function(){var t=this.node.getChildByName("debugRoot").getChildByName("btnLang").getChildByName("lbLang").getComponent(s),n=this.lang[this.langIndex%this.lang.length];t.string="语言-"+n+";",window._languageData.init(n),this.langIndex+=1},n}(m)).prototype,"normalButton",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=n(W.prototype,"stageButton",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=n(W.prototype,"changeButtonText",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=n(W.prototype,"numberDoorChange",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=n(W.prototype,"numberDoorParent",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(W.prototype,"capEdit",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=n(W.prototype,"bodyEdit",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(W.prototype,"weaponEdit",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=n(W.prototype,"bossEdit",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=n(W.prototype,"floorEdit",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=n(W.prototype,"stageEdit",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=n(W.prototype,"bossBloodEdit",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=n(W.prototype,"bossSkillEdit",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=n(W.prototype,"playerBloodEdit",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=n(W.prototype,"ballColorEdit",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=n(W.prototype,"ballNumEdit",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=n(W.prototype,"ballIntervalEdit",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=W))||U));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvenEnum.ts",["cc"],(function(E){"use strict";var _;return{setters:[function(E){_=E.cclegacy}],execute:function(){var A;E("GameEvenEnum",void 0),_._RF.push({},"cd654nDqwZK/pXT4Y8GITxS","GameEvenEnum",void 0),function(E){E.GAME_READY="GAME_READY",E.GAME_STARTED="GAME_STARTED",E.GAME_ENDED="GAME_ENDED",E.GAME_RESET="GAME_RESET",E.MONSTER_ATTACK_SATRT="MONSTER_ATTACK_SATRT",E.VIDEO_BACK="VIDEO_BACK",E.CAMERA_CHANGE_STATE="CAMERA_CHANGE_STATE",E.REVIVE_RESULT="REVIVE_RESULT",E.NEXT_LEVEL="NEXT_LEVEL",E.SHOW_GUIDE="SHOW_GUIDE",E.HIDE_GUIDE="HIDE_GUIDE",E.FIRST_UNLOCK_PRODUCTION="FIRST_UNLOCK_PRODUCTION",E.UNLOCK_BLOCK="UNLOCK_BLOCK",E.PRODUCTION_BIND="PRODUCTION_BIND",E.PRODUCTION_UP_TWEEN="PRODUCTION_UP_TWEEN",E.UNLOCK_OVERSEER="UNLOCK_OVERSEER",E.HANMAL_LEVEL_UP="HANMAL_LEVEL_UP",E.CHANGE_CAP="CHANGE_CAP",E.CHANGE_BODY="CHANGE_BODY",E.CHANGE_WEAPON="CHANGE_WEAPON",E.CHANGE_BOSS="CHANGE_BOSS",E.CHANGE_FLOOR="CHANGE_FLOOR",E.CHANGE_BOSS_BLOOD="CHANGE_BOSS_BLOOD",E.CHANGE_BOSS_SKILL="CHANGE_BOSS_SKILL",E.CHANGE_STAGE="CHANGE_STAGE",E.CHANGE_BALL_COLOR="CHANGE_BALL_COLOR",E.CHANGE_PLAYER_HP="CHANGE_PLAYER_HP",E.KILL_BOSS="KILL_BOSS",E.BOSS_DEAD="BOSS_DEAD",E.PLAYER_DEAD="PLAYER_DEAD",E.FIRE_BALL="FIRE_BALL",E.BOSS_SLOW="BOSS_SLOW"}(A||(A=E("GameEvenEnum",{}))),_._RF.pop()}}}));

System.register("chunks:///_virtual/FontClip3D.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,n,o,s,d,r,h,u,a;return{setters:[function(t){e=t.inheritsLoose,i=t.defineProperty,n=t.assertThisInitialized,o=t.createClass},function(t){s=t.cclegacy,d=t._decorator,r=t.v4,h=t.v3,u=t.MeshRenderer,a=t.Component}],execute:function(){var c;s._RF.push({},"d11fcjE7PFLUrESCyk6vHZ3","FontClip3D",void 0);var l=d.ccclass;d.property,t("FontClip3D",l("FontClip3D")(c=function(t){function s(){for(var e,o=arguments.length,s=new Array(o),d=0;d<o;d++)s[d]=arguments[d];return e=t.call.apply(t,[this].concat(s))||this,i(n(e),"isInit",!1),i(n(e),"thousandNode",void 0),i(n(e),"hundredNode",void 0),i(n(e),"tenNode",void 0),i(n(e),"bitNode",void 0),i(n(e),"numTilingOffset",[r(1,1,0,0),r(1,1,0,.25),r(1,1,0,.5),r(1,1,0,.75),r(1,1,.25,0),r(1,1,.25,.25),r(1,1,.25,.5),r(1,1,.25,.75),r(1,1,.5,0),r(1,1,.5,.25)]),i(n(e),"ndPos",[[h(),h(),h(),h()],[h(),h(),h(-.65),h(.65)],[h(),h(-1.15),h(),h(1.15)],[h(-1.5),h(-.5),h(.5),h(1.5)]]),i(n(e),"ndScales",[h(1,1,1),h(1,1,1),h(.9,.9,.9),h(.8,.8,.8)]),i(n(e),"_curNum",null),e}e(s,t);var d=s.prototype;return d.onEnable=function(){this.thousandNode=this.node.getChildByName("thousandNode"),this.hundredNode=this.node.getChildByName("hundredNum"),this.tenNode=this.node.getChildByName("tenNum"),this.bitNode=this.node.getChildByName("bitNum")},d.setNum=function(t){if(this._curNum!=t){if(this._curNum=t,this._curNum<=0)return this.thousandNode.active=!1,this.hundredNode.active=!1,this.tenNode.active=!1,void(this.bitNode.active=!1);var e=this.getNumIndex(this._curNum),i=this.ndPos[e-1],n=this.ndScales[e-1];this.thousandNode.active=e>=4,this.hundredNode.active=e>=3,this.tenNode.active=e>=2,this.bitNode.active=e>=1,i&&(this.thousandNode.position=i[0],this.hundredNode.position=i[1],this.tenNode.position=i[2],this.bitNode.position=i[3],this.thousandNode.scale=n,this.hundredNode.scale=n,this.tenNode.scale=n,this.bitNode.scale=n,e>=4&&this.thousandNode.getComponent(u).material.setProperty("tilingOffset",this.numTilingOffset[Math.floor(t%1e4/1e3)]),e>=3&&this.hundredNode.getComponent(u).material.setProperty("tilingOffset",this.numTilingOffset[Math.floor(t%1e3/100)]),e>=2&&this.tenNode.getComponent(u).material.setProperty("tilingOffset",this.numTilingOffset[Math.floor(t%100/10)]),e>=1&&this.bitNode.getComponent(u).material.setProperty("tilingOffset",this.numTilingOffset[t%10]))}},d.getNumIndex=function(t){for(var e=0;t>=1;)t/=10,e++;return e},d.onDisable=function(){this._curNum=null},o(s,[{key:"curNum",get:function(){return this._curNum}}]),s}(a))||c);s._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageVo.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n;return{setters:[function(t){e=t.defineProperty},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"db2a6bGd5ZND7naODYVt71j","LanguageVo",void 0);t("LanguageVo",function(){function t(){e(this,"id",void 0),e(this,"value",void 0)}return t.prototype.readFromByte=function(t){this.id=t.get},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/BallBase.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./Vec3Util.ts","./RotateUtil.ts","./RandomUtil.ts","./FlMath.ts","./GameEvents.ts","./FLGloable.ts","./Behavior3D.ts","./GameState.ts"],(function(t){"use strict";var i,o,e,l,n,a,s,r,d,h,c,u,y,p,m,f,v,B,g,b,M,S,D,A,R,w;return{setters:[function(t){i=t.defineProperty,o=t.applyDecoratedDescriptor,e=t.inheritsLoose,l=t.assertThisInitialized,n=t.initializerDefineProperty,a=t.createClass},function(t){s=t.cclegacy,r=t._decorator,d=t.v3,h=t.geometry,c=t.RigidBody,u=t.ERigidBodyType,y=t.SphereCollider,p=t.PhysicsSystem,m=t.math,f=t.instantiate,v=t.tween},function(t){B=t.Vec3Util},function(t){g=t.RotateUtil},function(t){b=t.RandomUtil},function(t){M=t.default},function(t){S=t.GameEvents},function(t){D=t.FLGloable},function(t){A=t.Behavior3D},function(t){R=t.EColliderGroup,w=t.EBuffType}],execute:function(){var k,I,P,U,_;s._RF.push({},"e7ebcIXf5pCrIOJrH45Vgor","BallBase",void 0);var F=r.ccclass,E=r.property;t("BallBase",F((_=U=function(t){function o(){for(var e,a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,i(l(e),"moveSpeed",o.initSpeed),i(l(e),"_atkMul",1),i(l(e),"skill",null),i(l(e),"moveDir",d()),i(l(e),"isMove",!1),i(l(e),"rigidBody",null),i(l(e),"isCopy",!1),i(l(e),"multiplyNum",0),i(l(e),"isEnemy",!1),i(l(e),"addnum",0),n(l(e),"ballId",P,l(e)),i(l(e),"numberWallUUID",[]),i(l(e),"ray",new h.Ray),i(l(e),"shutOutUUID",""),i(l(e),"isRayStart",!1),i(l(e),"multiplyAng",5),i(l(e),"multiplyAdd",.5),i(l(e),"multiplyAng2",5),e}e(o,t);var s=o.prototype;return s.onLoad=function(){this.rigidBody=this.getComponent(c),this.rigidBody.setGroup(R.ball),this.rigidBody.setMask(this.ballRayMask),this.rigidBody.type=u.STATIC,this.node.on(S.E_BallAction,this.onBallAction,this);this.node.getComponent(y)},s.update=function(t){if(this.isMove){t=M.getMinMax(t,.016,.018);var i=this.moveSpeed*t;if(this.node.worldPosition.z>D.player.worldPosition.z+1||this.node.worldPosition.x<-4||this.node.worldPosition.x>4||this.node.worldPosition.z<D.curMonster.worldPosition.z-1)this.recovery();else{var o=this.moveDir.clone().multiplyScalar(i);this.node.translate(o,1),this.isRayStart&&this.castRay(this.node.worldPosition,this.moveDir)}}},s.castRay=function(t,i){if(this.ray.o=t,this.ray.d=i,p.instance.raycast(this.ray,this.ballRayMask,10),p.instance.raycastResults&&p.instance.raycastResults.length>0){for(var o=1e10,e=null,l=0;l<p.instance.raycastResults.length;l++){var n=p.instance.raycastResults[l].distance;n<=o&&(o=n,e=p.instance.raycastResults[l])}if(e&&o<=.5){if(this.shutOutUUID==e.collider.node.uuid)return;if(e.collider.getGroup()==R.number_wall)-1==this.numberWallUUID.indexOf(e.collider.node.uuid)&&(this.numberWallUUID.push(e.collider.node.uuid),e.collider.node.emit(S.E_DoorAction,this.node));else if(e.collider.getGroup()==R.push_wall)this.hitWall(e.collider.node),this.recovery();else{var a=e.hitPoint.clone(),s=e.hitNormal.clone(),r=B.getReflectedDir(i,s);if(this.multiplyNum>0){var d=a.clone().subtract(i.clone().normalize().multiplyScalar(.25));this.multiplyBall(this.multiplyNum,r,d),this.multiplyNum=0,this.recovery()}else this.changeDir(r)}}}},s.onCollision=function(t){},s.hitMonster=function(t,i,o){void 0===o&&(o=this.atk),t.emit(S.E_MonsterHit,o,i),this.isMove=!1,this.node.off(S.E_BallAction,this.onBallAction,this),this.addImpulse()},s.hitWall=function(t){t.emit(S.E_WallHit,this.node.worldPosition,this.ballId),this.node.off(S.E_BallAction,this.onBallAction,this)},s.addImpulse=function(){var t=this;this.rigidBody.clearState(),this.rigidBody.setMask(this.ballMonsterMask),this.rigidBody.type=u.DYNAMIC,this.rigidBody.clearState();var i=m.random()>.5?b.randomFloat(-5,-3):b.randomFloat(3,5);this.rigidBody.applyImpulse(d(i,b.randomFloat(40,30),b.randomFloat(8,5))),this.rigidBody.applyTorque(d(b.randomFloat(-6,6),b.randomFloat(20,30),b.randomFloat(3,1))),this.scheduleOnce((function(){t.recovery()}),5)},s.addImpulse2=function(){var t=this;this.rigidBody.clearState(),this.rigidBody.setMask(this.ballMonsterMask),this.rigidBody.type=u.DYNAMIC,this.rigidBody.clearState();var i=m.random()>.5?b.randomFloat(-5,-3):b.randomFloat(3,5);this.rigidBody.applyImpulse(d(i,b.randomFloat(40,30),b.randomFloat(8,5))),this.rigidBody.applyTorque(d(b.randomFloat(-6,6),b.randomFloat(5,10),b.randomFloat(3,1))),this.scheduleOnce((function(){t.recovery()}),5)},s.recovery=function(){this.stop(),this.node.destroy(),this.rigidBody.clearState()},s.launch=function(t,i,e,l,n){void 0===e&&(e=!1),void 0===l&&(l=""),void 0===n&&(n=!1),this.isEnemy=n,this.moveSpeed=o.initSpeed,this.node.active=!0,this.node.worldPosition=i,this.changeDir(t),this.isMove=!0,this.shutOutUUID=l,this.isCopy=e,this.isRayStart=!0},s.enterDoorCallBack=function(t,i,o){switch(void 0===i&&(i=!1),t){case w.ADD:this.addBuffBall(o[0],o[1]);break;case w.CUT:break;case w.MULTIPLY:this.multiplyNum=o,this.multiplyNum=this.multiplyNum>10?10:this.multiplyNum;break;case w.MULTIPLY2:this.multiplyBuffBall(o[0],o[1]);break;case w.EXCEPT:}i&&this.recovery()},s.multiplyBall=function(t,i,o){this.addnum+=1;for(var e=-Math.floor(t/2)*this.multiplyAng,l=0;l<t;l++){var n=e;e+=this.multiplyAng,this.node.rotation=B.lockPos(d(),i,!1),g.rotateAround(this.node,d(0,1,0),m.toRadian(n));var a=this.node.forward.clone(),s=f(this.node);s.parent=D.ballRoot,s.emit(S.E_BallAction,"launch",a,o)}},s.addBuffBall=function(t,i){for(var o=-Math.floor(i/2)*this.multiplyAdd,e=0;e<i;e++){var l=o;o+=this.multiplyAdd;var n=this.node.worldPosition.clone().add3f(l,0,0),a=f(this.node);a.parent=D.ballRoot,a.emit(S.E_BallAction,"launch",this.moveDir.clone(),n,!0,t)}this.recovery()},s.multiplyBuffBall=function(t,i){for(var o=-Math.floor(i/2)*this.multiplyAng2,e=0;e<i;e++){var l=o;o+=this.multiplyAng2,this.node.rotation=B.lockPos(d(),this.moveDir,!1),g.rotateAround(this.node,d(0,1,0),m.toRadian(l));var n=this.node.forward.clone(),a=f(this.node);a.parent=D.ballRoot,a.emit(S.E_BallAction,"launch",n,this.node.worldPosition.clone(),!0,t)}this.recovery()},s.setSpeed=function(){var t=this;if(this.moveSpeed!=o.fastSpeed){var i=.1*this.node.getSiblingIndex();v(this).delay(i).call((function(){t.moveSpeed=o.fastSpeed})).start()}},s.stop=function(){this.isMove=!1,this.rigidBody.setLinearVelocity(d())},s.changeDir=function(t){this.moveDir=t,this.node.rotation=B.lockPos(d(),this.moveDir)},s.onBallAction=function(t){var i=this[t];if(i){for(var o=arguments.length,e=new Array(o>1?o-1:0),l=1;l<o;l++)e[l-1]=arguments[l];i.call.apply(i,[this].concat(e))}},s.playWallSound=function(){},s.onDestroyed=function(){},a(o,[{key:"atk",get:function(){return 1}},{key:"ballRayMask",get:function(){return R.wall+R.number_wall+R.push_wall}},{key:"ballMonsterMask",get:function(){return R.ball+R.plane+R.wall+R.push_wall}}]),o}(A),i(U,"initSpeed",12),i(U,"fastSpeed",2200),i(U,"moveSpeed",10),P=o((I=_).prototype,"ballId",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),k=I))||k);s._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageVo2.ts",["cc"],(function(){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"ea415M1jpdCHo+Dk7CYYOTH","LanguageVo",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/CameraLock.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,e,o,r,n,a,s,c,p,l,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized,n=t.defineProperty},function(t){a=t.cclegacy,s=t._decorator,c=t.Node,p=t.Vec3,l=t.v3,u=t.Component}],execute:function(){var d,h,y,f,m;a._RF.push({},"f3d026j5G5OC6vSRYLCeUsu","CameraLock",void 0);var C=s.ccclass,g=s.property;t("CameraLock",(d=C("CameraLock"),h=g({type:c,displayName:"跟随目标节点"}),d((m=i((f=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a))||this,o(r(i),"targetNd",m,r(i)),n(r(i),"initPosition",void 0),n(r(i),"subCameraAndPlayer",void 0),i}e(i,t);var a=i.prototype;return a.onLoad=function(){this.initPosition=this.node.position.clone(),this.subCameraAndPlayer=this.initPosition.subtract(this.targetNd.position)},a.update=function(){this.node.position=p.lerp(l(),this.node.position,l(this.targetNd.position.x+this.subCameraAndPlayer.x,this.targetNd.position.y+this.subCameraAndPlayer.y,this.targetNd.position.z+this.subCameraAndPlayer.z),.8)},i}(u)).prototype,"targetNd",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=f))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/BossBlood.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./UIEvenEnum.ts","./FLGloable.ts","./GameEvenEnum.ts"],(function(t){"use strict";var e,o,n,i,s,r,l,a,c,u,h,d,p,f,v,B,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized,s=t.defineProperty},function(t){r=t.cclegacy,l=t._decorator,a=t.Label,c=t.CCInteger,u=t.systemEvent,h=t.Tween,d=t.tween,p=t.v3,f=t.Component},function(t){v=t.UIEvenEnum},function(t){B=t.FLGloable},function(t){g=t.GameEvenEnum}],execute:function(){var b,y,m,w,T,E,D;r._RF.push({},"f5ed6nDgJlCLr64ujQVGq5V","BossBlood",void 0);var I=l.ccclass,A=l.property;t("BossBlood",(b=I("BossBlood"),y=A({type:a,tooltip:"血量字体"}),m=A({type:c,tooltip:"高度"}),b((E=e((T=function(t){function e(){for(var e,o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,n(i(e),"bloodText",E,i(e)),n(i(e),"high",D,i(e)),s(i(e),"bossActive",!0),s(i(e),"tweenInterval",0),e}o(e,t);var r=e.prototype;return r.onLoad=function(){u.on(v.UPDATE_BOSS_BLOOD,this.onChangeBossBlood,this),u.on(g.BOSS_DEAD,this.onBossDead,this)},r.start=function(){},r.onChangeBossBlood=function(t){this.bossActive=!0,this.bloodText.string=t.toString(),this.changeBossBloodTween()},r.changeBossBloodTween=function(){this.tweenInterval>0||(this.tweenInterval=.125,h.stopAllByTarget(this.node),d(this.node).to(.06,{scale:p(1.6,1.6,1.6)}).to(.07,{scale:p(1,1,1)}).start())},r.onBossDead=function(){this.bossActive=!1,this.bloodText.string=""},r.update=function(t){if(this.bossActive)if(this.tweenInterval>0&&(this.tweenInterval-=t),B.curMonster){var e=B.cameraCom.convertToUINode(B.curMonster.worldPosition,this.node.parent);this.node.setPosition(e.x,e.y+this.high)}else this.bloodText.string=""},e}(f)).prototype,"bloodText",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(T.prototype,"high",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=T))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameEvents.ts",["cc"],(function(t){"use strict";var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"fcd2eOg8MdLEJLOEz+huPVI","GameEvents",void 0);t("GameEvents",{E_MonsterHit:"m1010",E_Combo:"m1009",E_BallAction:"m1030",E_DoorAction:"m1040",E_WallHit:"m1100"});e._RF.pop()}}}));

System.register("chunks:///_virtual/ball-magic",["./UIEvenEnum.ts","./PlayerData.ts","./LevelToolPlayer.ts","./EAniDefine.ts","./GameEvents.ts","./EBossState.ts","./EEffectName.ts","./EBossSkill.ts","./FLGloable.ts","./GameEvenEnum.ts","./MonsterBase.ts","./PlayerBlood.ts","./TouchCtrl.ts","./TableNameEnum.ts","./TbConfig.ts","./GameBannerTip.ts","./FlyImgUtil.ts","./MapPrefabEnum.ts","./ESoundEnum.ts","./GameState.ts","./MainPlayer.ts","./LevelToolBoss.ts","./LevelToolNumWall.ts","./MapLoader.ts","./NumberTool.ts","./NumberWall.ts","./MapLevelVo.ts","./BallBase.ts","./Ball_10001.ts","./CameraScript.ts","./EEffectEnum.ts","./TweenUI.ts","./TbCommodityVo.ts","./FollowMovement.ts","./MonsterTool.ts","./FreeFlightCamera.ts","./GamePanel.ts","./light.ts","./GameMgr.ts","./LevelBlockVo.ts","./LanguageKeyEnum.ts","./TbShopItemVo.ts","./Wall.ts","./MapManager.ts","./BallNum.ts","./joystick.ts","./LanguageVo.ts","./TableModel.ts","./DebugPanel.ts","./FontClip3D.ts","./LanguageVo2.ts","./CameraLock.ts","./BossBlood.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/ball-magic', 'chunks:///_virtual/ball-magic'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});